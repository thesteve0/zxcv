
<!DOCTYPE html>

<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Filtering Cheat Sheet — FiftyOne 1.3.0 documentation</title>
<link href="../_static/favicon.ico" rel="shortcut icon"/>
<link href="../_static/css/theme.css" rel="stylesheet" type="text/css"/>
<!-- <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> -->
<link href="../_static/css/voxel51-website.css" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="views_cheat_sheet.html" rel="next" title="Views Cheat Sheet"/>
<link href="fiftyone_terminology.html" rel="prev" title="FiftyOne terminology"/>
<meta content="https://voxel51.com/wp-content/uploads/2024/03/3.24_webpages_Home_AV.png" property="og:image">
<link href="https://fonts.googleapis.com/css?family=Palanquin:400,600,700,800" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" rel="stylesheet"/>
<script src="https://tag.clearbitscripts.com/v1/pk_b9ed71c8234edd4f77326bcbfab5a4ca/tags.js"></script>
<script src="../_static/js/modernizr.min.js"></script>
</meta></head>

<body class="pytorch-body">
<div class="table-of-contents-link-wrapper">
<span>Table of Contents</span>
<a class="toggle-table-of-contents" data-behavior="toggle-table-of-contents" href="#"></a>
</div>
<nav class="pytorch-left-menu" data-toggle="wy-nav-shift" id="pytorch-left-menu">
<div class="pytorch-side-scroll">
<div aria-label="main navigation" class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation">
<div class="pytorch-left-menu-search">
<div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input name="q" placeholder="Search Docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../teams/index.html">FiftyOne Teams 🚀</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/index.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Recipes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataset_zoo/index.html">Dataset Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_zoo/index.html">Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../brain.html">FiftyOne Brain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/index.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/fiftyone.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecation.html">Deprecation Notices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>
</div>
</div>
</nav>
<div class="pytorch-container">
<div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
<div class="pytorch-breadcrumbs-wrapper">
<div aria-label="breadcrumbs navigation" role="navigation">
<ul class="pytorch-breadcrumbs">
<li>
<a href="../index.html">
          
            Docs
          
        </a> &gt;
      </li>
<li><a href="index.html">FiftyOne Cheat Sheets</a> &gt;</li>
<li>Filtering Cheat Sheet</li>
<li class="pytorch-breadcrumbs-aside">
</li>
</ul>
</div>
</div>
<div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Contents
        </div>
</div>
<section class="pytorch-content-wrap" data-toggle="wy-nav-shift" id="pytorch-content-wrap">
<div class="pytorch-content-left">
<div class="rst-content style-external-links">
<div class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<article class="pytorch-article" id="pytorch-article" itemprop="articleBody">
<div class="section" id="filtering-cheat-sheet">
<span id="id1"></span><h1>Filtering Cheat Sheet<a class="headerlink" href="#filtering-cheat-sheet" title="Permalink to this headline">¶</a></h1>
<p>This cheat sheet shows how to perform common matching and filtering operations
in FiftyOne using <a class="reference internal" href="../user_guide/using_views.html#using-views"><span class="std std-ref">dataset views</span></a>.</p>
<div class="section" id="strings-and-pattern-matching">
<h2>Strings and pattern matching<a class="headerlink" href="#strings-and-pattern-matching" title="Permalink to this headline">¶</a></h2>
<p>The formulas in this section use the following example data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"quickstart"</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 37%"/>
<col style="width: 63%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Filepath starts with “/Users”</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"filepath"</span><span class="p">)</span><span class="o">.</span><span class="n">starts_with</span><span class="p">(</span><span class="s2">"/Users"</span><span class="p">))</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Filepath ends with “10.jpg” or “10.png”</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"filepath"</span><span class="p">)</span><span class="o">.</span><span class="n">ends_with</span><span class="p">((</span><span class="s2">"10.jpg"</span><span class="p">,</span> <span class="s2">"10.png"</span><span class="p">))</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Label contains string “be”</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span>
    <span class="s2">"predictions"</span><span class="p">,</span>
    <span class="n">F</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)</span><span class="o">.</span><span class="n">contains_str</span><span class="p">(</span><span class="s2">"be"</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Filepath contains “088” and is JPEG</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"filepath"</span><span class="p">)</span><span class="o">.</span><span class="n">re_match</span><span class="p">(</span><span class="s2">"088*.jpg"</span><span class="p">))</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match" title="fiftyone.core.collections.SampleCollection.match"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.filter_labels" title="fiftyone.core.collections.SampleCollection.filter_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter_labels()</span></code></a>.</p>
</div>
<div class="section" id="dates-and-times">
<h2>Dates and times<a class="headerlink" href="#dates-and-times" title="Permalink to this headline">¶</a></h2>
<p>The formulas in this section use the following example data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"image</span><span class="si">%d</span><span class="s2">.jpg"</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="n">dates</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
    <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span>
    <span class="n">datetime</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">ds</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
    <span class="p">[</span><span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="n">dates</span><span class="p">)]</span>
<span class="p">)</span>

<span class="c1"># Example data</span>
<span class="n">query_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">query_delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%"/>
<col style="width: 62%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>After 2021-08-24 02:01:00</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">query_date</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Within 30 minutes of 2021-08-24 02:01:00</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span> <span class="o">-</span> <span class="n">query_date</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">query_delta</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>On the 24th of the month</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">day_of_month</span><span class="p">()</span> <span class="o">==</span> <span class="mi">24</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>On even day of the week</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">day_of_week</span><span class="p">()</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>On the 268th day of the year</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">day_of_year</span><span class="p">()</span> <span class="o">==</span> <span class="mi">268</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>In the 9th month of the year (September)</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">month</span><span class="p">()</span> <span class="o">==</span> <span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>In the 38th week of the year</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">week</span><span class="p">()</span> <span class="o">==</span> <span class="mi">38</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>In the year 2022</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">year</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2022</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>With minute not equal to 0</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">minute</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match" title="fiftyone.core.collections.SampleCollection.match"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match()</span></code></a>.</p>
</div>
<div class="section" id="geospatial">
<h2>Geospatial<a class="headerlink" href="#geospatial" title="Permalink to this headline">¶</a></h2>
<p>The formulas in this section use the following example data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">TIMES_SQUARE</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">73.9855</span><span class="p">,</span> <span class="mf">40.7580</span><span class="p">]</span>
<span class="n">MANHATTAN</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">73.949701</span><span class="p">,</span> <span class="mf">40.834487</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">73.896611</span><span class="p">,</span> <span class="mf">40.815076</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">73.998083</span><span class="p">,</span> <span class="mf">40.696534</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">74.031751</span><span class="p">,</span> <span class="mf">40.715273</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">73.949701</span><span class="p">,</span> <span class="mf">40.834487</span><span class="p">],</span>
    <span class="p">]</span>
<span class="p">]</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"quickstart-geo"</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%"/>
<col style="width: 62%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Within 5km of Times Square</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">geo_near</span><span class="p">(</span><span class="n">TIMES_SQUARE</span><span class="p">,</span> <span class="n">max_distance</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Within Manhattan</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">geo_within</span><span class="p">(</span><span class="n">MANHATTAN</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.geo_near" title="fiftyone.core.collections.SampleCollection.geo_near"><code class="xref py py-meth docutils literal notranslate"><span class="pre">geo_near()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.geo_within" title="fiftyone.core.collections.SampleCollection.geo_within"><code class="xref py py-meth docutils literal notranslate"><span class="pre">geo_within()</span></code></a>.</p>
</div>
<div class="section" id="detections">
<h2>Detections<a class="headerlink" href="#detections" title="Permalink to this headline">¶</a></h2>
<p>The formulas in this section use the following example data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"quickstart"</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%"/>
<col style="width: 66%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Predictions with confidence &gt; 0.95</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">"confidence"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.95</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Exactly 10 ground truth detections</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>At least one dog</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
    <span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.detections.label"</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"dog"</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Images that do not contain dogs</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
    <span class="o">~</span><span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.detections.label"</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"dog"</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Only dog detections</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">"ground_truth"</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"dog"</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Images that only contain dogs</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
    <span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.detections.label"</span><span class="p">)</span><span class="o">.</span><span class="n">is_subset</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">"dog"</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Contains either a cat or a dog</p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
     <span class="n">F</span><span class="p">(</span><span class="s2">"predictions.detections.label"</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">"cat"</span><span class="p">,</span><span class="s2">"dog"</span><span class="p">]</span>
     <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Contains a cat and a dog prediction</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
    <span class="n">F</span><span class="p">(</span><span class="s2">"predictions.detections.label"</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">"cat"</span><span class="p">,</span> <span class="s2">"dog"</span><span class="p">],</span> <span class="nb">all</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Contains a cat or dog but not both</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="s2">"predictions.detections.label"</span>
<span class="n">one_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="n">field</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">([</span><span class="s2">"cat"</span><span class="p">,</span> <span class="s2">"dog"</span><span class="p">])</span>
<span class="n">both_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="n">field</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">([</span><span class="s2">"cat"</span><span class="p">,</span> <span class="s2">"dog"</span><span class="p">],</span> <span class="nb">all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">one_expr</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">both_expr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match" title="fiftyone.core.collections.SampleCollection.match"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.filter_labels" title="fiftyone.core.collections.SampleCollection.filter_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter_labels()</span></code></a>.</p>
<div class="section" id="bounding-boxes">
<h3>Bounding boxes<a class="headerlink" href="#bounding-boxes" title="Permalink to this headline">¶</a></h3>
<p>The formulas in this section assume the following code has been run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"quickstart"</span><span class="p">)</span>

<span class="n">box_width</span><span class="p">,</span> <span class="n">box_height</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"bounding_box"</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">F</span><span class="p">(</span><span class="s2">"bounding_box"</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">rel_bbox_area</span> <span class="o">=</span> <span class="n">box_width</span> <span class="o">*</span> <span class="n">box_height</span>

<span class="n">im_width</span><span class="p">,</span> <span class="n">im_height</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"$metadata.width"</span><span class="p">),</span> <span class="n">F</span><span class="p">(</span><span class="s2">"$metadata.height"</span><span class="p">)</span>
<span class="n">abs_area</span> <span class="o">=</span> <span class="n">rel_bbox_area</span> <span class="o">*</span> <span class="n">im_width</span> <span class="o">*</span> <span class="n">im_height</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bounding box query</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Larger than absolute size</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="n">abs_area</span> <span class="o">&gt;</span> <span class="mi">96</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Between two relative sizes</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">good_bboxes</span> <span class="o">=</span> <span class="p">(</span><span class="n">rel_bbox_area</span> <span class="o">&gt;</span> <span class="mf">0.25</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">rel_bbox_area</span> <span class="o">&lt;</span> <span class="mf">0.75</span><span class="p">)</span>
<span class="n">good_expr</span> <span class="o">=</span> <span class="n">rel_bbox_area</span><span class="o">.</span><span class="n">let_in</span><span class="p">(</span><span class="n">good_bboxes</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="n">good_expr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Approximately square</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rectangleness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span>
    <span class="n">box_width</span> <span class="o">*</span> <span class="n">im_width</span> <span class="o">-</span> <span class="n">box_height</span> <span class="o">*</span> <span class="n">im_height</span>
<span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">)</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span>
    <span class="s2">"predictions"</span><span class="p">,</span> <span class="n">rectangleness</span> <span class="o">&lt;=</span> <span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Aspect ratio &gt; 2</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aspect_ratio</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">box_width</span> <span class="o">*</span> <span class="n">im_width</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">box_height</span> <span class="o">*</span> <span class="n">im_height</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">)</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span>
    <span class="s2">"predictions"</span><span class="p">,</span> <span class="n">aspect_ratio</span> <span class="o">&gt;</span> <span class="mi">2</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.filter_labels" title="fiftyone.core.collections.SampleCollection.filter_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter_labels()</span></code></a>
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.select_fields" title="fiftyone.core.collections.SampleCollection.select_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_fields()</span></code></a>.</p>
</div>
<div class="section" id="evaluating-detections">
<h3>Evaluating detections<a class="headerlink" href="#evaluating-detections" title="Permalink to this headline">¶</a></h3>
<p>The formulas in this section assume the following code has been run on a
dataset <code class="docutils literal notranslate"><span class="pre">ds</span></code> with detections in its <code class="docutils literal notranslate"><span class="pre">predictions</span></code> field:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.brain</span> <span class="k">as</span> <span class="nn">fob</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"quickstart"</span><span class="p">)</span>

<span class="n">ds</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="n">eval_key</span><span class="o">=</span><span class="s2">"eval"</span><span class="p">)</span>

<span class="n">fob</span><span class="o">.</span><span class="n">compute_uniqueness</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">fob</span><span class="o">.</span><span class="n">compute_mistakenness</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="s2">"predictions"</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="s2">"ground_truth"</span><span class="p">)</span>
<span class="n">ep</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">to_evaluation_patches</span><span class="p">(</span><span class="s2">"eval"</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 37%"/>
<col style="width: 63%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Uniqueness &gt; 0.9</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"uniqueness"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>10 most unique images</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">"uniqueness"</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Predictions with confidence &gt; 0.95</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">"confidence"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.95</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>10 most “wrong” predictions</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">"mistakenness"</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Images with more than 10 false positives</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"eval_fp"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>False positive “dog” detections</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ep</span><span class="o">.</span><span class="n">match_labels</span><span class="p">(</span>
   <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"eval"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"fp"</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"dog"</span><span class="p">),</span>
   <span class="n">fields</span><span class="o">=</span><span class="s2">"predictions"</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Predictions with IoU &gt; 0.9</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ep</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"iou"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match" title="fiftyone.core.collections.SampleCollection.match"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.sort_by" title="fiftyone.core.collections.SampleCollection.sort_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sort_by()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.filter_labels" title="fiftyone.core.collections.SampleCollection.filter_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter_labels()</span></code></a>,
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_labels" title="fiftyone.core.collections.SampleCollection.match_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_labels()</span></code></a>.</p>
</div>
</div>
<div class="section" id="classifications">
<h2>Classifications<a class="headerlink" href="#classifications" title="Permalink to this headline">¶</a></h2>
<div class="section" id="evaluating-classifications">
<h3>Evaluating classifications<a class="headerlink" href="#evaluating-classifications" title="Permalink to this headline">¶</a></h3>
<p>The formulas in the following table assumes the following code has been run on
a dataset <code class="docutils literal notranslate"><span class="pre">ds</span></code>, where the <code class="docutils literal notranslate"><span class="pre">predictions</span></code> field is populated with
classification predictions that have their <code class="docutils literal notranslate"><span class="pre">logits</span></code> attribute set:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.brain</span> <span class="k">as</span> <span class="nn">fob</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"cifar10"</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">"test"</span><span class="p">)</span>

<span class="c1"># TODO: add your own predicted classifications</span>

<span class="n">ds</span><span class="o">.</span><span class="n">evaluate_classifications</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="n">gt_field</span><span class="o">=</span><span class="s2">"ground_truth"</span><span class="p">)</span>

<span class="n">fob</span><span class="o">.</span><span class="n">compute_uniqueness</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">fob</span><span class="o">.</span><span class="n">compute_hardness</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="s2">"predictions"</span><span class="p">)</span>
<span class="n">fob</span><span class="o">.</span><span class="n">compute_mistakenness</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="s2">"predictions"</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="s2">"ground_truth"</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 37%"/>
<col style="width: 63%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>10 most unique incorrect predictions</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
    <span class="n">F</span><span class="p">(</span><span class="s2">"predictions.label"</span><span class="p">)</span> <span class="o">!=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.label"</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">"uniqueness"</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>10 most “wrong” predictions</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">"mistakenness"</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>10 most likely annotation mistakes</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match_tags</span><span class="p">(</span><span class="s2">"train"</span><span class="p">)</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span>
    <span class="s2">"mistakenness"</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match" title="fiftyone.core.collections.SampleCollection.match"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.sort_by" title="fiftyone.core.collections.SampleCollection.sort_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sort_by()</span></code></a>,
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_tags" title="fiftyone.core.collections.SampleCollection.match_tags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_tags()</span></code></a>.</p>
</div>
</div>
<div class="section" id="built-in-filter-and-match-functions">
<h2>Built-in filter and match functions<a class="headerlink" href="#built-in-filter-and-match-functions" title="Permalink to this headline">¶</a></h2>
<p>FiftyOne has special methods for matching and filtering on specific data types.
Take a look at the examples in this section to see how various operations can
be performed via these special purpose methods, and compare that to the brute
force implementation of the same operation that follows.</p>
<p>The tables in this section use the following example data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bson</span> <span class="kn">import</span> <span class="n">ObjectId</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"quickstart"</span><span class="p">)</span>

<span class="c1"># Tag a few random samples</span>
<span class="n">ds</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">tag_labels</span><span class="p">(</span><span class="s2">"potential_mistake"</span><span class="p">,</span> <span class="n">label_fields</span><span class="o">=</span><span class="s2">"predictions"</span><span class="p">)</span>

<span class="c1"># Grab a few label IDs</span>
<span class="n">label_ids</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">dataset</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">ds</span><span class="o">.</span><span class="n">select_labels</span><span class="p">(</span><span class="n">ids</span><span class="o">=</span><span class="n">label_ids</span><span class="p">)</span><span class="o">.</span><span class="n">tag_labels</span><span class="p">(</span><span class="s2">"error"</span><span class="p">)</span>

<span class="n">len_filter</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)</span><span class="o">.</span><span class="n">strlen</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">3</span>
<span class="n">id_filter</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"_id"</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">([</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">_id</span> <span class="ow">in</span> <span class="n">label_ids</span><span class="p">])</span>
</pre></div>
</div>
<div class="section" id="filtering-labels">
<h3>Filtering labels<a class="headerlink" href="#filtering-labels" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%"/>
<col style="width: 83%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Get predicted detections that have confidence &gt; 0.9</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Idiomatic</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">"confidence"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brute force</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span>
    <span class="s2">"predictions.detections"</span><span class="p">,</span>
    <span class="n">F</span><span class="p">(</span><span class="s2">"detections"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"confidence"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.filter_labels" title="fiftyone.core.collections.SampleCollection.filter_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter_labels()</span></code></a>.</p>
</div>
<div class="section" id="matching-labels">
<h3>Matching labels<a class="headerlink" href="#matching-labels" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%"/>
<col style="width: 87%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Samples that have labels with id’s in the list <code class="docutils literal notranslate"><span class="pre">label_ids</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Idiomatic</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match_labels</span><span class="p">(</span><span class="n">ids</span><span class="o">=</span><span class="n">label_ids</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brute force</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pred_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"predictions.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id_filter</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">gt_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id_filter</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pred_expr</span> <span class="o">|</span> <span class="n">gt_expr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%"/>
<col style="width: 19%"/>
<col style="width: 68%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head" colspan="2"><p>Samples that have labels satisfying <code class="docutils literal notranslate"><span class="pre">len_filter</span></code> in <code class="docutils literal notranslate"><span class="pre">predictions</span></code> or <code class="docutils literal notranslate"><span class="pre">ground_truth</span></code> field</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Idiomatic</p></td>
<td colspan="2"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match_labels</span><span class="p">(</span>
    <span class="nb">filter</span><span class="o">=</span><span class="n">len_filter</span><span class="p">,</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="s2">"ground_truth"</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brute force</p></td>
<td colspan="2"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pred_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"predictions.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">len_filter</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">gt_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">len_filter</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pred_expr</span> <span class="o">|</span> <span class="n">gt_expr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%"/>
<col style="width: 19%"/>
<col style="width: 68%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head" colspan="2"><p>Samples that have labels with tag “error” in <code class="docutils literal notranslate"><span class="pre">predictions</span></code> or <code class="docutils literal notranslate"><span class="pre">ground_truth</span></code> field</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Idiomatic</p></td>
<td colspan="2"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match_labels</span><span class="p">(</span><span class="n">tags</span><span class="o">=</span><span class="s2">"error"</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brute force</p></td>
<td colspan="2"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tag_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"tags"</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"error"</span><span class="p">)</span>
<span class="n">pred_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"predictions.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">tag_expr</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">gt_expr</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"ground_truth.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">tag_expr</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pred_expr</span> <span class="o">|</span> <span class="n">gt_expr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_labels" title="fiftyone.core.collections.SampleCollection.match_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_labels()</span></code></a>.</p>
</div>
<div class="section" id="matching-tags">
<h3>Matching tags<a class="headerlink" href="#matching-tags" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%"/>
<col style="width: 83%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Samples that have tag <code class="docutils literal notranslate"><span class="pre">validation</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Idiomatic</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match_tags</span><span class="p">(</span><span class="s2">"validation"</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brute force</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"tags"</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"validation"</span><span class="p">))</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_tags" title="fiftyone.core.collections.SampleCollection.match_tags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_tags()</span></code></a>.</p>
</div>
<div class="section" id="matching-frames">
<h3>Matching frames<a class="headerlink" href="#matching-frames" title="Permalink to this headline">¶</a></h3>
<p>The following table uses this example data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">"quickstart-video"</span><span class="p">)</span>
<span class="n">num_objects</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">"detections.detections"</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%"/>
<col style="width: 83%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Frames with at least 10 detections</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Idiomatic</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match_frames</span><span class="p">(</span><span class="n">num_objects</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brute force</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">"frames"</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">num_objects</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_frames" title="fiftyone.core.collections.SampleCollection.match_frames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_frames()</span></code></a>.</p>
</div>
<div class="section" id="filtering-keypoints">
<h3>Filtering keypoints<a class="headerlink" href="#filtering-keypoints" title="Permalink to this headline">¶</a></h3>
<p>You can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.filter_keypoints" title="fiftyone.core.collections.SampleCollection.filter_keypoints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter_keypoints()</span></code></a>
to retrieve individual keypoints within a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> instance that match a
specified condition.</p>
<p>The following table uses this example data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">ds</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
            <span class="n">filepath</span><span class="o">=</span><span class="s2">"image1.jpg"</span><span class="p">,</span>
            <span class="n">predictions</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Keypoints</span><span class="p">(</span>
                <span class="n">keypoints</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">Keypoint</span><span class="p">(</span>
                        <span class="n">label</span><span class="o">=</span><span class="s2">"person"</span><span class="p">,</span>
                        <span class="n">points</span><span class="o">=</span><span class="p">[(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)],</span>
                        <span class="n">confidence</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">],</span>
                    <span class="p">)</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">"image2.jpg"</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">ds</span><span class="o">.</span><span class="n">default_skeleton</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">KeypointSkeleton</span><span class="p">(</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"nose"</span><span class="p">,</span> <span class="s2">"left eye"</span><span class="p">,</span> <span class="s2">"right eye"</span><span class="p">,</span> <span class="s2">"left ear"</span><span class="p">,</span> <span class="s2">"right ear"</span><span class="p">],</span>
    <span class="n">edges</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%"/>
<col style="width: 19%"/>
<col style="width: 68%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head" colspan="2"><p>Only include predicted keypoints with confidence &gt; 0.9</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Idiomatic</p></td>
<td colspan="2"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">filter_keypoints</span><span class="p">(</span><span class="s2">"predictions"</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">"confidence"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brute force</p></td>
<td colspan="2"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tmp</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">tmp</span><span class="o">.</span><span class="n">iter_samples</span><span class="p">(</span><span class="n">autosave</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sample</span><span class="o">.</span><span class="n">predictions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">continue</span>

    <span class="k">for</span> <span class="n">keypoint</span> <span class="ow">in</span> <span class="n">sample</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">keypoints</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">confidence</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keypoint</span><span class="o">.</span><span class="n">confidence</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">confidence</span> <span class="o">&lt;=</span> <span class="mf">0.9</span><span class="p">:</span>
                <span class="n">keypoint</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Reference:
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_frames" title="fiftyone.core.collections.SampleCollection.match_frames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_frames()</span></code></a>.</p>
</div>
</div>
</div>
</article>
</div>

</div>
</div>
<div class="pytorch-content-right" id="pytorch-content-right">
<div class="pytorch-right-menu" id="pytorch-right-menu">
<div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
<ul>
<li><a class="reference internal" href="#">Filtering Cheat Sheet</a><ul>
<li><a class="reference internal" href="#strings-and-pattern-matching">Strings and pattern matching</a></li>
<li><a class="reference internal" href="#dates-and-times">Dates and times</a></li>
<li><a class="reference internal" href="#geospatial">Geospatial</a></li>
<li><a class="reference internal" href="#detections">Detections</a><ul>
<li><a class="reference internal" href="#bounding-boxes">Bounding boxes</a></li>
<li><a class="reference internal" href="#evaluating-detections">Evaluating detections</a></li>
</ul>
</li>
<li><a class="reference internal" href="#classifications">Classifications</a><ul>
<li><a class="reference internal" href="#evaluating-classifications">Evaluating classifications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#built-in-filter-and-match-functions">Built-in filter and match functions</a><ul>
<li><a class="reference internal" href="#filtering-labels">Filtering labels</a></li>
<li><a class="reference internal" href="#matching-labels">Matching labels</a></li>
<li><a class="reference internal" href="#matching-tags">Matching tags</a></li>
<li><a class="reference internal" href="#matching-frames">Matching frames</a></li>
<li><a class="reference internal" href="#filtering-keypoints">Filtering keypoints</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</section>
</div>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js" type="text/javascript"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/doctools.js"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
<script src="../_static/js/voxel51-website.js"></script>
<script src="../_static/js/custom.js"></script>
<script src="../_static/js/vendor/popper.min.js" type="text/javascript"></script>
<script src="../_static/js/vendor/bootstrap.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
<script src="../_static/js/theme.js" type="text/javascript"></script>
<script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<!-- Begin Footer -->


<!-- End Footer -->
<!-- Begin Mobile Menu -->

<!-- End Mobile Menu -->
<script src="../_static/js/vendor/anchor.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>