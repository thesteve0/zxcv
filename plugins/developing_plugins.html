


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Developing Plugins &mdash; FiftyOne 1.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../_static/css/voxel51-website.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TypeScript API Reference" href="ts-api.html" />
    <link rel="prev" title="Using Plugins" href="using_plugins.html" />
<meta property="og:image" content="https://voxel51.com/wp-content/uploads/2024/03/3.24_webpages_Home_AV.png" />

<link
  href="https://fonts.googleapis.com/css?family=Palanquin:400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
  rel="stylesheet"
/>
<script src="https://tag.clearbitscripts.com/v1/pk_b9ed71c8234edd4f77326bcbfab5a4ca/tags.js"></script>


  
  <script src="../_static/js/modernizr.min.js"></script>

  
</head>


<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <nav id="nav__main" class="nav__main">
    <div class="nav__main__logo">
      <a href="https://voxel51.com/">
        <img
          src="https://voxel51.com/images/logo/voxel51-logo-horz-color-600dpi.png"
        />
      </a>
    </div>

    <div class="nav__spacer desktop_only"></div>

    <div id="nav__main__mobilebutton--on">
      <a href="javascript:void(0);" onclick="navMobileButton()">
        <i class="fa-solid fa-bars"></i>
      </a>
    </div>

    <div id="nav__main__mobilebutton--off">
      <a href="javascript:void(0);" onclick="navMobileButton()">
        <i class="fa-solid fa-times"></i>
      </a>
    </div>

    <div id="nav__main__items">
      <div class="nav__item nav__dropdown">
        <div class="nav__dropdown__trigger">Products</div>
        <div class="nav__item nav__dropdown__menu has-arrows">
          <div class="arrow-up--light-primary arrow-left20"></div>
          <ul>
            <li><a href="https://voxel51.com/fiftyone/">Open Source</a></li>
            <li><a href="https://voxel51.com/fiftyone-teams/">FiftyOne Teams</a></li>
            <li><a href="https://voxel51.com/computer-vision-use-cases/">Use Cases</a></li>
            <li><a href="https://voxel51.com/success-stories/">Success Stories</a></li>
          </ul>
        </div>
      </div>

      <div class="nav__item nav__dropdown">
        <div class="nav__dropdown__trigger">Learn</div>
        <div class="nav__item nav__dropdown__menu has-arrows">
          <div class="arrow-up--light-primary arrow-left20"></div>
          <ul>
            <li><a href="https://community.voxel51.com">Community Discord</a></li>
            <li><a href="https://voxel51.com/blog/">Blog</a></li>
            <li><a href="https://voxel51.com/computer-vision-events/">Events</a></li>
          </ul>
        </div>
      </div>

      <div class="nav__item">
        <a href="https://docs.voxel51.com/">Docs</a>
      </div>

      <div class="nav__item nav__dropdown">
        <div class="nav__dropdown__trigger">Company</div>
        <div class="nav__item nav__dropdown__menu has-arrows">
          <div class="arrow-up--light-primary arrow-left20"></div>
          <ul>
            <li><a href="https://voxel51.com/ourstory/">About Us</a></li>
            <li><a href="https://voxel51.com/jobs/">Careers</a></li>
            <li><a href="https://voxel51.com/talk-to-sales/">Talk to Sales</a></li>
          </ul>
        </div>
      </div>

      <div class="nav__item mobile_only">
        <a href="https://github.com/voxel51/fiftyone">GitHub</a>
      </div>

      <div class="nav__item desktop_only" id="octocat">
        <!-- https://buttons.github.io -->
        <a
          class="github-button"
          href="https://github.com/voxel51/fiftyone"
          data-color-scheme="no-preference: dark_high_contrast; light: dark_high_contrast; dark: dark_high_contrast;"
          data-size="large"
          data-show-count="true"
          aria-label="Star voxel51/fiftyone on GitHub"
          >Star</a
        >
      </div>

      <div class="nav__item full_nav_only">
        <a class="button-primary" href="https://voxel51.com/schedule-teams-workshop/" target="_blank"
          >Schedule a workshop</a
        >
      </div>
    </div>
  </nav>
</div>



<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

           <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../teams/index.html">FiftyOne Teams 🚀</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/index.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheets/index.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataset_zoo/index.html">Dataset Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_zoo/index.html">Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../brain.html">FiftyOne Brain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/index.html">Integrations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_plugins.html">Using plugins</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Developing plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="ts-api.html">TypeScript API reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/fiftyone.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecation.html">Deprecation Notices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>
 
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
          <li><a href="index.html">Plugins Overview</a> &gt;</li>
        
      <li>Developing Plugins</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Contents
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content style-external-links">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <div class="section" id="developing-plugins">
<span id="id1"></span><h1>Developing Plugins<a class="headerlink" href="#developing-plugins" title="Permalink to this headline">¶</a></h1>
<p>This page describes how to write your own FiftyOne plugins.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check out the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins">FiftyOne plugins</a>
repository for a growing collection of plugins that you can use as examples
when developing your own.</p>
</div>
<div class="section" id="design-overview">
<span id="plugins-design-overview"></span><h2>Design overview<a class="headerlink" href="#design-overview" title="Permalink to this headline">¶</a></h2>
<p>Plugins are composed of one or more panels, operators, and components.</p>
<p>Together these building blocks enable you to build full-featured interactive
data applications that tailor FiftyOne to your specific use case and workflow.
Whether you’re working with images, videos, or other data types, a plugin can
help you streamline your machine learning workflows and co-develop your data
and models.</p>
<img alt="../_images/plugin-design.png" class="align-center" src="../_images/plugin-design.png" />
<div class="section" id="plugin-types">
<span id="plugins-design-types"></span><h3>Plugin types<a class="headerlink" href="#plugin-types" title="Permalink to this headline">¶</a></h3>
<p>FiftyOne plugins can be written in Python or JavaScript (JS), or a combination
of both.</p>
<p>Python plugins are built using the <code class="code docutils literal notranslate"><span class="pre">fiftyone</span></code> package, pip packages, and your
own Python. They can consist of panels and operators.</p>
<p>JS plugins are built using the <code class="code docutils literal notranslate"><span class="pre">&#64;fiftyone</span></code> TypeScript packages, npm packages,
and your own TypeScript. They can consist of panels, operators, and custom
components.</p>
</div>
<div class="section" id="panels">
<span id="plugins-design-panels"></span><h3>Panels<a class="headerlink" href="#panels" title="Permalink to this headline">¶</a></h3>
<p>Panels are miniature full-featured data applications that you can open in
<a class="reference internal" href="../user_guide/app.html#app-spaces"><span class="std std-ref">App spaces</span></a> and interactively manipulate to explore your
dataset and update/respond to updates from other spaces that are currently open
in the App.</p>
<p>FiftyOne natively includes the following Panels:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../user_guide/app.html#app-samples-panel"><span class="std std-ref">Samples panel</span></a>: the media grid that loads by
default when you launch the App</p></li>
<li><p><a class="reference internal" href="../user_guide/app.html#app-histograms-panel"><span class="std std-ref">Histograms panel</span></a>: a dashboard of histograms
for the fields of your dataset</p></li>
<li><p><a class="reference internal" href="../user_guide/app.html#app-embeddings-panel"><span class="std std-ref">Embeddings panel</span></a>: a canvas for working with
<a class="reference internal" href="../brain.html#brain-embeddings-visualization"><span class="std std-ref">embeddings visualizations</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/app.html#app-map-panel"><span class="std std-ref">Map panel</span></a>: visualizes the geolocation data of
datasets that have a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.GeoLocation" title="fiftyone.core.labels.GeoLocation"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoLocation</span></code></a> field</p></li>
</ul>
<img alt="../_images/app-map-panel.gif" class="align-center" src="../_images/app-map-panel.gif" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Jump to <a class="reference internal" href="#developing-panels"><span class="std std-ref">this section</span></a> for more information about
developing panels.</p>
</div>
</div>
<div class="section" id="operators">
<span id="plugins-design-operators"></span><h3>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h3>
<p>Operators are user-facing operations that allow you to interact with the data
in your dataset. They can range from simple actions like checking a checkbox to
more complex workflows such as requesting annotation of samples from a
configurable backend. Operators can even be composed of other operators or be
used to add functionality to custom panels.</p>
<p>FiftyOne comes with a number of builtin
<code class="xref py py-mod docutils literal notranslate"><span class="pre">Python</span></code> and
<a class="reference external" href="https://github.com/voxel51/fiftyone/blob/develop/app/packages/operators/src/built-in-operators.ts">JavaScript</a>
operators for common tasks that are intended for either user-facing or internal
plugin use.</p>
<img alt="../_images/operator-browser.gif" class="align-center" src="../_images/operator-browser.gif" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Jump to <a class="reference internal" href="#developing-operators"><span class="std std-ref">this section</span></a> for more information
about developing operators.</p>
</div>
</div>
<div class="section" id="components">
<span id="plugins-design-components"></span><h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>Components are responsible for rendering and event handling in plugins. They
provide the necessary functionality to display and interact with your plugin in
the FiftyOne App. Components also implement form inputs and output rendering
for operators, making it possible to customize the way an operator is rendered
in the FiftyOne App.</p>
<p>For example, FiftyOne comes with a wide variety of
<a class="reference internal" href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtin</span> <span class="pre">types</span></code></a> that you can leverage to build
complex input and output forms for your operators.</p>
<img alt="../_images/file-explorer.gif" class="align-center" src="../_images/file-explorer.gif" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Jump to <a class="reference internal" href="#developing-js-plugins"><span class="std std-ref">this section</span></a> for more information
about developing components.</p>
</div>
</div>
</div>
<div class="section" id="development-setup">
<span id="developing-plugins-setup"></span><h2>Development setup<a class="headerlink" href="#development-setup" title="Permalink to this headline">¶</a></h2>
<p>In order to develop Python plugins, you can use either a release or source
install of FiftyOne:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>fiftyone
</pre></div>
</div>
<p>In order to develop JS plugins, you will need a
<a class="reference external" href="https://github.com/voxel51/fiftyone#installing-from-source">source install</a>
of FiftyOne and a vite config that links modules to your <code class="code docutils literal notranslate"><span class="pre">fiftyone/app</span></code>
directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For JS plugins we recommend forking the
<a class="reference external" href="https://github.com/voxel51/hello-world-plugin-js">FiftyOne Hello World JS Example</a>
repository and following the conventions there to build your JS plugin.</p>
</div>
</div>
<div class="section" id="anatomy-of-a-plugin">
<span id="plugin-anatomy"></span><h2>Anatomy of a plugin<a class="headerlink" href="#anatomy-of-a-plugin" title="Permalink to this headline">¶</a></h2>
<p>FiftyOne recognizes plugins by searching for <code class="code docutils literal notranslate"><span class="pre">fiftyone.yml</span></code> or <code class="code docutils literal notranslate"><span class="pre">fiftyone.yaml</span></code>
files within your <a class="reference internal" href="using_plugins.html#plugins-directory"><span class="std std-ref">plugins directory</span></a>.</p>
<p>Below is an example of a plugin directory with a typical Python plugin and JS
plugin:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/path/to/your/plugins/dir/
    my-js-plugin/
        fiftyone.yml
        package.json
        dist/
            index.umd.js
    my-py-plugin/
        fiftyone.yml
        __init__.py
        requirements.txt
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the source code for a plugin already exists on disk, you can make it
into a plugin using
<a class="reference internal" href="../api/fiftyone.plugins.core.html#fiftyone.plugins.core.create_plugin" title="fiftyone.plugins.core.create_plugin"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_plugin()</span></code></a> or the
<a class="reference internal" href="../cli/index.html#cli-fiftyone-plugins-create"><span class="std std-ref">fiftyone plugins create</span></a> CLI command.</p>
<p>This will copy the source code to the plugins directory and create a
<code class="code docutils literal notranslate"><span class="pre">fiftyone.yml</span></code> file for you if one does not already exist. Alternatively,
you can manually copy the code into your plugins directory.</p>
<p>If your FiftyOne App is already running, you may need to restart the server
and refresh your browser to see new plugins.</p>
</div>
<div class="section" id="fiftyone-yml">
<span id="plugin-fiftyone-yml"></span><h3>fiftyone.yml<a class="headerlink" href="#fiftyone-yml" title="Permalink to this headline">¶</a></h3>
<p>All plugins must contain a <code class="code docutils literal notranslate"><span class="pre">fiftyone.yml</span></code> or <code class="code docutils literal notranslate"><span class="pre">fiftyone.yaml</span></code> file, which is
used to define the plugin’s metadata, declare any operators and panels that it
exposes, and declare any <a class="reference internal" href="using_plugins.html#plugins-secrets"><span class="std std-ref">secrets</span></a> that it may require.
The following fields are available:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required?</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><strong>yes</strong></p></td>
<td><p>The name of the plugin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td></td>
<td><p>Declare that the directory defines a <code class="code docutils literal notranslate"><span class="pre">plugin</span></code>. This can be omitted for
backwards compatibility, but it is recommended to specify this</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">author</span></code></p></td>
<td></td>
<td><p>The author of the plugin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td></td>
<td><p>The version of the plugin</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td></td>
<td><p>The remote source (eg GitHub repository) where the directory containing
this file is hosted</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">license</span></code></p></td>
<td></td>
<td><p>The license under which the plugin is distributed</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td></td>
<td><p>A brief description of the plugin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">fiftyone.version</span></code></p></td>
<td></td>
<td><p>A semver version specifier (or <code class="code docutils literal notranslate"><span class="pre">*</span></code>) describing the required
FiftyOne version for the plugin to work properly</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">operators</span></code></p></td>
<td></td>
<td><p>A list of operator names registered by the plugin, if any</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">panels</span></code></p></td>
<td></td>
<td><p>A list of panel names registred by the plugin, if any</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">secrets</span></code></p></td>
<td></td>
<td><p>A list of secret keys that may be used by the plugin, if any</p></td>
</tr>
</tbody>
</table>
<p>For example, the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/blob/main/plugins/annotation/fiftyone.yml">&#64;voxel51/annotation</a>
plugin’s <code class="code docutils literal notranslate"><span class="pre">fiftyone.yml</span></code> looks like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@voxel51/annotation&quot;</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plugin</span>
<span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Voxel51</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/annotation</span>
<span class="nt">license</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Apache 2.0</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Utilities for integrating FiftyOne with annotation tools</span>
<span class="nt">fiftyone</span><span class="p">:</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;=0.22&quot;</span>
<span class="nt">operators</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">request_annotations</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load_annotations</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_annotation_info</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load_annotation_view</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rename_annotation_run</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delete_annotation_run</span>
<span class="nt">secrets</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_URL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_USERNAME</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_PASSWORD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_EMAIL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELBOX_URL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELBOX_API_KEY</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELSTUDIO_URL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELSTUDIO_API_KEY</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although it is not strictly required, we highly recommend using the
<code class="code docutils literal notranslate"><span class="pre">&#64;user-or-org-name/plugin-name</span></code> naming convention when writing plugins.</p>
</div>
</div>
<div class="section" id="python-plugins">
<h3>Python plugins<a class="headerlink" href="#python-plugins" title="Permalink to this headline">¶</a></h3>
<p>Python plugins should define the following files:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">__init__.py</span></code> <strong>(required)</strong>: entrypoint that defines the Python operators
and panels that the plugin defines</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">requirements.txt</span></code>: specifies the Python package requirements to run the
plugin</p></li>
</ul>
</div>
<div class="section" id="js-plugins">
<h3>JS plugins<a class="headerlink" href="#js-plugins" title="Permalink to this headline">¶</a></h3>
<p>JS plugins should define the following files:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">package.json</span></code>: a JSON file containing additional information about the
plugin, including the JS bundle file path</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dist/index.umd.js</span></code>: a JS bundle file for the plugin</p></li>
</ul>
</div>
</div>
<div class="section" id="publishing-plugins">
<span id="id2"></span><h2>Publishing plugins<a class="headerlink" href="#publishing-plugins" title="Permalink to this headline">¶</a></h2>
<p>You can publish your FiftyOne plugins either privately or publicly by simply
uploading the source directory or a ZIP of it to GitHub or another file hosting
service.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Want to share your plugin with the FiftyOne community? Make a pull request
into the <a class="reference external" href="https://github.com/voxel51/fiftyone-plugins">FiftyOne Plugins</a>
repository to add it to the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins#community-plugins">Community Plugins list</a>!</p>
</div>
<p>Any users with access to the plugin’s hosted location can easily
<a class="reference internal" href="using_plugins.html#plugins-download"><span class="std std-ref">download it</span></a> via the
<a class="reference internal" href="../cli/index.html#cli-fiftyone-plugins-download"><span class="std std-ref">fiftyone plugins download</span></a> CLI command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download plugin(s) from a GitHub repository</span>
fiftyone<span class="w"> </span>plugins<span class="w"> </span>download<span class="w"> </span>https://github.com/&lt;user&gt;/&lt;repo&gt;<span class="o">[</span>/tree/branch<span class="o">]</span>

<span class="c1"># Download plugin(s) by specifying the GitHub repository details</span>
fiftyone<span class="w"> </span>plugins<span class="w"> </span>download<span class="w"> </span>&lt;user&gt;/&lt;repo&gt;<span class="o">[</span>/&lt;ref&gt;<span class="o">]</span>

<span class="c1"># Download specific plugins from a GitHub repository</span>
fiftyone<span class="w"> </span>plugins<span class="w"> </span>download<span class="w"> </span><span class="se">\\</span>
<span class="w">    </span>https://github.com/&lt;user&gt;/&lt;repo&gt;<span class="o">[</span>/tree/branch<span class="o">]</span><span class="w"> </span><span class="se">\\</span>
<span class="w">    </span>--plugin-names<span class="w"> </span>&lt;name1&gt;<span class="w"> </span>&lt;name2&gt;<span class="w"> </span>&lt;name3&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GitHub repositories may contain multiple plugins. By default, all plugins
that are found within the first three directory levels are installed, but
you can select specific ones if desired as shown above.</p>
</div>
</div>
<div class="section" id="quick-examples">
<span id="plugins-quick-examples"></span><h2>Quick examples<a class="headerlink" href="#quick-examples" title="Permalink to this headline">¶</a></h2>
<p>This section contains a few quick examples of plugins before we dive into the
full details of the plugin system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The best way to learn how to write plugins is to use and inspect existing
ones. Check out the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins">FiftyOne plugins</a>
repository for a growing collection of plugins that you can use as examples
when developing your own.</p>
</div>
<div class="section" id="example-plugin">
<span id="id5"></span><h3>Example plugin<a class="headerlink" href="#example-plugin" title="Permalink to this headline">¶</a></h3>
<p>The
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/hello-world">Hello World plugin</a>
defines both a JS Panel and a Python operator:</p>
<p>Here’s the plugin in action! The <code class="code docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">world</span></code> panel is available under the <code class="code docutils literal notranslate"><span class="pre">+</span></code>
icon next to the Samples tab and the <code class="code docutils literal notranslate"><span class="pre">count_samples</span></code> operator is available in
the operator browser:</p>
<img alt="../_images/hello-world.gif" src="../_images/hello-world.gif" />
</div>
<div class="section" id="example-python-operator">
<span id="id6"></span><h3>Example Python operator<a class="headerlink" href="#example-python-operator" title="Permalink to this headline">¶</a></h3>
<p>Here’s a simple <a class="reference internal" href="#developing-operators"><span class="std std-ref">Python operator</span></a> that accepts a
string input and then displays it to the user in the operator’s output modal.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">SimpleInputExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;simple_input_example&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Simple input example&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Message&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Simple input example&quot;</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]}</span>

    <span class="k">def</span> <span class="nf">resolve_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Message&quot;</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Simple input example: Success!&quot;</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">SimpleInputExample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>In practice, operators would use the inputs to perform some operation on the
current dataset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that you must also include the operator’s name in the plugin’s
<a class="reference internal" href="#plugin-fiftyone-yml"><span class="std std-ref">fiftyone.yml</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">operators</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simple_input_example</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-python-panel">
<span id="id7"></span><h3>Example Python panel<a class="headerlink" href="#example-python-panel" title="Permalink to this headline">¶</a></h3>
<p>Here’s a simple <a class="reference internal" href="#developing-panels"><span class="std std-ref">Python panel</span></a> that renders a button
that shows a “Hello world!” notification when clicked:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.operators</span> <span class="k">as</span> <span class="nn">foo</span>
<span class="kn">import</span> <span class="nn">fiftyone.operators.types</span> <span class="k">as</span> <span class="nn">types</span>

<span class="k">class</span> <span class="nc">HelloWorldPanel</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hello_world_panel&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Hello World Panel&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">hello_message</span> <span class="o">=</span> <span class="s2">&quot;Hello world!&quot;</span>

    <span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">hello_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
            <span class="s2">&quot;hello_btn&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Say Hello&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;emoji_people&quot;</span><span class="p">,</span>
            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">say_hello</span><span class="p">,</span>
            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">panel_view</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
            <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">panel_view</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">HelloWorldPanel</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that you must also include the panel’s name in the plugin’s
<a class="reference internal" href="#plugin-fiftyone-yml"><span class="std std-ref">fiftyone.yml</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">panels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello_world_panel</span>
</pre></div>
</div>
</div>
<img alt="../_images/hello-world-panel-inline.gif" class="align-center" src="../_images/hello-world-panel-inline.gif" />
</div>
<div class="section" id="example-js-operator">
<span id="id8"></span><h3>Example JS operator<a class="headerlink" href="#example-js-operator" title="Permalink to this headline">¶</a></h3>
<p>Here’s how to define a <a class="reference internal" href="#developing-js-plugins"><span class="std std-ref">JS operator</span></a> that sets the
currently selected samples in the App based on a list of sample IDs provided
via a <code class="code docutils literal notranslate"><span class="pre">samples</span></code> parameter.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Operator</span><span class="p">,</span><span class="w"> </span><span class="nx">OperatorConfig</span><span class="p">,</span><span class="w"> </span><span class="nx">types</span><span class="p">,</span><span class="w"> </span><span class="nx">registerOperator</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/operators&quot;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">PLUGIN_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;@my/plugin&quot;</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">SetSelectedSamples</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Operator</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">get</span><span class="w"> </span><span class="nx">config</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">OperatorConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">OperatorConfig</span><span class="p">({</span>
<span class="w">            </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;set_selected_samples&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Set selected samples&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">unlisted</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">useHooks</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">setSelected</span><span class="o">:</span><span class="w"> </span><span class="kt">fos.useSetSelected</span><span class="p">(),</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">execute</span><span class="p">({</span><span class="w"> </span><span class="nx">hooks</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ExecutionContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">setSelected</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">samples</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">registerOperator</span><span class="p">(</span><span class="nx">SetSelectedSamples</span><span class="p">,</span><span class="w"> </span><span class="nx">PLUGIN_NAME</span><span class="p">);</span>
</pre></div></td></tr></table></div>
</div>
<p>Unlike Python operators, JS operators can use React hooks and the <code class="code docutils literal notranslate"><span class="pre">&#64;fiftyone/*</span></code>
packages by defining a <code class="code docutils literal notranslate"><span class="pre">useHook()</span></code> method. Any values return in this method
will be available to the operator’s <code class="code docutils literal notranslate"><span class="pre">execute()</span></code> method via <code class="code docutils literal notranslate"><span class="pre">ctx.hooks</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Marking the operator as <code class="code docutils literal notranslate"><span class="pre">unlisted</span></code> omits it from the
<a class="reference internal" href="using_plugins.html#using-operators"><span class="std std-ref">operator browser</span></a>, which is useful when the
operator is intended only for internal use by other plugin components.</p>
</div>
</div>
</div>
<div class="section" id="developing-operators">
<span id="id9"></span><h2>Developing operators<a class="headerlink" href="#developing-operators" title="Permalink to this headline">¶</a></h2>
<p>Operators allow you to define custom operations that accept parameters via
input properties, execute some actions based on them, and optionally return
outputs. They can be <a class="reference internal" href="using_plugins.html#using-operators"><span class="std std-ref">executed</span></a> by users in the App or
triggered internally by other operators.</p>
<p>Operators can be defined in either Python or JS, and FiftyOne comes with a
number of builtin <code class="xref py py-mod docutils literal notranslate"><span class="pre">Python</span></code> and
<a class="reference external" href="https://github.com/voxel51/fiftyone/blob/develop/app/packages/operators/src/built-in-operators.ts">JS</a>
operators for common tasks.</p>
<p>The <a class="reference internal" href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fiftyone.operators.types</span></code></a> module and
<a class="reference internal" href="api/plugins.fiftyone.operators.html#module-fiftyone-operators" title="&#64;fiftyone/operators"><code class="xref js js-mod docutils literal notranslate"><span class="pre">&#64;fiftyone/operators</span></code></a> package define a rich
builtin type system that operator developers can use to define the input and
output properties of their operators without the need to build custom user
interfaces from scratch. These types handle all aspects of input collection,
validation, and component rendering for you.</p>
<p>Operators can be composed for coordination between Python and the FiftyOne App,
such as triggering a reload of samples/view to update the app with the changes
made by the operator. Operators can also be scheduled to run by an orchestrator
or triggered by other operators.</p>
<div class="section" id="operator-interface">
<span id="id10"></span><h3>Operator interface<a class="headerlink" href="#operator-interface" title="Permalink to this headline">¶</a></h3>
<p>The code block below describes the Python interface for defining operators.
We’ll dive into each component of the interface in more detail in the
subsequent sections.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The JS interface for defining operators is analogous. See this
<a class="reference internal" href="#example-js-operator"><span class="std std-ref">example JS operator</span></a> for details.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.operators</span> <span class="k">as</span> <span class="nn">foo</span>
<span class="kn">import</span> <span class="nn">fiftyone.operators.types</span> <span class="k">as</span> <span class="nn">types</span>

<span class="k">class</span> <span class="nc">ExampleOperator</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
            <span class="c1"># The operator&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

            <span class="c1"># The display name of the operator</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

            <span class="c1"># A description for the operator</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An example description&quot;</span>

            <span class="c1"># Whether to re-execute resolve_input() after each user input</span>
            <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

            <span class="c1"># Whether the operator&#39;s execute() method returns a generator</span>
            <span class="c1"># that should be iterated over until exhausted</span>
            <span class="n">execute_as_generator</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

            <span class="c1"># Whether to hide this operator from the App&#39;s operator browser</span>
            <span class="c1"># Set this to True if the operator is only for internal use</span>
            <span class="n">unlisted</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

            <span class="c1"># Whether the operator should be executed every time a new App</span>
            <span class="c1"># session starts</span>
            <span class="n">on_startup</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

            <span class="c1"># Whether the operator should be executed every time a new</span>
            <span class="c1"># dataset is opened in the App</span>
            <span class="n">on_dataset_open</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

            <span class="c1"># Custom icons to use</span>
            <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
            <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
            <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-light.svg&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
            <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-dark.svg&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>

            <span class="c1"># Whether the operator supports immediate and/or delegated execution</span>
            <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default True</span>
            <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default False</span>
            <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
            <span class="n">resolve_execution_options_on_change</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">resolve_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;You can optionally implement this method to configure a button</span>
<span class="sd">        or icon in the App that triggers this operator.</span>

<span class="sd">        By default the operator only appears in the operator browser</span>
<span class="sd">        (unless it is unlisted).</span>

<span class="sd">        Returns:</span>
<span class="sd">            a `types.Placement`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Placement</span><span class="p">(</span>
            <span class="c1"># Make operator appear in the actions row above the sample grid</span>
            <span class="n">types</span><span class="o">.</span><span class="n">Places</span><span class="o">.</span><span class="n">SAMPLES_GRID_SECONDARY_ACTIONS</span><span class="p">,</span>

            <span class="c1"># Use a button as the operator&#39;s placement</span>
            <span class="n">types</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                <span class="c1"># A label for placement button visible on hover</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Open Histograms Panel&quot;</span><span class="p">,</span>

                <span class="c1"># An icon for the button</span>
                <span class="c1"># The default is a button with the `label` displayed</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>

                <span class="c1"># If False, don&#39;t show the operator&#39;s input prompt when we</span>
                <span class="c1"># do not require user input</span>
                <span class="n">prompt</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span>  <span class="c1"># False</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to collect user inputs as parameters</span>
<span class="sd">        that are stored in `ctx.params`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a `types.Property` defining the form&#39;s components</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

        <span class="c1"># Use the builtin `types` and the current `ctx.params` to define</span>
        <span class="c1"># the necessary user input data</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

        <span class="c1"># When `dynamic=True`, you&#39;ll often use the current `ctx` to</span>
        <span class="c1"># conditionally render different components</span>
        <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="c1"># do something</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># do something else</span>

        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">resolve_delegation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method if you want to programmatically *force*</span>
<span class="sd">        this operation to be delegated or executed immediately.</span>

<span class="sd">        Returns:</span>
<span class="sd">            whether the operation should be delegated (True), run</span>
<span class="sd">            immediately (False), or None to defer to</span>
<span class="sd">            `resolve_execution_options()` to specify the available options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>  <span class="c1"># delegate for larger views</span>

    <span class="k">def</span> <span class="nf">resolve_execution_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method if you want to dynamically configure the</span>
<span class="sd">        execution options available to this operator based on the current</span>
<span class="sd">        `ctx`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            an `ExecutionOptions` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">should_delegate</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>  <span class="c1"># delegate for larger views</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">ExecutionOptions</span><span class="p">(</span>
            <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="n">should_delegate</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Executes the actual operation based on the hydrated `ctx`.</span>
<span class="sd">        All operators must implement this method.</span>

<span class="sd">        This method can optionally be implemented as `async`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            an optional dict of results values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Use ctx.params, ctx.dataset, ctx.view, etc to perform the</span>
        <span class="c1"># necessary computation</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>

        <span class="c1"># Use ctx.ops to trigger builtin operations</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_selected_samples</span><span class="p">()</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

        <span class="c1"># Use ctx.trigger to call other operators as necessary</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;operator_uri&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>

        <span class="c1"># If `execute_as_generator=True`, this method may yield multiple</span>
        <span class="c1"># messages</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sample</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">current_view</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="c1"># do some computation</span>
            <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_dataset</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">resolve_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method if your operator renders an output form</span>
<span class="sd">        to the user.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a `types.Property` defining the components of the output form</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

        <span class="c1"># Use the builtin `types` and the current `ctx.params` and</span>
        <span class="c1"># `ctx.results` as necessary to define the necessary output form</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">define_property</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Always implement this method and register() each operator that your</span>
<span class="sd">    plugin defines.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ExampleOperator</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that you must also include the operator’s name in the plugin’s
<a class="reference internal" href="#plugin-fiftyone-yml"><span class="std std-ref">fiftyone.yml</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">operators</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example_operator</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="operator-config">
<span id="id11"></span><h3>Operator config<a class="headerlink" href="#operator-config" title="Permalink to this headline">¶</a></h3>
<p>Every operator must define a
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.config" title="fiftyone.operators.operator.Operator.config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">config</span></code></a> property that
defines its name, display name, and other optional metadata about its
execution:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
        <span class="c1"># The operator&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

        <span class="c1"># The display name of the operator</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

        <span class="c1"># A description for the operator</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An example description&quot;</span>

        <span class="c1"># Whether to re-execute resolve_input() after each user input</span>
        <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

        <span class="c1"># Whether the operator&#39;s execute() method returns a generator</span>
        <span class="c1"># that should be iterated over until exhausted</span>
        <span class="n">execute_as_generator</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

        <span class="c1"># Whether to hide this operator from the App&#39;s operator browser</span>
        <span class="c1"># Set this to True if the operator is only for internal use</span>
        <span class="n">unlisted</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

        <span class="c1"># Whether the operator should be executed every time a new App</span>
        <span class="c1"># session starts</span>
        <span class="n">on_startup</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

        <span class="c1"># Whether the operator should be executed every time a new dataset</span>
        <span class="c1"># is opened in the App</span>
        <span class="n">on_dataset_open</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

        <span class="c1"># Custom icons to use</span>
        <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
        <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
        <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-light.svg&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
        <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-dark.svg&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>

        <span class="c1"># Whether the operator supports immediate and/or delegated execution</span>
        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default True</span>
        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default False</span>
        <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
        <span class="n">resolve_execution_options_on_change</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="execution-context">
<span id="operator-execution-context"></span><h3>Execution context<a class="headerlink" href="#execution-context" title="Permalink to this headline">¶</a></h3>
<p>An <a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext" title="fiftyone.operators.executor.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> is
passed to each of the operator’s methods at runtime. This <code class="code docutils literal notranslate"><span class="pre">ctx</span></code> contains static
information about the current state of the App (dataset, view, panel,
selection, etc) as well as dynamic information about the current parameters and
results.</p>
<p>An <a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext" title="fiftyone.operators.executor.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>
contains the following properties:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.params</span></code>: a dict containing the operator’s current input parameter
values</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.dataset_name</span></code>:  the name of the current dataset</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.dataset</span></code> - the current <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instance</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.view</span></code> - the current <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a> instance</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.spaces</span></code> - the current <a class="reference internal" href="../user_guide/app.html#app-spaces"><span class="std std-ref">Spaces layout</span></a> in the App</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.current_sample</span></code> - the ID of the active sample in the App modal, if any</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.selected</span></code> - the list of currently selected samples in the App, if any</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.selected_labels</span></code> - the list of currently selected labels in the App,
if any</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.extended_selection</span></code> - the extended selection of the view, if any</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.group_slice</span></code> - the active group slice in the App, if any</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.user_id</span></code> - the ID of the user that invoked the operator, if known</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.user</span></code> - an object of information about the user that invoked the
operator, if known, including the user’s <code class="code docutils literal notranslate"><span class="pre">id</span></code>, <code class="code docutils literal notranslate"><span class="pre">name</span></code>, <code class="code docutils literal notranslate"><span class="pre">email</span></code>, <code class="code docutils literal notranslate"><span class="pre">role</span></code>, and
<code class="code docutils literal notranslate"><span class="pre">dataset_permission</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.user_request_token</span></code> - the request token authenticating the user
executing the operation, if known</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.panel_id</span></code> - the ID of the panel that invoked the operator, if any</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.panel</span></code> - a <a class="reference internal" href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.PanelRef" title="fiftyone.operators.panel.PanelRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">PanelRef</span></code></a>
instance that you can use to read and write the <a class="reference internal" href="#panel-state"><span class="std std-ref">state</span></a>
and <a class="reference internal" href="#panel-data"><span class="std std-ref">data</span></a> of the current panel, if the operator was
invoked from a panel</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.delegated</span></code> - whether the operation was delegated</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.requesting_delegated_execution</span></code> - whether delegated execution was
requested for the operation</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.delegation_target</span></code> - the orchestrator to which the operation should be
delegated, if applicable</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.ops</span></code> - an
<a class="reference internal" href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operations</span></code></a> instance
that you can use to trigger builtin operations on the current context</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.trigger</span></code> - a method that you can use to trigger arbitrary operations
on the current context</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.secrets</span></code> - a dict of <a class="reference internal" href="#operator-secrets"><span class="std std-ref">secrets</span></a> for the plugin,
if any</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.results</span></code> - a dict containing the outputs of the <code class="code docutils literal notranslate"><span class="pre">execute()</span></code> method, if
it has been called</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ctx.hooks</span></code> <strong>(JS only)</strong> - the return value of the operator’s <code class="code docutils literal notranslate"><span class="pre">useHooks()</span></code>
method</p></li>
</ul>
</div>
<div class="section" id="operator-inputs">
<span id="id12"></span><h3>Operator inputs<a class="headerlink" href="#operator-inputs" title="Permalink to this headline">¶</a></h3>
<p>Operators can optionally implement
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_input()</span></code></a>
to define user input forms that are presented to the user as a modal in the App
when the operator is invoked.</p>
<p>The basic objective of
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_input()</span></code></a>
is to populate the <code class="code docutils literal notranslate"><span class="pre">ctx.params</span></code> dict with user-provided parameter values, which
are retrieved from the various subproperties of the
<a class="reference internal" href="../api/fiftyone.operators.types.html#fiftyone.operators.types.Property" title="fiftyone.operators.types.Property"><code class="xref py py-class docutils literal notranslate"><span class="pre">Property</span></code></a> returned by the method
(<code class="code docutils literal notranslate"><span class="pre">inputs</span></code> in the examples below).</p>
<p>The <a class="reference internal" href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fiftyone.operators.types</span></code></a> module defines a rich builtin type system
that you can use to define the necessary input properties. These types handle
all aspects of input collection, validation, and component rendering for you!</p>
<p>For example, here’s a simple example of collecting a single string input from
the user:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
    <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Message&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Static example&quot;</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">the_message</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span>
</pre></div></td></tr></table></div>
</div>
<p>If the <a class="reference internal" href="#operator-config"><span class="std std-ref">operator’s config</span></a> declares <code class="code docutils literal notranslate"><span class="pre">dynamic=True</span></code>, then
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_input()</span></code></a>
will be called after each user input, which allows you to construct dynamic
forms whose components may contextually change based on the already provided
values and any other aspects of the
<a class="reference internal" href="#operator-execution-context"><span class="std std-ref">execution context</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.brain</span> <span class="k">as</span> <span class="nn">fob</span>

<span class="k">def</span> <span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
    <span class="n">brain_keys</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">list_brain_runs</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">brain_keys</span><span class="p">:</span>
        <span class="n">warning</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Warning</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;This dataset has no brain runs&quot;</span><span class="p">)</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="n">warning</span><span class="p">)</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">invalid</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># so form&#39;s `Execute` button is disabled</span>
        <span class="k">return</span>

    <span class="n">choices</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">DropdownView</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">brain_key</span> <span class="ow">in</span> <span class="n">brain_keys</span><span class="p">:</span>
        <span class="n">choices</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span><span class="n">brain_key</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">brain_key</span><span class="p">)</span>

    <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span>
        <span class="s2">&quot;brain_key&quot;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Brain key&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Choose a brain key to use&quot;</span><span class="p">,</span>
        <span class="n">view</span><span class="o">=</span><span class="n">choices</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">brain_key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;brain_key&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">brain_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># single `brain_key`</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_brain_info</span><span class="p">(</span><span class="n">brain_key</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">fob</span><span class="o">.</span><span class="n">SimilarityConfig</span><span class="p">):</span>
        <span class="c1"># We found a similarity config; render some inputs specific to that</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">bool</span><span class="p">(</span>
            <span class="s2">&quot;upgrade&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="s2">&quot;Compute visualization&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generate an embeddings visualization for this index?&quot;</span><span class="p">,</span>
            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">CheckboxView</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Dynamic example&quot;</span><span class="p">))</span>
</pre></div></td></tr></table></div>
</div>
<p>Remember that properties automatically handle validation for you. So if you
configure a property as <code class="code docutils literal notranslate"><span class="pre">required=True</span></code> but the user has not provided a value,
the property will automatically be marked as <code class="code docutils literal notranslate"><span class="pre">invalid=True</span></code>. The operator’s
<code class="code docutils literal notranslate"><span class="pre">Execute</span></code> button will be enabled if and only if all input properties are valid
(recursively searching nested objects).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As the example above shows, you can manually set a property to invalid by
setting its <code class="code docutils literal notranslate"><span class="pre">invalid</span></code> property.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Avoid expensive computations in
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_input()</span></code></a>
or else the form may take too long to render, especially for dynamic inputs
where the method is called after every user input.</p>
</div>
</div>
<div class="section" id="delegated-execution">
<span id="operator-delegated-execution"></span><h3>Delegated execution<a class="headerlink" href="#delegated-execution" title="Permalink to this headline">¶</a></h3>
<p>By default, operations are <a class="reference internal" href="#operator-execution"><span class="std std-ref">executed</span></a> immediately
after their inputs are provided in the App or they are triggered
programmatically.</p>
<p>However, many interesting operations like model inference, embeddings
computation, evaluation, and exports are computationally intensive and/or not
suitable for immediate execution.</p>
<p>In such cases, <a class="reference internal" href="using_plugins.html#delegated-operations"><span class="std std-ref">delegated operations</span></a> come to the
rescue by allowing users to schedule potentially long-running tasks that are
executed in the background while you continue to use the App.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../teams/teams_plugins.html#teams-delegated-operations"><span class="std std-ref">FiftyOne Teams</span></a> deployments come out of
the box with a connected compute cluster for executing delegated operations
at scale.</p>
<p>In FiftyOne Open Source, you can use delegated operations at small scale
by <a class="reference internal" href="using_plugins.html#delegated-orchestrator-open-source"><span class="std std-ref">running them locally</span></a>.</p>
</div>
<p>There are a variety of options available for configuring whether a given
operation should be delegated or executed immediately.</p>
<div class="section" id="execution-options">
<span id="operator-execution-options"></span><h4>Execution options<a class="headerlink" href="#execution-options" title="Permalink to this headline">¶</a></h4>
<p>You can provide the optional properties described below in the
<a class="reference internal" href="#operator-config"><span class="std std-ref">operator’s config</span></a> to specify the available execution
modes for the operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
        <span class="c1"># Other parameters...</span>

        <span class="c1"># Whether to allow immediate execution</span>
        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default True</span>

        <span class="c1"># Whether to allow delegated execution</span>
        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default False</span>

        <span class="c1"># Whether the default execution mode should be delegated, if both</span>
        <span class="c1"># options are available</span>
        <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>

        <span class="c1"># Whether to resolve execution options dynamically when the</span>
        <span class="c1"># operator&#39;s inputs change. By default, this behavior will match</span>
        <span class="c1"># the operator&#39;s ``dynamic`` setting</span>
        <span class="n">resolve_execution_options_on_change</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="o">/</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># default None</span>
    <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>When the operator’s input form is rendered in the App, the <code class="code docutils literal notranslate"><span class="pre">Execute|Schedule</span></code>
button at the bottom of the modal will contextually show whether the operation
will be executed immediately, scheduled for delegated execution, or allow the
user to choose between the supported options if there are multiple:</p>
<img alt="../_images/operator-execute-button.png" class="align-center" src="../_images/operator-execute-button.png" />
</div>
<div class="section" id="dynamic-execution-options">
<span id="id13"></span><h4>Dynamic execution options<a class="headerlink" href="#dynamic-execution-options" title="Permalink to this headline">¶</a></h4>
<p>Operators may also implement
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_execution_options" title="fiftyone.operators.operator.Operator.resolve_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_execution_options()</span></code></a>
to dynamically configure the available execution options based on the current
execution context:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Option 1: recommend delegation for larger views</span>
<span class="k">def</span> <span class="nf">resolve_execution_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">should_delegate</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>
    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">ExecutionOptions</span><span class="p">(</span>
        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="n">should_delegate</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># Option 2: force delegation for larger views</span>
<span class="k">def</span> <span class="nf">resolve_execution_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">delegate</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>
    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">ExecutionOptions</span><span class="p">(</span>
        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="ow">not</span> <span class="n">delegate</span><span class="p">,</span>
        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="n">delegate</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>If implemented, this method will override any static execution parameters
included in the <a class="reference internal" href="#operator-config"><span class="std std-ref">operator’s config</span></a> as described in the
previous section.</p>
</div>
<div class="section" id="forced-delegation">
<span id="operator-forced-delegation"></span><h4>Forced delegation<a class="headerlink" href="#forced-delegation" title="Permalink to this headline">¶</a></h4>
<p>Operators can implement
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_delegation" title="fiftyone.operators.operator.Operator.resolve_delegation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_delegation()</span></code></a>
to force a particular operation to be delegated (by returning <code class="code docutils literal notranslate"><span class="pre">True</span></code>) or
executed immediately (by returning <code class="code docutils literal notranslate"><span class="pre">False</span></code>) based on the current execution
context.</p>
<p>For example, you could decide whether to delegate execution based on the size
of the current view:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">resolve_delegation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Force delegation for large views and immediate execution for small views</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>
</pre></div></td></tr></table></div>
</div>
<p>If <a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_delegation" title="fiftyone.operators.operator.Operator.resolve_delegation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_delegation()</span></code></a>
is not implemented or returns <code class="code docutils literal notranslate"><span class="pre">None</span></code>, then the choice of execution mode is
deferred to the prior mechanisms described above.</p>
</div>
<div class="section" id="reporting-progress">
<span id="operator-reporting-progress"></span><h4>Reporting progress<a class="headerlink" href="#reporting-progress" title="Permalink to this headline">¶</a></h4>
<p>Delegated operations can report their execution progress by calling
<a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext.set_progress" title="fiftyone.operators.executor.ExecutionContext.set_progress"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_progress()</span></code></a>
on their execution context from within
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.core.storage</span> <span class="k">as</span> <span class="nn">fos</span>
<span class="kn">import</span> <span class="nn">fiftyone.core.utils</span> <span class="k">as</span> <span class="nn">fou</span>

<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">images_dir</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;images_dir&quot;</span><span class="p">]</span>

    <span class="n">filepaths</span> <span class="o">=</span> <span class="n">fos</span><span class="o">.</span><span class="n">list_files</span><span class="p">(</span><span class="n">images_dir</span><span class="p">,</span> <span class="n">abs_paths</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">num_total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">filepaths</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">fou</span><span class="o">.</span><span class="n">iter_batches</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span><span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">]</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>

        <span class="n">num_added</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">num_added</span> <span class="o">/</span> <span class="n">num_total</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../teams/index.html#fiftyone-teams"><span class="std std-ref">FiftyOne Teams</span></a> users can view the current progress
of their delegated operations from the
<a class="reference internal" href="../teams/teams_plugins.html#teams-managing-delegated-operations"><span class="std std-ref">Runs page</span></a> of the Teams App!</p>
</div>
<p>For your convenience, all builtin methods of the FiftyOne SDK that support
rendering progress bars provide an optional <code class="code docutils literal notranslate"><span class="pre">progress</span></code> method that you can use
trigger calls to
<a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext.set_progress" title="fiftyone.operators.executor.ExecutionContext.set_progress"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_progress()</span></code></a>
using the pattern show below:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">images_dir</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;images_dir&quot;</span><span class="p">]</span>

    <span class="c1"># Custom logic that controls how progress is reported</span>
    <span class="k">def</span> <span class="nf">set_progress</span><span class="p">(</span><span class="n">pb</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">pb</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Operation complete&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">pb</span><span class="o">.</span><span class="n">progress</span><span class="p">)</span>

    <span class="c1"># Option 1: report progress every five seconds</span>
    <span class="n">progress</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">report_progress</span><span class="p">(</span><span class="n">set_progress</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>

    <span class="c1"># Option 2: report progress at 10 equally-spaced increments</span>
    <span class="c1"># progress = fo.report_progress(set_progress, n=10)</span>

    <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">add_images_dir</span><span class="p">(</span><span class="n">images_dir</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>You can also use the builtin
<a class="reference internal" href="../api/fiftyone.operators.html#fiftyone.operators.ProgressHandler" title="fiftyone.operators.ProgressHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProgressHandler</span></code></a> class to
automatically forward logging messages to
<a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext.set_progress" title="fiftyone.operators.executor.ExecutionContext.set_progress"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_progress()</span></code></a>
as <code class="code docutils literal notranslate"><span class="pre">label</span></code> values using the pattern shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">fiftyone.operators</span> <span class="k">as</span> <span class="nn">foo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

    <span class="c1"># Automatically report all `fiftyone` logging messages</span>
    <span class="k">with</span> <span class="n">foo</span><span class="o">.</span><span class="n">ProgressHandler</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;fiftyone&quot;</span><span class="p">)):</span>
        <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">persistent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="operator-execution">
<span id="id14"></span><h3>Operator execution<a class="headerlink" href="#operator-execution" title="Permalink to this headline">¶</a></h3>
<p>All operators must implement
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a>, which is
where their main actions are performed.</p>
<p>The <a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> method
takes an <a class="reference internal" href="#operator-execution-context"><span class="std std-ref">execution context</span></a> as input whose
<code class="code docutils literal notranslate"><span class="pre">ctx.params</span></code> dict has been hydrated with parameters provided either by the
user by filling out the operator’s <a class="reference internal" href="#operator-inputs"><span class="std std-ref">input form</span></a> or
directly provided by the operation that triggered it. The method can optionally
return a dict of results values that will be made available via <code class="code docutils literal notranslate"><span class="pre">ctx.results</span></code>
when the operator’s <a class="reference internal" href="#operator-outputs"><span class="std std-ref">output form</span></a> is rendered.</p>
<div class="section" id="synchronous-execution">
<h4>Synchronous execution<a class="headerlink" href="#synchronous-execution" title="Permalink to this headline">¶</a></h4>
<p>Your execution method is free to make use of the full power of the FiftyOne SDK
and any external dependencies that it needs.</p>
<p>For example, you might perform inference on a model:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
    <span class="n">label_field</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;label_field&quot;</span><span class="p">]</span>
    <span class="n">confidence_thresh</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;confidence_thresh&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_model</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">apply_model</span><span class="p">(</span>
        <span class="n">model</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span> <span class="n">confidence_thresh</span><span class="o">=</span><span class="n">confidence_thresh</span>
    <span class="p">)</span>

    <span class="n">num_predictions</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label_field</span><span class="si">}</span><span class="s2">.detections&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;num_predictions&quot;</span><span class="p">:</span> <span class="n">num_predictions</span><span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When an operator’s
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> method
throws an error it will be displayed to the user in the browser.</p>
</div>
</div>
<div class="section" id="asynchronous-execution">
<h4>Asynchronous execution<a class="headerlink" href="#asynchronous-execution" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> method
can also be <code class="code docutils literal notranslate"><span class="pre">async</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">aiohttp</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># do something async</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">resp</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="operator-composition">
<h4>Operator composition<a class="headerlink" href="#operator-composition" title="Permalink to this headline">¶</a></h4>
<p>Many operators are designed to be composed with other operators to build up
more complex behaviors. You can trigger other operations from within an
operator’s <a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a>
method via <a class="reference internal" href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ctx.ops</span></code></a> and
<a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext.trigger" title="fiftyone.operators.executor.ExecutionContext.trigger"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ctx.trigger</span></code></a>.</p>
<p>The <a class="reference internal" href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ctx.ops</span></code></a> property of an
execution context exposes all builtin
<code class="xref py py-mod docutils literal notranslate"><span class="pre">Python</span></code> and
<a class="reference external" href="https://github.com/voxel51/fiftyone/blob/develop/app/packages/operators/src/built-in-operators.ts">JavaScript</a>
in a conveniently documented functional interface. For example, many operations
involve updating the current state of the App:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Dataset</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_dataset</span><span class="p">()</span>

    <span class="c1"># View/sidebar</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>  <span class="c1"># saved view by name</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>  <span class="c1"># arbitrary view</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_view</span><span class="p">()</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_sidebar_filters</span><span class="p">()</span>

    <span class="c1"># Selected samples</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_selected_samples</span><span class="p">([</span><span class="o">...</span><span class="p">]))</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_selected_samples</span><span class="p">()</span>

    <span class="c1"># Selected labels</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_selected_labels</span><span class="p">([</span><span class="o">...</span><span class="p">])</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_selected_labels</span><span class="p">()</span>

    <span class="c1"># Panels</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">open_panel</span><span class="p">(</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">close_panel</span><span class="p">(</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>The <a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext.trigger" title="fiftyone.operators.executor.ExecutionContext.trigger"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ctx.trigger</span></code></a>
property is a lower-level function that allows you to invoke arbitrary
operations by providing their URI and parameters, including all builtin
operations as well as any operations installed via custom plugins. For example,
here’s how to trigger the same App-related operations from above:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Dataset</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;open_dataset&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">))</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;reload_dataset&quot;</span><span class="p">)</span>  <span class="c1"># refreshes the App</span>

    <span class="c1"># View/sidebar</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_view&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">))</span>  <span class="c1"># saved view by name</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_view&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="o">.</span><span class="n">_serialize</span><span class="p">()))</span>  <span class="c1"># arbitrary view</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_view&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_sidebar_filters&quot;</span><span class="p">)</span>

    <span class="c1"># Selected samples</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_selected_samples&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">samples</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">]))</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_selected_samples&quot;</span><span class="p">)</span>

    <span class="c1"># Selected labels</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_selected_labels&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">]))</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_selected_labels&quot;</span><span class="p">)</span>

    <span class="c1"># Panels</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;open_panel&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">))</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;close_panel&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">))</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="generator-execution">
<h4>Generator execution<a class="headerlink" href="#generator-execution" title="Permalink to this headline">¶</a></h4>
<p>If your <a class="reference internal" href="#operator-config"><span class="std std-ref">operator’s config</span></a> declares that it is a
generator via <code class="code docutils literal notranslate"><span class="pre">execute_as_generator=True</span></code>, then its
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> method should
<code class="code docutils literal notranslate"><span class="pre">yield</span></code> calls to
<a class="reference internal" href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ctx.ops</span></code></a> methods or
<a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext.trigger" title="fiftyone.operators.executor.ExecutionContext.trigger"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ctx.trigger()</span></code></a>,
both of which trigger another operation and return a
<a class="reference internal" href="../api/fiftyone.operators.message.html#fiftyone.operators.message.GeneratedMessage" title="fiftyone.operators.message.GeneratedMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneratedMessage</span></code></a>
instance containing the result of the invocation.</p>
<p>For example, a common generator pattern is to use the builtin <code class="code docutils literal notranslate"><span class="pre">set_progress</span></code>
operator to render a progress bar tracking the progress of an operation:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># render a progress bar tracking the execution</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="c1"># [process a chunk here]</span>

        <span class="c1"># Option 1: ctx.ops</span>
        <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Option 2: ctx.trigger</span>
        <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span>
            <span class="s2">&quot;set_progress&quot;</span><span class="p">,</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check out the
<a class="reference external" href="https://github.com/voxel51/voxelgpt/blob/dfe23093485081fb889dbe18685587f4358a4438/__init__.py#L133">VoxelGPT plugin</a>
for a more sophisticated example of using generator execution to stream an
LLM’s response to a panel.</p>
</div>
</div>
</div>
<div class="section" id="accessing-secrets">
<span id="operator-secrets"></span><h3>Accessing secrets<a class="headerlink" href="#accessing-secrets" title="Permalink to this headline">¶</a></h3>
<p>Some plugins may require sensitive information such as API tokens and login
credentials in order to function. Any secrets that a plugin requires are
in its <a class="reference internal" href="#plugin-fiftyone-yml"><span class="std std-ref">fiftyone.yml</span></a>.</p>
<p>For example, the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/blob/main/plugins/annotation/fiftyone.yml">&#64;voxel51/annotation</a>
plugin declares the following secrets:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="nt">secrets</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_URL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_USERNAME</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_PASSWORD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_CVAT_EMAIL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELBOX_URL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELBOX_API_KEY</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELSTUDIO_URL</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIFTYONE_LABELSTUDIO_API_KEY</span>
</pre></div></td></tr></table></div>
</div>
<p>As the naming convention implies, any necessary secrets are provided by users
by setting environment variables with the appropriate names. For example, if
you want to use the CVAT backend with the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/blob/main/plugins/annotation/fiftyone.yml">&#64;voxel51/annotation</a>
plugin, you would set:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">FIFTYONE_CVAT_URL</span><span class="o">=</span>...
<span class="nv">FIFTYONE_CVAT_USERNAME</span><span class="o">=</span>...
<span class="nv">FIFTYONE_CVAT_PASSWORD</span><span class="o">=</span>...
<span class="nv">FIFTYONE_CVAT_EMAIL</span><span class="o">=</span>...
</pre></div>
</div>
<p>At runtime, the plugin’s <a class="reference internal" href="#operator-execution-context"><span class="std std-ref">execution context</span></a>
is automatically hydrated with any available secrets that are declared by the
plugin. Operators can access these secrets via the <code class="code docutils literal notranslate"><span class="pre">ctx.secrets</span></code> dict:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
   <span class="n">url</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_URL&quot;</span><span class="p">]</span>
   <span class="n">username</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_USERNAME&quot;</span><span class="p">]</span>
   <span class="n">password</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_PASSWORD&quot;</span><span class="p">]</span>
   <span class="n">email</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_EMAIL&quot;</span><span class="p">]</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="operator-outputs">
<span id="id18"></span><h3>Operator outputs<a class="headerlink" href="#operator-outputs" title="Permalink to this headline">¶</a></h3>
<p>Operators can optionally implement
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_output" title="fiftyone.operators.operator.Operator.resolve_output"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_output()</span></code></a>
to define read-only output forms that are presented to the user as a modal in
the App after the operator’s execution completes.</p>
<p>The basic objective of
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_output" title="fiftyone.operators.operator.Operator.resolve_output"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_output()</span></code></a>
is to define properties that describe how to render the values in <code class="code docutils literal notranslate"><span class="pre">ctx.results</span></code>
for the user. As with input forms, you can use the
<a class="reference internal" href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fiftyone.operators.types</span></code></a> module to define the output properties.</p>
<p>For example, the output form below renders the number of samples (<code class="code docutils literal notranslate"><span class="pre">count</span></code>)
computed during the operator’s <a class="reference internal" href="#operator-execution"><span class="std std-ref">execution</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># computation here...</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="n">count</span><span class="p">}</span>

<span class="k">def</span> <span class="nf">resolve_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
    <span class="n">outputs</span><span class="o">.</span><span class="n">int</span><span class="p">(</span>
        <span class="s2">&quot;count&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Count&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;The number of samples in the current </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All properties in output forms are implicitly rendered as read-only.</p>
</div>
</div>
<div class="section" id="operator-placement">
<span id="id19"></span><h3>Operator placement<a class="headerlink" href="#operator-placement" title="Permalink to this headline">¶</a></h3>
<p>By default, operators are only accessible from the
<a class="reference internal" href="using_plugins.html#using-operators"><span class="std std-ref">operator browser</span></a>. However, you can place a custom
button, icon, menu item, etc. in the App that will trigger the operator when
clicked in any location supported by the
<a class="reference internal" href="../api/fiftyone.operators.types.html#fiftyone.operators.types.Places" title="fiftyone.operators.types.Places"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.Places</span></code></a> enum.</p>
<p>For example, you can use:</p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">types.Places.SAMPLES_GRID_ACTIONS</span></code></p>
<img alt="../_images/samples_grid_actions.png" src="../_images/samples_grid_actions.png" />
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">types.Places.SAMPLES_GRID_SECONDARY_ACTIONS</span></code></p>
<img alt="../_images/samples_grid_secondary_actions.png" src="../_images/samples_grid_secondary_actions.png" />
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">types.Places.SAMPLES_VIEWER_ACTIONS</span></code></p>
<img alt="../_images/samples_viewer_actions.png" src="../_images/samples_viewer_actions.png" />
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">types.Places.EMBEDDINGS_ACTIONS</span></code></p>
<img alt="../_images/embeddings_actions.png" src="../_images/embeddings_actions.png" />
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">types.Places.HISTOGRAM_ACTIONS</span></code></p>
<img alt="../_images/histograms_actions.png" src="../_images/histograms_actions.png" />
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">types.Places.MAP_ACTIONS</span></code></p>
<img alt="../_images/map_actions.png" src="../_images/map_actions.png" />
</li>
</ul>
<p><br />
You can add a placement for an operator by implementing the
<a class="reference internal" href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_placement" title="fiftyone.operators.operator.Operator.resolve_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_placement()</span></code></a>
method as demonstrated below:</p>
</div>
</div>
<div class="section" id="developing-panels">
<span id="id20"></span><h2>Developing panels<a class="headerlink" href="#developing-panels" title="Permalink to this headline">¶</a></h2>
<p>Panels are miniature full-featured data applications that you can open in
<a class="reference internal" href="../user_guide/app.html#app-spaces"><span class="std std-ref">App spaces</span></a> and interactively manipulate to explore your
dataset and update/respond to updates from other spaces that are currently open
in the App.</p>
<p>Panels can be defined in either Python or JS, and FiftyOne comes with a
number of <a class="reference internal" href="#plugins-design-panels"><span class="std std-ref">builtin panels</span></a> for common tasks.</p>
<p>Panels can be scoped to the App’s grid view or modal view via their
<a class="reference internal" href="#panel-config"><span class="std std-ref">config</span></a>. Grid panels enable extensibility at the macro
level, allowing you to work with entire datasets or views, while modal panels
provide extensibility at the micro level, focusing on individual samples and
scenarios.</p>
<p>Panels, like <a class="reference internal" href="#developing-operators"><span class="std std-ref">operators</span></a>, can make use of the
<a class="reference internal" href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fiftyone.operators.types</span></code></a> module and the
<a class="reference internal" href="api/plugins.fiftyone.operators.html#module-fiftyone-operators" title="&#64;fiftyone/operators"><code class="xref js js-mod docutils literal notranslate"><span class="pre">&#64;fiftyone/operators</span></code></a> package, which define a
rich builtin type system that panel developers can use to implement the layout
and associated events that define the panel.</p>
<p>Panels can trigger both Python and JS operators, either programmatically or
by interactively launching a prompt that users can fill out to provide the
necessary parameters for the operator’s execution. This powerful composability
allows panels to define interactive workflows that guide the user through
executing workflows on their data and then interactively exploring and
analyzing the results of the computation.</p>
<p>Panels can also interact with other components of the App, such as responding
to changes in (or programmatically updating) the current dataset, view, current
selection, or active sample in the modal.</p>
<div class="section" id="panel-interface">
<span id="id21"></span><h3>Panel interface<a class="headerlink" href="#panel-interface" title="Permalink to this headline">¶</a></h3>
<p>The code block below describes the Python interface for defining panels.
We’ll dive into each component of the interface in more detail in the
subsequent sections.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#developing-js-plugins"><span class="std std-ref">this section</span></a> for more information on
developing panels in JS.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.operators</span> <span class="k">as</span> <span class="nn">foo</span>
<span class="kn">import</span> <span class="nn">fiftyone.operators.types</span> <span class="k">as</span> <span class="nn">types</span>

<span class="k">class</span> <span class="nc">ExamplePanel</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
            <span class="c1"># The panel&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

            <span class="c1"># The display name of the panel in the &quot;+&quot; menu</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

            <span class="c1"># Custom icons to use in the &quot;+&quot;&quot; menu</span>
            <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
            <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
            <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;developer_mode&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
            <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;developer_mode&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>

            <span class="c1"># Whether to allow multiple instances of the panel to be opened</span>
            <span class="n">allow_multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>

            <span class="c1"># Whether the panel should be available in the grid, modal, or both</span>
            <span class="c1"># Possible values: &quot;grid&quot;, &quot;modal&quot;, &quot;grid modal&quot;</span>
            <span class="n">surfaces</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span>  <span class="c1"># default = &quot;grid&quot;</span>

            <span class="c1"># Markdown-formatted text that describes the panel. This is</span>
            <span class="c1"># rendererd in a tooltip when the help icon in the panel</span>
            <span class="c1"># title is hovered over</span>
            <span class="n">help_markdown</span><span class="o">=</span><span class="s2">&quot;A description of the panel&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to define your panel&#39;s layout and events.</span>

<span class="sd">        This method is called after every panel event is executed (panel</span>
<span class="sd">        load, button callback, context change event, etc).</span>

<span class="sd">        Returns:</span>
<span class="sd">            a `types.Property` defining the panel&#39;s components</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

        <span class="n">brain_keys</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;brain_keys&quot;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># Define a menu of actions for the panel</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;51&quot;</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">enum</span><span class="p">(</span>
            <span class="s2">&quot;brain_key&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Choose a brain key&quot;</span><span class="p">,</span>  <span class="c1"># placeholder text</span>
            <span class="n">values</span><span class="o">=</span><span class="n">brain_keys</span><span class="p">,</span>
            <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_brain_key</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
        <span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
            <span class="s2">&quot;learn_more&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Learn more&quot;</span><span class="p">,</span>  <span class="c1"># tooltip text</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;help&quot;</span><span class="p">,</span>  <span class="c1"># material UI icon</span>
            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_click_learn_more</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
        <span class="p">)</span>

        <span class="c1"># Define components that appear in the panel&#39;s main body</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;The last event&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">LabelValueView</span><span class="p">())</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span>
            <span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;The last event data&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">JSONView</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Display a checkbox to toggle between plot and compute visualization button</span>
        <span class="n">show_compute_visualization_btn</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span>
            <span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">bool</span><span class="p">(</span>
            <span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Show compute visualization button&quot;</span><span class="p">,</span>
            <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_show_start_button</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># You can use conditional logic to dynamically change the layout</span>
        <span class="c1"># based on the current panel state</span>
        <span class="k">if</span> <span class="n">show_compute_visualization_btn</span><span class="p">:</span>
            <span class="c1"># Define a button with a custom on click event</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
                <span class="s2">&quot;start&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Compute visualization&quot;</span><span class="p">,</span>  <span class="c1"># button text</span>
                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_click_start</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>  <span class="c1"># button style</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Define an interactive plot with custom callbacks</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="s2">&quot;embeddings&quot;</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># plotly config</span>
                <span class="n">layout</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># plotly layout config</span>
                <span class="n">on_selected</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_selected_embeddings</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
                <span class="n">height</span><span class="o">=</span><span class="s2">&quot;400px&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
            <span class="n">panel</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="c1">#######################################################################</span>
    <span class="c1"># Builtin events</span>
    <span class="c1">#######################################################################</span>

    <span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the panel</span>
<span class="sd">        initially loads.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the panel is loaded&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_load&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

        <span class="c1"># Get the list of brain keys to populate `brain_key` dropdown</span>
        <span class="n">visualization_keys</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">list_brain_runs</span><span class="p">(</span><span class="s2">&quot;visualization&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;brain_keys&quot;</span><span class="p">,</span> <span class="n">visualization_keys</span><span class="p">)</span>

        <span class="c1"># Show compute visualization button by default</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_unload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the panel is</span>
<span class="sd">        being closed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the panel is unloaded&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_unload&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when any aspect</span>
<span class="sd">        of the execution context (view, selected samples, filters, etc.) changes.</span>

<span class="sd">        The current execution context will be available via ``ctx``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">_serialize</span><span class="p">(),</span>
                <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">selected</span><span class="p">,</span>
                <span class="s2">&quot;has_custom_view&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">has_custom_view</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current ExecutionContext&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_ctx&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
<span class="sd">        dataset is changed.</span>

<span class="sd">        The new dataset will be available via ``ctx.dataset``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current dataset name&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_dataset&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
<span class="sd">        view is changed.</span>

<span class="sd">        The new view will be available via ``ctx.view``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">_serialize</span><span class="p">(),</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current view&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_view&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
<span class="sd">        spaces layout changes.</span>

<span class="sd">        The current spaces layout will be available via ``ctx.spaces``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">spaces</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current spaces layout&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_spaces&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_current_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when a new sample</span>
<span class="sd">        is loaded in the Sample modal.</span>

<span class="sd">        The ID of the new sample will be available via</span>
<span class="sd">        ``ctx.current_sample``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">current_sample</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current sample&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_current_sample&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
<span class="sd">        selection changes (eg in the Samples panel).</span>

<span class="sd">        The IDs of the current selected samples will be available via</span>
<span class="sd">        ``ctx.selected``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">selected</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current selection&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_selected&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_selected_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
<span class="sd">        selected labels change (eg in the Sample modal).</span>

<span class="sd">        Information about the current selected labels will be available</span>
<span class="sd">        via ``ctx.selected_labels``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">selected_labels</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current selected labels&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_selected_labels&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_extended_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
<span class="sd">        extended selection changes.</span>

<span class="sd">        The IDs of the current extended selection will be available via</span>
<span class="sd">        ``ctx.extended_selection``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">extended_selection</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current extended selection&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_extended_selection&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_group_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
<span class="sd">        group slice changes.</span>

<span class="sd">        The current group slice will be available via ``ctx.group_slice``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">group_slice</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current group slice&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_group_slice&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

    <span class="c1">#######################################################################</span>
    <span class="c1"># Custom events</span>
    <span class="c1"># These events are defined by user code above and, just like builtin</span>
    <span class="c1"># events, take `ctx` as input and are followed by a call to render()</span>
    <span class="c1">#######################################################################</span>

    <span class="k">def</span> <span class="nf">on_change_brain_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># Load expensive content based on current `brain_key`</span>
        <span class="n">brain_key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;menu.brain_key&quot;</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">load_brain_results</span><span class="p">(</span><span class="n">brain_key</span><span class="p">)</span>

        <span class="c1"># Format results for plotly</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">sample_ids</span>

        <span class="n">plot_data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">ids</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;scatter&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;markers&quot;</span><span class="p">}</span>
        <span class="p">]</span>

        <span class="c1"># Store large content as panel data for efficiency</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">,</span> <span class="n">plot_data</span><span class="p">)</span>

        <span class="c1"># Show plot with embeddings data instead of the compute visualization button</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_click_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># Launch an interactive prompt for user to execute an operator</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span><span class="s2">&quot;@voxel51/brain/compute_visualization&quot;</span><span class="p">)</span>

        <span class="c1"># Lightweight state update</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_click_learn_more</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># Trigger a builtin operation via `ctx.ops`</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://docs.voxel51.com/plugins/developing_plugins.html&quot;</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Check out </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> for more information&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_selected_embeddings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># Get selected points from event params</span>
        <span class="n">selected_points</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">selected_sample_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">selected_points</span><span class="p">]</span>

        <span class="c1"># Conditionally trigger a builtin operation via `ctx.ops`</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_sample_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_extended_selection</span><span class="p">(</span><span class="n">selected_sample_ids</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_show_start_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># Get current state of the checkbox on change</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Always implement this method and register() each panel that your</span>
<span class="sd">    plugin defines.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ExamplePanel</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="../_images/example-panel-inline.gif" class="align-center" src="../_images/example-panel-inline.gif" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that you must also include the panel’s name in the plugin’s
<a class="reference internal" href="#plugin-fiftyone-yml"><span class="std std-ref">fiftyone.yml</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">panels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example_panel</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="panel-config">
<span id="id22"></span><h3>Panel config<a class="headerlink" href="#panel-config" title="Permalink to this headline">¶</a></h3>
<p>Every panel must define a
<a class="reference internal" href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.config" title="fiftyone.operators.panel.Panel.config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">config</span></code></a> property that
defines its name, display name, surfaces, and other optional metadata about its
behavior:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
        <span class="c1"># The panel&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

        <span class="c1"># The display name of the panel in the &quot;+&quot; menu</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>

        <span class="c1"># Custom icons to use in the &quot;+&quot;&quot; menu</span>
        <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
        <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
        <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-light.svg&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
        <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-dark.svg&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>

        <span class="c1"># Whether to allow multiple instances of the panel to be opened</span>
        <span class="n">allow_multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>

        <span class="c1"># Whether the panel should be available in the grid, modal, or both</span>
        <span class="c1"># Possible values: &quot;grid&quot;, &quot;modal&quot;, &quot;grid modal&quot;</span>
        <span class="n">surfaces</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span>  <span class="c1"># default = &quot;grid&quot;</span>

        <span class="c1"># Markdown-formatted text that describes the panel. This is</span>
        <span class="c1"># rendererd in a tooltip when the help icon in the panel</span>
        <span class="c1"># title is hovered over</span>
        <span class="n">help_markdown</span><span class="o">=</span><span class="s2">&quot;A description of the panel&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">surfaces</span></code> key defines the panel’s scope:</p>
<ul class="simple">
<li><p>Grid panels can be accessed from the <code class="docutils literal notranslate"><span class="pre">+</span></code> button in the App’s
<a class="reference internal" href="../user_guide/app.html#app-fields-sidebar"><span class="std std-ref">grid view</span></a>, which allows you to build macro
experiences that work with entire datasets or views</p></li>
<li><p>Modal panels can be accessed from the <code class="docutils literal notranslate"><span class="pre">+</span></code> button in the App’s
<a class="reference internal" href="../user_guide/app.html#app-sample-view"><span class="std std-ref">modal view</span></a>, which allows you to build interactions
that focus on individual samples and scenarios</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For an example of a modal panel, refer to the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/label_count">label count panel</a>.</p>
</div>
</div>
<div class="section" id="panel-execution-context">
<span id="id23"></span><h3>Execution context<a class="headerlink" href="#panel-execution-context" title="Permalink to this headline">¶</a></h3>
<p>An <a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext" title="fiftyone.operators.executor.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> is
passed to each of the panel’s methods at runtime. This <code class="code docutils literal notranslate"><span class="pre">ctx</span></code> contains static
information about the current state of the App (dataset, view, panel,
selection, etc) as well as dynamic information about the panel’s current
state and data.</p>
<p>See <a class="reference internal" href="#operator-execution-context"><span class="std std-ref">this section</span></a> for a full description
of the execution context.</p>
</div>
<div class="section" id="panel-state-and-data">
<span id="id24"></span><h3>Panel state and data<a class="headerlink" href="#panel-state-and-data" title="Permalink to this headline">¶</a></h3>
<p>Panels provide two mechanisms for persisting information:
<a class="reference internal" href="#panel-state"><span class="std std-ref">panel state</span></a> and <a class="reference internal" href="#panel-data"><span class="std std-ref">panel data</span></a>.</p>
<div class="section" id="basic-structure">
<span id="panel-basic-structure"></span><h4>Basic structure<a class="headerlink" href="#basic-structure" title="Permalink to this headline">¶</a></h4>
<p>Panel state can be accessed and updated via <code class="code docutils literal notranslate"><span class="pre">ctx.panel.state</span></code>, and panel data
can be updated (but not accessed) via <code class="code docutils literal notranslate"><span class="pre">ctx.panel.data</span></code>.</p>
<p>Under the hood, panel state and data is merged into a single nested object that
maps 1-1 to the structure and naming of the properties defined by the panel’s
<a class="reference internal" href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> method.</p>
<p>The example code below shows how to access and update panel state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since panel state and panel data are merged into a single object, it is
important to avoid naming conflicts between state and data keys. If a key
is present in both panel state and data, the value in <em>panel data</em> will be
used.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">CounterPanel</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;counter_panel&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Counter Panel&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;123&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">v_stack</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;h_stack&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>

    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">decrement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

        <span class="c1"># Define a vertical stack object with the name &#39;v_stack&#39;</span>
        <span class="c1"># key: &#39;v_stack&#39;</span>
        <span class="n">v_stack</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">v_stack</span><span class="p">(</span><span class="s2">&quot;v_stack&quot;</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Define a horizontal stack object with the name &#39;h_stack&#39; on &#39;v_stack&#39;</span>
        <span class="c1"># key: &#39;v_stack.h_stack&#39;</span>
        <span class="n">h_stack</span> <span class="o">=</span> <span class="n">v_stack</span><span class="o">.</span><span class="n">h_stack</span><span class="p">(</span><span class="s2">&quot;h_stack&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>

        <span class="c1"># Get state</span>
        <span class="n">v_stack_state</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">v_stack</span>
        <span class="n">h_stack_state</span> <span class="o">=</span> <span class="n">v_stack_state</span><span class="p">[</span><span class="s2">&quot;h_stack&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">v_stack_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">h_stack_state</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">h_stack_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="c1"># Add a message to the horizontal stack object with the name &#39;count&#39;</span>
        <span class="c1"># key: &#39;v_stack.h_stack.count&#39;</span>
        <span class="n">h_stack</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Count: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Add a button to the horizontal stack object with the name &#39;increment&#39;</span>
        <span class="c1"># key: &#39;v_stack.h_stack.increment&#39;</span>
        <span class="n">h_stack</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
            <span class="s2">&quot;increment&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Increment&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;add&quot;</span><span class="p">,</span>
            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">increment</span><span class="p">,</span>
            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Add a button to the horizontal stack object with the name &#39;decrement&#39;</span>
        <span class="c1"># key: &#39;v_stack.h_stack.count&#39;</span>
        <span class="n">h_stack</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
            <span class="s2">&quot;decrement&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Decrement&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;remove&quot;</span><span class="p">,</span>
            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">decrement</span><span class="p">,</span>
            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="../_images/counter-panel-inline.gif" class="align-center" src="../_images/counter-panel-inline.gif" />
</div>
<div class="section" id="panel-state">
<span id="id25"></span><h4>Panel state<a class="headerlink" href="#panel-state" title="Permalink to this headline">¶</a></h4>
<p>Panel state is included in every
<a class="reference internal" href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> call and event
callback and is analogous to <a class="reference internal" href="#operator-inputs"><span class="std std-ref">operator parameters</span></a>:</p>
<ul class="simple">
<li><p>The values of any components defined in a panel’s
<a class="reference internal" href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> method are
available via corresponding state properties of the same name</p></li>
<li><p>The current panel state is readable during a panel’s execution</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

    <span class="n">menu</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">btn_group</span><span class="p">(</span><span class="s2">&quot;actions&quot;</span><span class="p">)</span>
    <span class="n">actions</span><span class="o">.</span><span class="n">enum</span><span class="p">(</span>
        <span class="s2">&quot;mode&quot;</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
        <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_mode</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">)</span>

    <span class="n">panel</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;spam&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">on_change_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Object-based interface</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">mode</span>
    <span class="n">user_input</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">user_input</span>

    <span class="c1"># Functional interface</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;menu.actions.mode&quot;</span><span class="p">)</span>
    <span class="n">user_input</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;user_input&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Panel state can be programmatically updated in panel methods via the two
syntaxes shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">on_change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Top-level state attributes can be modified by setting properties</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>

    <span class="c1"># Use set_state() to efficiently apply nested updates</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;foo.bar&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;spam&quot;</span><span class="p">:</span> <span class="s2">&quot;eggs&quot;</span><span class="p">})</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don’t directly modify panel state in
<a class="reference internal" href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>, just like how
<code class="code docutils literal notranslate"><span class="pre">setState()</span></code> should not be called in
React’s
<a class="reference external" href="https://legacy.reactjs.org/docs/react-component.html#render">render()</a>.</p>
<p>Instead set panel state in event callbacks as demonstrated above.</p>
</div>
</div>
<div class="section" id="panel-data">
<span id="id26"></span><h4>Panel data<a class="headerlink" href="#panel-data" title="Permalink to this headline">¶</a></h4>
<p>Panel data is designed to store larger content such as plot data that is
loaded once and henceforward stored <em>only</em> clientside to avoid
unnecessary/expensive reloads and serverside serialization during the lifecycle
of the panel.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_data</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

    <span class="n">menu</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">btn_group</span><span class="p">(</span><span class="s2">&quot;actions&quot;</span><span class="p">)</span>
    <span class="n">actions</span><span class="o">.</span><span class="n">enum</span><span class="p">(</span>
        <span class="s2">&quot;brain_key&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Brain key&quot;</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">update_plot_data</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">panel</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=...</span><span class="p">,</span> <span class="n">layout</span><span class="o">=...</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update_plot_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">brain_key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">brain_key</span>
    <span class="k">if</span> <span class="n">brain_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Load expensive content based on current `brain_key`</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">load_brain_results</span><span class="p">(</span><span class="n">brain_key</span><span class="p">)</span>

    <span class="c1"># Store large content as panel data for efficiency</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;points&quot;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Note how the panel’s <code class="code docutils literal notranslate"><span class="pre">on_load()</span></code> hook is implemented so that panel data can be
hydrated when the panel is initially loaded, and then subsequently plot data is
loaded only when the <code class="code docutils literal notranslate"><span class="pre">brain_key</span></code> property is modified.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Panel data is never readable in Python; it is only implicitly used by
the types you define when they are rendered clientside.</p>
</div>
</div>
</div>
<div class="section" id="execution-store">
<span id="panel-execution-store"></span><h3>Execution store<a class="headerlink" href="#execution-store" title="Permalink to this headline">¶</a></h3>
<p>Panels can store data in the execution store, which is a key-value store that
is persisted beyond the lifetime of the panel. This is useful for storing
information that should persist across panel instances and App sessions, such
as cached data, long-lived panel state, or user preferences.</p>
<p>You can create/retrieve execution stores scoped to the current <code class="docutils literal notranslate"><span class="pre">ctx.dataset</span></code>
via <a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext.store" title="fiftyone.operators.executor.ExecutionContext.store"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ctx.store</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Retrieve a store scoped to the current `ctx.dataset`</span>
    <span class="c1"># The store is automatically created if necessary</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="s2">&quot;my_store&quot;</span><span class="p">)</span>

    <span class="c1"># Load a pre-existing value from the store</span>
    <span class="n">user_choice</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_choice&quot;</span><span class="p">)</span>

    <span class="c1"># Store data with a TTL to ensure it is evicted after `ttl` seconds</span>
    <span class="n">store</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

    <span class="c1"># List all keys in the store</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">list_keys</span><span class="p">())</span>  <span class="c1"># [&quot;user_choice&quot;, &quot;my_key&quot;]</span>

    <span class="c1"># Retrieve data from the store</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>  <span class="c1"># {&quot;foo&quot;: &quot;bar&quot;}</span>

    <span class="c1"># Retrieve metadata about a key</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>
    <span class="c1"># {&quot;created_at&quot;: ..., &quot;updated_at&quot;: ..., &quot;expires_at&quot;: ...}</span>

    <span class="c1"># Delete a key from the store</span>
    <span class="n">store</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">)</span>

    <span class="c1"># Clear all data in the store</span>
    <span class="n">store</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? Any execution stores associated with a dataset are
automatically  deleted when the dataset is deleted.</p>
</div>
<p>For advanced use cases, it is also possible to create and use global stores
that are available to all datasets via the
<a class="reference internal" href="../api/fiftyone.operators.store.html#fiftyone.operators.store.ExecutionStore" title="fiftyone.operators.store.ExecutionStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionStore</span></code></a> class:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">fiftyone.operators</span> <span class="kn">import</span> <span class="n">ExecutionStore</span>

<span class="c1"># Retrieve a global store</span>
<span class="c1"># The store is automatically created if necessary</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">ExecutionStore</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;my_store&quot;</span><span class="p">)</span>

<span class="c1"># Store data with a TTL to ensure it is evicted after `ttl` seconds</span>
<span class="n">store</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

<span class="c1"># List all keys in the global store</span>
<span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">list_keys</span><span class="p">())</span>  <span class="c1"># [&quot;my_key&quot;]</span>

<span class="c1"># Retrieve data from the global store</span>
<span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>  <span class="c1"># {&quot;foo&quot;: &quot;bar&quot;}</span>

<span class="c1"># Retrieve metadata about a key</span>
<span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>
<span class="c1"># {&quot;created_at&quot;: ..., &quot;updated_at&quot;: ..., &quot;expires_at&quot;: ...}</span>

<span class="c1"># Delete a key from the global store</span>
<span class="n">store</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">)</span>

<span class="c1"># Clear all data in the global store</span>
<span class="n">store</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Global stores have no automatic garbage collection, so take care when
creating and using global stores whose keys do not utilize TTLs.</p>
</div>
</div>
<div class="section" id="saved-workspaces">
<h3>Saved workspaces<a class="headerlink" href="#saved-workspaces" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../user_guide/app.html#app-workspaces"><span class="std std-ref">Saved workspaces</span></a> may contain any number of Python
panels!</p>
<p>When a workspace is saved, the current <a class="reference internal" href="#panel-state"><span class="std std-ref">panel state</span></a> of any
panels in the layout is persisted as part of the workspace’s definition. Thus
when the workspace is loaded later, all panels will “remember” their state.</p>
<p><a class="reference internal" href="#panel-data"><span class="std std-ref">Panel data</span></a> (which may be large), on the other hand, is
<em>not</em> explicitly persisted. Instead it should be hydrated when the panel is
loaded using the pattern <a class="reference internal" href="#panel-data"><span class="std std-ref">demonstrated here</span></a>.</p>
</div>
<div class="section" id="panel-accessing-secrets">
<span id="id27"></span><h3>Accessing secrets<a class="headerlink" href="#panel-accessing-secrets" title="Permalink to this headline">¶</a></h3>
<p>Panels can <a class="reference internal" href="#operator-secrets"><span class="std std-ref">access secrets</span></a> defined by their plugin.</p>
<p>At runtime, the panel’s <a class="reference internal" href="#operator-execution-context"><span class="std std-ref">execution context</span></a>
is automatically hydrated with any available secrets that are declared by the
plugin. Panels can access these secrets via the <code class="code docutils literal notranslate"><span class="pre">ctx.secrets</span></code> dict:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_URL&quot;</span><span class="p">]</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_USERNAME&quot;</span><span class="p">]</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_PASSWORD&quot;</span><span class="p">]</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_EMAIL&quot;</span><span class="p">]</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="common-patterns">
<span id="panel-common-patterns"></span><h3>Common patterns<a class="headerlink" href="#common-patterns" title="Permalink to this headline">¶</a></h3>
<p>Most panels make use of common patterns like callbacks, menus, interactive
plots, and walkthrough layouts.</p>
<p>Learning the patterns described below will help you build panels faster and
avoid roadblocks along the way.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check out the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/panel-examples">panel examples</a>
plugin to see a collection of fully-functional panels that demonstrate
the common patterns below.</p>
</div>
<div class="section" id="callbacks">
<span id="panel-callbacks"></span><h4>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h4>
<p>Most panel components support callback methods like <code class="code docutils literal notranslate"><span class="pre">on_click</span></code> and <code class="code docutils literal notranslate"><span class="pre">on_change</span></code>
that you can implement to perform operations and trigger state updates when
users interact with the components.</p>
<p>For example, the code below shows how clicking a button or changing the state
of a slider can initiate callbacks that trigger operators, open other panels,
and programmatically modify the current state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All callback functions have access to the current
<a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext" title="fiftyone.operators.executor.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>
via their <code class="code docutils literal notranslate"><span class="pre">ctx</span></code> argument and can use it to get/update panel state and
trigger other operations.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Set initial slider state</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">slider_value</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">def</span> <span class="nf">open_compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Launch an interactive prompt for user to execute an operator</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span><span class="s2">&quot;@voxel51/brain/compute_visualization&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">open_embeddings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Open embeddings panel</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;open_panel&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">change_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># Grab current slider value from `ctx.params`</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">slider_value</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;panel_state&quot;</span><span class="p">][</span><span class="s2">&quot;slider_value&quot;</span><span class="p">]</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

    <span class="c1"># Define buttons that work with on_click callbacks</span>
    <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
        <span class="s2">&quot;button_1&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Compute visualization&quot;</span><span class="p">,</span>
        <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_compute</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
        <span class="s2">&quot;button_2&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Open embeddings panel&quot;</span><span class="p">,</span>
        <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_embeddings</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Define a slider with an `on_change` callback</span>
    <span class="n">slider</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SliderView</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">slider_value</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example Slider&quot;</span>
    <span class="p">)</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;multipleOf&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="n">panel</span><span class="o">.</span><span class="n">int</span><span class="p">(</span>
        <span class="s2">&quot;slider_value&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">slider</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">change_value</span><span class="p">,</span> <span class="o">**</span><span class="n">schema</span>
    <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can use <code class="code docutils literal notranslate"><span class="pre">ctx.params</span></code> in a callback to access the state
of the property that triggered the action.</p>
</div>
</div>
<div class="section" id="dropdown-menus">
<span id="panel-dropdown-menus"></span><h4>Dropdown menus<a class="headerlink" href="#dropdown-menus" title="Permalink to this headline">¶</a></h4>
<p>Dropdown menus can be a useful tool to build panels whose layout/content
dynamically changes based on the current state of the menu.</p>
<p>Here’s an example of a dropdown menu with selectable options that alters the
panel layout based on user input.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Panels also support a <code class="code docutils literal notranslate"><span class="pre">menu()</span></code> property that provides a convenient syntax
for defining a group of dropdowns, buttons, etc that can be anchored
to a particular position in your panel (e.g., top-left).</p>
<p>Check out <a class="reference internal" href="#panel-interface"><span class="std std-ref">this section</span></a> for an example panel that
makes use of <code class="code docutils literal notranslate"><span class="pre">menu()</span></code>.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">DropdownMenuExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_dropdown_menu&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Examples: Dropdown Menu&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">alter_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">refresh_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_dataset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">reload_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_samples</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">say_hi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Hi!&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

        <span class="n">panel</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            ### Welcome to the Python Panel Dropdown Menu Example</span>
<span class="sd">            Use the menu below to select what you would like to do next!</span>

<span class="sd">            ---</span>

<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>  <span class="c1"># 50% of current panel width</span>
            <span class="n">height</span><span class="o">=</span><span class="s2">&quot;200px&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Define a dropdown menu and add choices</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">DropdownView</span><span class="p">()</span>
        <span class="n">dropdown</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span>
            <span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Display Refresh Button&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Displays button that will refresh the FiftyOne App&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">dropdown</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span>
            <span class="s2">&quot;reload_samples&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Display Reload Samples Button&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Displays button that will reload the samples view&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">dropdown</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span>
            <span class="s2">&quot;say_hi&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Display Hi Button&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Displays button that will say hi&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Add dropdown menu to the panel as a view and use the `on_change`</span>
        <span class="c1"># callback to trigger `alter_selection`</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">view</span><span class="p">(</span>
            <span class="s2">&quot;dropdown&quot;</span><span class="p">,</span>
            <span class="n">view</span><span class="o">=</span><span class="n">dropdown</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Dropdown Menu&quot;</span><span class="p">,</span>
            <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alter_selection</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Change panel visual state dependent on dropdown menu selection</span>
        <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">==</span> <span class="s2">&quot;refresh&quot;</span><span class="p">:</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
                <span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Refresh FiftyOne&quot;</span><span class="p">,</span>
                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">refresh_page</span><span class="p">,</span>
                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">==</span> <span class="s2">&quot;reload_samples&quot;</span><span class="p">:</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
                <span class="s2">&quot;reload_samples&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Reload Samples&quot;</span><span class="p">,</span>
                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reload_samples</span><span class="p">,</span>
                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">==</span> <span class="s2">&quot;say_hi&quot;</span><span class="p">:</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
                <span class="s2">&quot;say_hi&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Say Hi&quot;</span><span class="p">,</span>
                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">say_hi</span><span class="p">,</span>
                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
            <span class="n">panel</span><span class="p">,</span>
            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
                <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="../_images/dropdown-example-inline.gif" class="align-center" src="../_images/dropdown-example-inline.gif" />
</div>
<div class="section" id="interactive-plots">
<span id="panel-interactive-plots"></span><h4>Interactive plots<a class="headerlink" href="#interactive-plots" title="Permalink to this headline">¶</a></h4>
<p>Panels provide native support for defining interactive plots that can render
data from the current dataset and dynamically update or trigger actions as
users interact with the plots.</p>
<p>For example, here’s a panel that displays a histogram of a specified field of
the current dataset where clicking a bar loads the corresponding samples in
the App.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.operators</span> <span class="k">as</span> <span class="nn">foo</span>
<span class="kn">import</span> <span class="nn">fiftyone.operators.types</span> <span class="k">as</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="k">class</span> <span class="nc">InteractivePlotExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_interactive_plot&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Examples: Interactive Plot&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;bar_chart&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># Get target field</span>
        <span class="n">target_field</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">target_field</span> <span class="ow">or</span> <span class="s2">&quot;ground_truth.detections.label&quot;</span>
        <span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">target_field</span> <span class="o">=</span> <span class="n">target_field</span>

        <span class="c1"># Compute target histogram for current dataset</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="n">target_field</span><span class="p">)</span>
        <span class="n">keys</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">sorted</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="c1"># Store as panel data for efficiency</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">histogram</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">keys</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">}</span>

        <span class="c1"># Launch panel in a horizontal split view</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">split_panel</span><span class="p">(</span><span class="s2">&quot;example_interactive_plot&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># Update histogram when current view changes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_histogram_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># The histogram bar that the user clicked</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>

        <span class="c1"># Create a view that matches the selected histogram bar</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">target_field</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">_make_matching_view</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="c1"># Load view in App</span>
        <span class="k">if</span> <span class="n">view</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_view</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

        <span class="n">panel</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="s2">&quot;histogram&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Interactive Histogram&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;xanchor&quot;</span><span class="p">:</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;yanchor&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;automargin&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;xaxis&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Labels&quot;</span><span class="p">},</span>
                <span class="s2">&quot;yaxis&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Count&quot;</span><span class="p">},</span>
            <span class="p">},</span>
            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_histogram_click</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
            <span class="s2">&quot;reset&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Reset Chart&quot;</span><span class="p">,</span>
            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">,</span>
            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
            <span class="n">panel</span><span class="p">,</span>
            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
                <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

<span class="k">def</span> <span class="nf">_make_matching_view</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.label&quot;</span><span class="p">):</span>
        <span class="n">root_field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">dataset</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="n">root_field</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match_tags</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="../_images/interactive-plot-example-inline.gif" class="align-center" src="../_images/interactive-plot-example-inline.gif" />
</div>
<div class="section" id="walkthroughs">
<span id="panel-walkthroughs"></span><h4>Walkthroughs<a class="headerlink" href="#walkthroughs" title="Permalink to this headline">¶</a></h4>
<p>You can use a combination of panel objects like markdown, buttons, arrow
navigation, and layout containers to create guided walkthroughs similar to the
ones at <a class="reference external" href="https://try.fiftyone.ai/datasets/example/samples">try.fiftyone.ai</a>.</p>
<p>Here’s an example of a panel that leads the user through multiple steps of a
guided workflow.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">WalkthroughExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_walkthrough&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Examples: Walkthrough&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">info_table</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;Dataset Name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Dataset Description&quot;</span><span class="p">:</span> <span class="s2">&quot;FiftyOne Quick Start Zoo Dataset&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Number of Samples&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">]</span>

    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">info_table</span> <span class="o">=</span> <span class="n">info_table</span>

    <span class="k">def</span> <span class="nf">go_to_next_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">go_to_previous_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">reset_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">open_operator_io</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">open_panel</span><span class="p">(</span><span class="s2">&quot;OperatorIO&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>

        <span class="c1"># Define a vertical stack to live inside your panel</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">v_stack</span><span class="p">(</span>
            <span class="s2">&quot;welcome&quot;</span><span class="p">,</span> <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
        <span class="p">)</span>
        <span class="n">button_container</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
            <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
        <span class="p">)</span>

        <span class="n">page</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;page&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">page</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                ### A Tutorial Walkthrough</span>

<span class="sd">                Welcome to the FiftyOne App! Here is a great example of what it looks like to create a tutorial style walkthrough via a Python Panel.</span>
<span class="sd">            &quot;&quot;&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;markdown_screen_1&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">stack</span><span class="o">.</span><span class="n">media_player</span><span class="p">(</span>
                <span class="s2">&quot;video&quot;</span><span class="p">,</span>
                <span class="s2">&quot;https://youtu.be/ad79nYk2keg&quot;</span><span class="p">,</span>
                <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">page</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                ### Information About Your Dataset</span>

<span class="sd">                Perhaps you would like to know some more information about your dataset?</span>
<span class="sd">            &quot;&quot;&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;markdown_screen_2&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">TableView</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Dataset Name&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Dataset Name&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Dataset Description&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Number of Samples&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Number of Samples&quot;</span><span class="p">)</span>

            <span class="n">panel</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;info_table&quot;</span><span class="p">,</span>
                <span class="n">view</span><span class="o">=</span><span class="n">table</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Cool Info About Your Data&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">page</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">operator_status</span> <span class="o">!=</span> <span class="s2">&quot;opened&quot;</span><span class="p">:</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
<span class="w">                    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                    ### One Last Trick</span>

<span class="sd">                    If you want to do something cool, click the button below.</span>
<span class="sd">                &quot;&quot;&quot;</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;markdown_screen_3&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">btns</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">&quot;top_btns&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">button_container</span><span class="p">)</span>
                <span class="n">btns</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
                    <span class="s2">&quot;open_operator_io&quot;</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Do Something Cool&quot;</span><span class="p">,</span>
                    <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_operator_io</span><span class="p">,</span>
                    <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                #### How did you get here?</span>
<span class="sd">                Looks like you found the end of the walkthrough. Or have you gotten a little lost in the grid? No worries, let&#39;s get you back to the walkthrough!</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="p">)</span>
            <span class="n">btns</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">&quot;btns&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">button_container</span><span class="p">)</span>
            <span class="n">btns</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Go Home&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_page</span><span class="p">)</span>

        <span class="c1"># Arrow navigation to go to next or previous page</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">arrow_nav</span><span class="p">(</span>
            <span class="s2">&quot;arrow_nav&quot;</span><span class="p">,</span>
            <span class="n">forward</span><span class="o">=</span><span class="n">page</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">,</span>  <span class="c1"># hidden for the last page</span>
            <span class="n">backward</span><span class="o">=</span><span class="n">page</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># hidden for the first page</span>
            <span class="n">on_forward</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">go_to_next_page</span><span class="p">,</span>
            <span class="n">on_backward</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">go_to_previous_page</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
            <span class="n">panel</span><span class="p">,</span>
            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
                <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
            <span class="p">),</span>
        <span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="../_images/walkthrough-example-inline.gif" class="align-center" src="../_images/walkthrough-example-inline.gif" />
</div>
<div class="section" id="displaying-multimedia">
<span id="panel-displaying-multimedia"></span><h4>Displaying multimedia<a class="headerlink" href="#displaying-multimedia" title="Permalink to this headline">¶</a></h4>
<p>Displaying images, videos, and other forms of multimedia is straightforward in
panels. You can embed third-party resources like URLs or load multimedia stored
in local directories.</p>
<p>Here are some examples of panels that load, render, and manipulate various
forms of image and video data.</p>
<img alt="../_images/multimedia-example-inline.gif" class="align-center" src="../_images/multimedia-example-inline.gif" />
</div>
<div class="section" id="type-hints">
<span id="panel-type-hints"></span><h4>Type hints<a class="headerlink" href="#type-hints" title="Permalink to this headline">¶</a></h4>
<p>Defining the types of your panel’s function arguments allows you to inspect the
methods available to an object and will dramatically help you increase your
speed of development.</p>
<p>With type hints, your IDE can preview helpful docstrings, trace <code class="code docutils literal notranslate"><span class="pre">fiftyone</span></code>
source code, and see what methods exist on your object during the development
process.</p>
<p>For example, declaring that the <code class="code docutils literal notranslate"><span class="pre">ctx</span></code> variable has type
<a class="reference internal" href="../api/fiftyone.operators.executor.html#fiftyone.operators.executor.ExecutionContext" title="fiftyone.operators.executor.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> allows
you to reveal all of its available methods during development:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">fiftyone.operators</span> <span class="kn">import</span> <span class="n">ExecutionContext</span>

<span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">ExecutionContext</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">()</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="p">()</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">()</span>

    <span class="c1"># Reveals the remaining methods available to ctx</span>
    <span class="n">ctx</span><span class="o">.</span>
    <span class="o">...</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
</div>
<div class="section" id="developing-js-plugins">
<span id="id28"></span><h2>Developing JS plugins<a class="headerlink" href="#developing-js-plugins" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to develop JS-specific plugin components.</p>
<div class="section" id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<p>To start building your own JS plugin, refer to the
<a class="reference external" href="https://github.com/voxel51/hello-world-plugin-js">hello-world-plugin-js</a>
repository. This repo serves as a starting point, providing examples of a build
process, a JS panel, and a JS operator.</p>
<p>The <a class="reference external" href="https://github.com/voxel51/fiftyone-js-plugin-build">fiftyone-js-plugin-build</a>
package offers a utility for configuring <a class="reference external" href="https://vite.dev">vite</a> to build your
JS plugin bundle.</p>
</div>
<div class="section" id="component-types">
<h3>Component types<a class="headerlink" href="#component-types" title="Permalink to this headline">¶</a></h3>
<p>JS plugins may register components to add or customize functionality within the
FiftyOne App. Each component is registered with an activation function. The
component will only be considered for rendering when the activation function
returns <code class="code docutils literal notranslate"><span class="pre">true</span></code>:</p>
<ul class="simple">
<li><p><strong>Panel</strong>: JS plugins can register panel components that can be opened by
clicking the <code class="code docutils literal notranslate"><span class="pre">+</span></code> next to any existing panel’s tab</p></li>
<li><p><strong>Component</strong>: JS plugins can register generic components that can be used
to render operator input and output</p></li>
</ul>
</div>
<div class="section" id="panels-and-components">
<h3>Panels and Components<a class="headerlink" href="#panels-and-components" title="Permalink to this headline">¶</a></h3>
<p>Here’s some examples of using panels and components to add your
own custom user interface and components to the FiftyOne App.</p>
<div class="section" id="hello-world-panel">
<h4>Hello world panel<a class="headerlink" href="#hello-world-panel" title="Permalink to this headline">¶</a></h4>
<p>A simple plugin that renders “Hello world” in a panel would look like this:</p>
<div class="highlight-jsx notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">registerComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">PluginComponentTypes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">HelloWorld</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span><span class="w"> </span><span class="nx">world</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="nx">registerComponent</span><span class="p">({</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;HelloWorld&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Hello world&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HelloWorld</span><span class="p">,</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">PluginComponentTypes</span><span class="p">.</span><span class="nx">Panel</span><span class="p">,</span>
<span class="w">    </span><span class="nx">activator</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kc">true</span>
<span class="p">});</span>

<span class="o">:</span><span class="nx">linenos</span><span class="o">:</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="adding-a-custom-panel">
<h4>Adding a custom Panel<a class="headerlink" href="#adding-a-custom-panel" title="Permalink to this headline">¶</a></h4>
<div class="highlight-jsx notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">fop</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">fos</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/state&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">foa</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/aggregations&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">AwesomeMap</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;react-mapping-library&quot;</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">CustomPanel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">dataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">fos</span><span class="p">.</span><span class="nx">dataset</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">fos</span><span class="p">.</span><span class="nx">view</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">fos</span><span class="p">.</span><span class="nx">filters</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">aggregate</span><span class="p">,</span><span class="w"> </span><span class="nx">points</span><span class="p">,</span><span class="w"> </span><span class="nx">loading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">foa</span><span class="p">.</span><span class="nx">useAggregation</span><span class="p">({</span>
<span class="w">        </span><span class="nx">dataset</span><span class="p">,</span>
<span class="w">        </span><span class="nx">filters</span><span class="p">,</span>
<span class="w">        </span><span class="nx">view</span><span class="p">,</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">aggregate</span><span class="p">(</span>
<span class="w">            </span><span class="p">[</span>
<span class="w">                </span><span class="ow">new</span><span class="w"> </span><span class="nx">foa</span><span class="p">.</span><span class="nx">aggregations</span><span class="p">.</span><span class="nx">Values</span><span class="p">({</span>
<span class="w">                    </span><span class="nx">fieldOrExpr</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;id&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">}),</span>
<span class="w">                </span><span class="ow">new</span><span class="w"> </span><span class="nx">foa</span><span class="p">.</span><span class="nx">aggregations</span><span class="p">.</span><span class="nx">Values</span><span class="p">({</span>
<span class="w">                    </span><span class="nx">fieldOrExpr</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;location.point.coordinates&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">}),</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nx">dataset</span><span class="p">.</span><span class="nx">name</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dataset</span><span class="p">,</span><span class="w"> </span><span class="nx">filters</span><span class="p">,</span><span class="w"> </span><span class="nx">view</span><span class="p">]);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">loading</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">MyMap</span><span class="w"> </span><span class="na">geoPoints</span><span class="o">=</span><span class="p">{</span><span class="nx">points</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;;</span>
<span class="p">}</span>

<span class="nx">fop</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">({</span>
<span class="w">    </span><span class="c1">// component to delegate to</span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CustomPanel</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// tell FiftyOne you want to provide a custom panel</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">PluginComponentTypes</span><span class="p">.</span><span class="nx">Panel</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// used for the panel selector button</span>
<span class="w">    </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Map&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// only show the Map panel when the dataset has Geo data</span>
<span class="w">    </span><span class="nx">activator</span><span class="o">:</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">dataset</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dataset</span><span class="p">.</span><span class="nx">sampleFields</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span>
<span class="p">});</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="custom-operator-view-using-component-plugin">
<h4>Custom operator view using component plugin<a class="headerlink" href="#custom-operator-view-using-component-plugin" title="Permalink to this headline">¶</a></h4>
<p>Creating and registering a custom view type:</p>
<div class="highlight-jsx notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">fop</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;react&quot;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">CustomOperatorView</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// these props are provided to the component used as the view for an</span>
<span class="w">    </span><span class="c1">// operator input/output field</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">errors</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">onChange</span><span class="p">,</span><span class="w"> </span><span class="nx">path</span><span class="p">,</span><span class="w"> </span><span class="nx">schema</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span>

<span class="w">    </span><span class="c1">// schema may optionally include a view property which contains</span>
<span class="w">    </span><span class="c1">// attributes such label, description, caption for</span>
<span class="w">    </span><span class="c1">// the field. Schema will also provide a type property to indicate the type</span>
<span class="w">    </span><span class="c1">// of value expected for the field (i.e. string, number, object, array, etc.)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="nx">defaultValue</span><span class="p">,</span><span class="w"> </span><span class="nx">view</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">schema</span>

<span class="w">    </span><span class="c1">// Schema may also provide a default value for the field</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">setValue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nx">defaultValue</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">label</span><span class="w"> </span><span class="na">htmlFor</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}&gt;{</span><span class="nx">view</span><span class="p">.</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">input</span>
<span class="w">                </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
<span class="w">                </span><span class="na">id</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                </span><span class="na">type</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="p">}</span>
<span class="w">                </span><span class="na">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1">// onChange function passed as a prop can be called with</span>
<span class="w">                    </span><span class="c1">// path and value to set the current value for a field</span>
<span class="w">                    </span><span class="nx">onChange</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
<span class="w">                </span><span class="p">}}</span>
<span class="w">            </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">fop</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">({</span>
<span class="w">    </span><span class="c1">// unique name you can use later to refer to the component plugin</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;CustomOperatorView&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// component to delegate to</span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CustomOperatorView</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// tell FiftyOne you want to provide a custom component</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">PluginComponentTypes</span><span class="p">.</span><span class="nx">Component</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// activate this plugin unconditionally</span>
<span class="w">    </span><span class="nx">activator</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="p">});</span>
</pre></div></td></tr></table></div>
</div>
<p>Using the custom component as the view for a Python operator field:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.operators</span> <span class="k">as</span> <span class="nn">foo</span>
<span class="kn">import</span> <span class="nn">fiftyone.operators.types</span> <span class="k">as</span> <span class="nn">types</span>

<span class="k">class</span> <span class="nc">CustomViewOperator</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;custom_view_operator&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Custom View Operator&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span>
            <span class="s2">&quot;name&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;FiftyOne&quot;</span><span class="p">,</span>
            <span class="c1"># provide the name of a registered component plugin</span>
            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;CustomOperatorView&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="fiftyone-app-state">
<h3>FiftyOne App state<a class="headerlink" href="#fiftyone-app-state" title="Permalink to this headline">¶</a></h3>
<p>There are a few ways to manage the state of your plugin. By default you should
defer to existing state management in the FiftyOne App.</p>
<p>For example, if you want to allow users to select samples, you can use the
<code class="code docutils literal notranslate"><span class="pre">&#64;fiftyone/state</span></code> package.</p>
<div class="section" id="interactivity-and-state">
<h4>Interactivity and state<a class="headerlink" href="#interactivity-and-state" title="Permalink to this headline">¶</a></h4>
<p>If your plugin only has internal state, you can use existing state management
to achieve your desired UX. For example, in a 3D visualizer, you might want to
use <a class="reference external" href="https://threejs.org">Three.js</a> and its object model, events, and state
management. Or just use your own React hooks to maintain your plugin components
internal state.</p>
<p>If you want to allow users to interact with other aspects of FiftyOne through
your plugin, you can use the <code class="code docutils literal notranslate"><span class="pre">&#64;fiftyone/state</span></code> package:</p>
<div class="highlight-jsx notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1">// note: similar to react hooks, these must be used in the context</span>
<span class="c1">// of a React component</span>

<span class="c1">// select a dataset</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">selectLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fos</span><span class="p">.</span><span class="nx">useOnSelectLabel</span><span class="p">();</span>

<span class="c1">// in a callback</span>
<span class="nx">selectLabel</span><span class="p">({</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;labelId&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">field</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;fieldName&quot;</span><span class="w"> </span><span class="p">});</span>
</pre></div></td></tr></table></div>
</div>
<p>The example above shows how you can coordinate or surface existing features of
FiftyOne through your plugin via the <code class="code docutils literal notranslate"><span class="pre">&#64;fiftyone/state</span></code> package. This package
provides hooks to access and modify the state of the FiftyOne App.</p>
</div>
<div class="section" id="recoil-atoms-and-selectors">
<h4>Recoil, atoms, and selectors<a class="headerlink" href="#recoil-atoms-and-selectors" title="Permalink to this headline">¶</a></h4>
<p>You can also use a combination of your own and fiftyone’s recoil <code class="code docutils literal notranslate"><span class="pre">atoms</span></code> and
<code class="code docutils literal notranslate"><span class="pre">selectors</span></code>.</p>
<p>Here’s an example the combines both approaches in a hook that you could call
from anywhere where hooks are supported (almost all plugin component types).</p>
<div class="highlight-jsx notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">atom</span><span class="p">,</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">,</span><span class="w"> </span><span class="nx">useRecoilState</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;recoil&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">myPluginmyPluginFieldsState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">atom</span><span class="p">({</span>
<span class="w">    </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;myPluginFields&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">})</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">useMyHook</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">dataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">fos</span><span class="p">.</span><span class="nx">dataset</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">fields</span><span class="p">,</span><span class="w"> </span><span class="nx">setFields</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilState</span><span class="p">(</span><span class="nx">myPluginFieldsState</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">dataset</span><span class="p">,</span>
<span class="w">        </span><span class="nx">fields</span><span class="p">,</span>
<span class="w">        </span><span class="nx">addField</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">field</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setFields</span><span class="p">([...</span><span class="nx">fields</span><span class="p">,</span><span class="w"> </span><span class="nx">field</span><span class="p">])</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="id29">
<h3>Panel state<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<p>Plugins that provide <code class="code docutils literal notranslate"><span class="pre">PluginComponentTypes.Panel</span></code> components should use the
<code class="code docutils literal notranslate"><span class="pre">&#64;fiftyone/spaces</span></code> package to manage their state. This package provides hooks
to allow plugins to manage the state of individual panel instances.</p>
<div class="highlight-jsx notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">usePanelStatePartial</span><span class="p">,</span><span class="w"> </span><span class="nx">usePanelTitle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/spaces&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Button</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@fiftyone/components&#39;</span><span class="p">;</span>

<span class="c1">// in your panel component, you can use the usePanelStatePartial hook</span>
<span class="c1">// to read and write to the panel state</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">MyPanel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">setState</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">usePanelStatePartial</span><span class="p">(</span><span class="s1">&#39;choice&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">setTitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">usePanelTitle</span><span class="p">();</span>

<span class="w">    </span><span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">setTitle</span><span class="p">(</span><span class="sb">`My Panel: </span><span class="si">${</span><span class="nx">state</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">]);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Choice</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">state</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setState</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)}&gt;</span><span class="nx">A</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setState</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)}&gt;</span><span class="nx">B</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="reading-settings-in-your-plugin">
<h3>Reading settings in your plugin<a class="headerlink" href="#reading-settings-in-your-plugin" title="Permalink to this headline">¶</a></h3>
<p>Plugins may support two styles of configuration settings:</p>
<ul class="simple">
<li><p>System-wide plugin settings under the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> key of your
<a class="reference internal" href="../user_guide/config.html#configuring-fiftyone-app"><span class="std std-ref">App config</span></a></p></li>
<li><p>Dataset-specific plugin settings for any subset of the above values on a
<a class="reference internal" href="../user_guide/using_datasets.html#dataset-app-config"><span class="std std-ref">dataset’s App config</span></a>.</p></li>
</ul>
<p>Plugin settings are used, for example, to allow the user to configure the
default camera position of FiftyOne’s builtin
<a class="reference internal" href="../user_guide/app.html#app-3d-visualizer-config"><span class="std std-ref">3D visualizer</span></a>.</p>
<p>Here’s an example of a system-wide plugin setting:</p>
<div class="highlight-js notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1">// app_config.json</span>
<span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;plugins&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;my-plugin&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;mysetting&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
<p>And here’s how to customize that setting for a particular dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">plugins</span><span class="p">[</span><span class="s2">&quot;my-plugin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mysetting&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">}</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>In your plugin implementation, you can read settings with the <code class="code docutils literal notranslate"><span class="pre">useSettings</span></code>
hook:</p>
<div class="highlight-js notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">mysetting</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fop</span><span class="p">.</span><span class="nx">useSettings</span><span class="p">(</span><span class="s2">&quot;my-plugin&quot;</span><span class="p">);</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the <a class="reference internal" href="../user_guide/config.html#configuring-plugins"><span class="std std-ref">this page</span></a> page for more information
about configuring plugins.</p>
</div>
</div>
<div class="section" id="querying-fiftyone">
<h3>Querying FiftyOne<a class="headerlink" href="#querying-fiftyone" title="Permalink to this headline">¶</a></h3>
<p>A typical use case for a JS plugin is to provide a unique way of visualizing
FiftyOne data. However some plugins may need to also fetch data in a unique way
to efficiently visualize it.</p>
<p>For example, a <code class="code docutils literal notranslate"><span class="pre">PluginComponentType.Panel</span></code> plugin rendering a map of geo points
may need to fetch data relative to where the user is currently viewing. In
MongoDB, such a query would look like this:</p>
<div class="highlight-js notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nx">$geoNear</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">near</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Point&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">coordinates</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="mf">73.99279</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mf">40.719296</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">maxDistance</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">    </span><span class="nx">query</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Parks&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
<p>In a FiftyOne plugin this same query can be performed using the
<code class="code docutils literal notranslate"><span class="pre">useAggregation()</span></code> method of the plugin SDK:</p>
<div class="highlight-jsx notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">fop</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">fos</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/state&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">foa</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/aggregations&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">recoil</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;recoil&quot;</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">useGeoDataNear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">dataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">fos</span><span class="p">.</span><span class="nx">dataset</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">fos</span><span class="p">.</span><span class="nx">view</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">fos</span><span class="p">.</span><span class="nx">filters</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">aggregate</span><span class="p">,</span><span class="w"> </span><span class="nx">points</span><span class="p">,</span><span class="w"> </span><span class="nx">isLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">foa</span><span class="p">.</span><span class="nx">useAggregation</span><span class="p">({</span>
<span class="w">        </span><span class="nx">dataset</span><span class="p">,</span>
<span class="w">        </span><span class="nx">filters</span><span class="p">,</span>
<span class="w">        </span><span class="nx">view</span><span class="p">,</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">availableFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">findAvailableFields</span><span class="p">(</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">sampleFields</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">selectedField</span><span class="p">,</span><span class="w"> </span><span class="nx">setField</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">useState</span><span class="p">(</span><span class="nx">availableFields</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>

<span class="w">    </span><span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">aggregate</span><span class="p">([</span>
<span class="w">            </span><span class="ow">new</span><span class="w"> </span><span class="nx">foa</span><span class="p">.</span><span class="nx">aggregations</span><span class="p">.</span><span class="nx">Values</span><span class="p">({</span>
<span class="w">                </span><span class="nx">fieldOrExpr</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;location.point.coordinates&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="p">}),</span>
<span class="w">        </span><span class="p">]);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">points</span><span class="p">,</span>
<span class="w">        </span><span class="nx">isLoading</span><span class="p">,</span>
<span class="w">        </span><span class="nx">setField</span><span class="p">,</span>
<span class="w">        </span><span class="nx">availableFields</span><span class="p">,</span>
<span class="w">        </span><span class="nx">selectedField</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">MapPlugin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">points</span><span class="p">,</span><span class="w"> </span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setField</span><span class="p">,</span><span class="w"> </span><span class="nx">availableFields</span><span class="p">,</span><span class="w"> </span><span class="nx">selectedField</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="nx">useGeoDataNear</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Map</span>
<span class="w">            </span><span class="na">points</span><span class="o">=</span><span class="p">{</span><span class="nx">points</span><span class="p">}</span>
<span class="w">            </span><span class="na">onSelectField</span><span class="o">=</span><span class="p">{(</span><span class="nx">f</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setField</span><span class="p">(</span><span class="nx">f</span><span class="p">)}</span>
<span class="w">            </span><span class="na">selectedField</span><span class="o">=</span><span class="p">{</span><span class="nx">selectedField</span><span class="p">}</span>
<span class="w">            </span><span class="na">locationFields</span><span class="o">=</span><span class="p">{</span><span class="nx">availableFields</span><span class="p">}</span>
<span class="w">        </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">fop</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">({</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;MapPlugin&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Map&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">activator</span><span class="o">:</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">dataset</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">findAvailableFields</span><span class="p">(</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">fields</span><span class="p">).</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="p">});</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="plugin-runtime">
<span id="id30"></span><h2>Plugin runtime<a class="headerlink" href="#plugin-runtime" title="Permalink to this headline">¶</a></h2>
<div class="section" id="js-runtime">
<h3>JS runtime<a class="headerlink" href="#js-runtime" title="Permalink to this headline">¶</a></h3>
<p>In JS, plugins are loaded from your
<a class="reference internal" href="using_plugins.html#plugins-directory"><span class="std std-ref">plugins directory</span></a> into the browser. The FiftyOne App
server finds these plugins by looking for <code class="code docutils literal notranslate"><span class="pre">package.json</span></code> files that include
<code class="code docutils literal notranslate"><span class="pre">fiftyone</span></code> as a property. This <code class="code docutils literal notranslate"><span class="pre">fiftyone</span></code> property describes where the plugin
executable (dist) is.</p>
</div>
<div class="section" id="python-runtime">
<h3>Python runtime<a class="headerlink" href="#python-runtime" title="Permalink to this headline">¶</a></h3>
<p>Python operators are executed in two ways:</p>
<div class="section" id="immediate-execution">
<h4>Immediate execution<a class="headerlink" href="#immediate-execution" title="Permalink to this headline">¶</a></h4>
<p>By default, all operations are executed by the plugin server immediately after
they are triggered, either programmatically or by the user in the App.</p>
<p>The plugin server is launched by the FiftyOne App as a subprocess that is
responsible for loading plugins and executing them. The plugin server is only
accessible via ipc. Its interface (similar to JSON rpc) allows for functions to
be called over interprocess communication. This allows for user python code to
be isolated from core code. It also allows for the operating system to manage
the separate process as it exists in the same process tree as the root process
(ipython, Jupyter, etc).</p>
</div>
<div class="section" id="id31">
<h4>Delegated execution<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<p>Python operations may also be <a class="reference internal" href="#operator-delegated-execution"><span class="std std-ref">delegated</span></a>
for execution in the background.</p>
<p>When an operation is delegated, the following happens:</p>
<ol class="arabic simple">
<li><p>The operation’s <a class="reference internal" href="#operator-execution-context"><span class="std std-ref">execution context</span></a> is
serialized and stored in the database</p></li>
<li><p>The <a class="reference internal" href="using_plugins.html#delegated-orchestrator"><span class="std std-ref">connected orchestrator</span></a> picks up the
task and executes it when resources are available</p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="advanced-usage">
<span id="plugin-advanced-usage"></span><h2>Advanced usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="storing-custom-runs">
<h3>Storing custom runs<a class="headerlink" href="#storing-custom-runs" title="Permalink to this headline">¶</a></h3>
<p>When users execute builtin methods like
<a class="reference internal" href="../user_guide/annotation.html#fiftyone-annotation"><span class="std std-ref">annotation</span></a>,
<a class="reference internal" href="../user_guide/evaluation.html#evaluating-models"><span class="std std-ref">evaluation</span></a>, and
<a class="reference internal" href="../brain.html#fiftyone-brain"><span class="std std-ref">brain methods</span></a> on their datasets, certain configuration
and results information is stored on the dataset that can be accessed later;
for example, see <a class="reference internal" href="../brain.html#brain-managing-runs"><span class="std std-ref">managing brain runs</span></a>.</p>
<p>FiftyOne also provides the ability to store <em>custom runs</em> on datasets, which
can be used by plugin developers to persist arbitrary application-specific
information that can be accessed later by users and/or plugins.</p>
<p>The interface for creating custom runs is simple:</p>
<div class="highlight-py notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;custom-runs-example&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">persistent</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>

<span class="c1"># Also possible</span>
<span class="c1"># config = fo.RunConfig(foo=&quot;bar&quot;)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">register_run</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run_results</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="s2">&quot;eggs&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>

<span class="c1"># Also possible</span>
<span class="c1"># results = fo.RunResults(dataset, config, &quot;custom&quot;, spam=&quot;eggs&quot;)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">save_run_results</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunConfig" title="fiftyone.core.runs.RunConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunConfig</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunResults" title="fiftyone.core.runs.RunResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunResults</span></code></a> can store any JSON
serializable values.</p>
<p><a class="reference internal" href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunConfig" title="fiftyone.core.runs.RunConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunConfig</span></code></a> documents must be less
than 16MB, although they are generally far smaller as they are intended to
store only a handful of simple parameters.</p>
<p><a class="reference internal" href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunResults" title="fiftyone.core.runs.RunResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunResults</span></code></a> instances are stored in
<a class="reference external" href="https://www.mongodb.com/docs/manual/core/gridfs">GridFS</a> and may exceed
16MB. They are only loaded when specifically accessed by a user.</p>
</div>
<p>You can access custom runs at any time as follows:</p>
<div class="highlight-py notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;custom-runs-example&quot;</span><span class="p">)</span>

<span class="n">info</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_run_info</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_run_results</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;key&quot;: &quot;custom&quot;,
    &quot;version&quot;: &quot;0.22.3&quot;,
    &quot;timestamp&quot;: &quot;2023-10-26T13:29:20.837595&quot;,
    &quot;config&quot;: {
        &quot;type&quot;: &quot;run&quot;,
        &quot;method&quot;: null,
        &quot;cls&quot;: &quot;fiftyone.core.runs.RunConfig&quot;,
        &quot;foo&quot;: &quot;bar&quot;
    }
}
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;cls&quot;: &quot;fiftyone.core.runs.RunResults&quot;,
    &quot;spam&quot;: &quot;eggs&quot;
}
</pre></div>
</div>
</div>
<div class="section" id="managing-custom-runs">
<span id="id32"></span><h3>Managing custom runs<a class="headerlink" href="#managing-custom-runs" title="Permalink to this headline">¶</a></h3>
<p>FiftyOne provides a variety of methods that you can use to manage custom runs
stored on datasets.</p>
<p>Call
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.list_runs" title="fiftyone.core.collections.SampleCollection.list_runs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_runs()</span></code></a>
to see the available custom run keys on a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">list_runs</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>Use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.get_run_info" title="fiftyone.core.collections.SampleCollection.get_run_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_run_info()</span></code></a>
to retrieve information about the configuration of a custom run:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_run_info</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Use <a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.init_run" title="fiftyone.core.collections.SampleCollection.init_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_run()</span></code></a>
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.register_run" title="fiftyone.core.collections.SampleCollection.register_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register_run()</span></code></a>
to create a new custom run on a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">register_run</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.update_run_config" title="fiftyone.core.collections.SampleCollection.update_run_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update_run_config()</span></code></a>
to update the run config associated with an existing custom run:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">update_run_config</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.init_run_results" title="fiftyone.core.collections.SampleCollection.init_run_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_run_results()</span></code></a>
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.save_run_results" title="fiftyone.core.collections.SampleCollection.save_run_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save_run_results()</span></code></a>
to store run results for a custom run:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="s2">&quot;eggs&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">save_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>

<span class="c1"># update existing results</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_run_results" title="fiftyone.core.collections.SampleCollection.load_run_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_run_results()</span></code></a>
to load the results for a custom run:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.rename_run" title="fiftyone.core.collections.SampleCollection.rename_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_run()</span></code></a>
to rename the run key associated with an existing custom run:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">rename_run</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">new_run_key</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_run" title="fiftyone.core.collections.SampleCollection.delete_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_run()</span></code></a>
to delete the record of a custom run from a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">delete_run</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
</div>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ts-api.html" class="btn btn-neutral float-right" title="TypeScript API Reference" accesskey="n" rel="next">Next <img src="../_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="using_plugins.html" class="btn btn-neutral" title="Using Plugins" accesskey="p" rel="prev"><img src="../_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  
</footer>
          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Developing Plugins</a><ul>
<li><a class="reference internal" href="#design-overview">Design overview</a><ul>
<li><a class="reference internal" href="#plugin-types">Plugin types</a></li>
<li><a class="reference internal" href="#panels">Panels</a></li>
<li><a class="reference internal" href="#operators">Operators</a></li>
<li><a class="reference internal" href="#components">Components</a></li>
</ul>
</li>
<li><a class="reference internal" href="#development-setup">Development setup</a></li>
<li><a class="reference internal" href="#anatomy-of-a-plugin">Anatomy of a plugin</a><ul>
<li><a class="reference internal" href="#fiftyone-yml">fiftyone.yml</a></li>
<li><a class="reference internal" href="#python-plugins">Python plugins</a></li>
<li><a class="reference internal" href="#js-plugins">JS plugins</a></li>
</ul>
</li>
<li><a class="reference internal" href="#publishing-plugins">Publishing plugins</a></li>
<li><a class="reference internal" href="#quick-examples">Quick examples</a><ul>
<li><a class="reference internal" href="#example-plugin">Example plugin</a></li>
<li><a class="reference internal" href="#example-python-operator">Example Python operator</a></li>
<li><a class="reference internal" href="#example-python-panel">Example Python panel</a></li>
<li><a class="reference internal" href="#example-js-operator">Example JS operator</a></li>
</ul>
</li>
<li><a class="reference internal" href="#developing-operators">Developing operators</a><ul>
<li><a class="reference internal" href="#operator-interface">Operator interface</a></li>
<li><a class="reference internal" href="#operator-config">Operator config</a></li>
<li><a class="reference internal" href="#execution-context">Execution context</a></li>
<li><a class="reference internal" href="#operator-inputs">Operator inputs</a></li>
<li><a class="reference internal" href="#delegated-execution">Delegated execution</a><ul>
<li><a class="reference internal" href="#execution-options">Execution options</a></li>
<li><a class="reference internal" href="#dynamic-execution-options">Dynamic execution options</a></li>
<li><a class="reference internal" href="#forced-delegation">Forced delegation</a></li>
<li><a class="reference internal" href="#reporting-progress">Reporting progress</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operator-execution">Operator execution</a><ul>
<li><a class="reference internal" href="#synchronous-execution">Synchronous execution</a></li>
<li><a class="reference internal" href="#asynchronous-execution">Asynchronous execution</a></li>
<li><a class="reference internal" href="#operator-composition">Operator composition</a></li>
<li><a class="reference internal" href="#generator-execution">Generator execution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#accessing-secrets">Accessing secrets</a></li>
<li><a class="reference internal" href="#operator-outputs">Operator outputs</a></li>
<li><a class="reference internal" href="#operator-placement">Operator placement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#developing-panels">Developing panels</a><ul>
<li><a class="reference internal" href="#panel-interface">Panel interface</a></li>
<li><a class="reference internal" href="#panel-config">Panel config</a></li>
<li><a class="reference internal" href="#panel-execution-context">Execution context</a></li>
<li><a class="reference internal" href="#panel-state-and-data">Panel state and data</a><ul>
<li><a class="reference internal" href="#basic-structure">Basic structure</a></li>
<li><a class="reference internal" href="#panel-state">Panel state</a></li>
<li><a class="reference internal" href="#panel-data">Panel data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#execution-store">Execution store</a></li>
<li><a class="reference internal" href="#saved-workspaces">Saved workspaces</a></li>
<li><a class="reference internal" href="#panel-accessing-secrets">Accessing secrets</a></li>
<li><a class="reference internal" href="#common-patterns">Common patterns</a><ul>
<li><a class="reference internal" href="#callbacks">Callbacks</a></li>
<li><a class="reference internal" href="#dropdown-menus">Dropdown menus</a></li>
<li><a class="reference internal" href="#interactive-plots">Interactive plots</a></li>
<li><a class="reference internal" href="#walkthroughs">Walkthroughs</a></li>
<li><a class="reference internal" href="#displaying-multimedia">Displaying multimedia</a></li>
<li><a class="reference internal" href="#type-hints">Type hints</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#developing-js-plugins">Developing JS plugins</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#component-types">Component types</a></li>
<li><a class="reference internal" href="#panels-and-components">Panels and Components</a><ul>
<li><a class="reference internal" href="#hello-world-panel">Hello world panel</a></li>
<li><a class="reference internal" href="#adding-a-custom-panel">Adding a custom Panel</a></li>
<li><a class="reference internal" href="#custom-operator-view-using-component-plugin">Custom operator view using component plugin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fiftyone-app-state">FiftyOne App state</a><ul>
<li><a class="reference internal" href="#interactivity-and-state">Interactivity and state</a></li>
<li><a class="reference internal" href="#recoil-atoms-and-selectors">Recoil, atoms, and selectors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id29">Panel state</a></li>
<li><a class="reference internal" href="#reading-settings-in-your-plugin">Reading settings in your plugin</a></li>
<li><a class="reference internal" href="#querying-fiftyone">Querying FiftyOne</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plugin-runtime">Plugin runtime</a><ul>
<li><a class="reference internal" href="#js-runtime">JS runtime</a></li>
<li><a class="reference internal" href="#python-runtime">Python runtime</a><ul>
<li><a class="reference internal" href="#immediate-execution">Immediate execution</a></li>
<li><a class="reference internal" href="#id31">Delegated execution</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-usage">Advanced usage</a><ul>
<li><a class="reference internal" href="#storing-custom-runs">Storing custom runs</a></li>
<li><a class="reference internal" href="#managing-custom-runs">Managing custom runs</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
         <script src="../_static/jquery.js"></script>
         <script src="../_static/underscore.js"></script>
         <script src="../_static/doctools.js"></script>
         <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
         <script src="../_static/js/voxel51-website.js"></script>
         <script src="../_static/js/custom.js"></script>
     

  

  <script type="text/javascript" src="../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->


<footer class="footer-wrapper" id="docs-tutorials-resources">
  <div class="footer pytorch-container">
    <div class="footer__logo">
      <a href="https://voxel51.com/"
        ><img
          src="https://voxel51.com/images/logo/voxel51-logo-horz-color-600dpi.png"
      /></a>
    </div>

    <div class="footer__address">
      330 E Liberty St<br />
      Ann Arbor, MI 48104<br />
      <a href="mailto:info@voxel51.com">info@voxel51.com</a>
    </div>

    <!--
    <div class="footer__contact">
      <a href="mailto:info@voxel51.com">info@voxel51.com</a>
    </div>
    -->

    <div class="footer__links">
      <div class="footer__links--col2">
        <p class="nav__item--brand">Products</p>
        <a href="https://voxel51.com/fiftyone/">FiftyOne</a>
        <a href="https://voxel51.com/fiftyone-teams/">FiftyOne Teams</a>
        <a href="https://voxel51.com/computer-vision-use-cases/">Use Cases</a>
        <a href="https://voxel51.com/success-stories/">Success Stories</a>
      </div>
      <div class="footer__links--col3">
        <p class="nav__item--brand">Resources</p>
        <a href="https://voxel51.com/blog/">Blog</a>
        <a href="https://docs.voxel51.com/">Docs</a>
        <a href="https://github.com/voxel51/">GitHub</a>
        <a href="https://community.voxel51.com">Discord</a>
        <a href="https://voxel51.com/ourstory/">About Us</a>
        <a href="https://voxel51.com/computer-vision-events/">Events</a>
        <a href="https://voxel51.com/jobs/">Careers</a>
        <a href="https://voxel51.com/press/">Press</a>
      </div>
    </div>

    <div class="footer__icons">
      <ul class="list-inline">
        <li>
          <a href="https://www.linkedin.com/company/voxel51/">
            <i class="fa-brands fa-linkedin"></i>
          </a>
        </li>
        <li>
          <a href="https://github.com/voxel51/">
            <i class="fa-brands fa-github"></i>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/voxel51">
            <i class="fa-brands fa-twitter"></i>
          </a>
        </li>
        <li>
          <a href="https://www.facebook.com/voxel51/">
            <i class="fa-brands fa-facebook"></i>
          </a>
        </li>
      </ul>
    </div>

    <div class="footer__copyright">
      <ul class="list-inline">
        <li>&copy; 2024 Voxel51 Inc.</li>
        <li>
          <a href="https://voxel51.com/privacy/">Privacy Policy</a>
        </li>
        <li>
          <a href="https://voxel51.com/terms/">Terms of Service</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<!-- https://buttons.github.io -->
<script async defer src="https://buttons.github.io/buttons.js" ></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XD15NFRY3M" ></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-XD15NFRY3M");
</script>

<script>
  function open_modal(modal_id, modal_closer_id) {
    // Get the modal
    let the_modal = document.getElementById(modal_id);

    the_modal.style.display = "flex";
    document.body.style.overflow = "hidden";

    let the_modal_closer = document.getElementById(modal_closer_id);

    // When the user clicks on <span> (x), close the modal
    the_modal_closer &&
      (the_modal_closer.onclick = function () {
        the_modal.style.display = "none";
      });

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == the_modal) {
        the_modal.style.display = "none";
        document.body.style.overflow = "unset";
        window.onclick = undefined;
      }
    };
  }
</script>

<!-- bigpicture.io -->
<script>
  !(function (e, t, i) {
    var r = (e.bigPicture = e.bigPicture || []);
    if (!r.initialized)
      if (r.invoked)
        e.console &&
          console.error &&
          console.error("BigPicture.io snippet included twice.");
      else {
        (r.invoked = !0),
          (r.SNIPPET_VERSION = 1.5),
          (r.handler = function (e) {
            if (void 0 !== r.callback)
              try {
                return r.callback(e);
              } catch (e) {}
          }),
          (r.eventList = ["mousedown", "mouseup", "click", "submit"]),
          (r.methods = [
            "track",
            "identify",
            "page",
            "group",
            "alias",
            "integration",
            "ready",
            "intelReady",
            "consentReady",
            "on",
            "off",
          ]),
          (r.factory = function (e) {
            return function () {
              var t = Array.prototype.slice.call(arguments);
              return t.unshift(e), r.push(t), r;
            };
          });
        for (var n = 0; n < r.methods.length; n++) {
          var o = r.methods[n];
          r[o] = r.factory(o);
        }
        r.getCookie = function (e) {
          var i = ("; " + t.cookie).split("; " + e + "=");
          return 2 == i.length && i.pop().split(";").shift();
        };
        var c = (r.isEditor = (function () {
          try {
            return (
              e.self !== e.top &&
              (new RegExp("app" + i, "ig").test(t.referrer) ||
                "edit" == r.getCookie("_bpr_edit"))
            );
          } catch (e) {
            return !1;
          }
        })());
        r.init = function (n, o) {
          if (((r.projectId = n), (r._config = o), !c))
            for (var a = 0; a < r.eventList.length; a++)
              e.addEventListener(r.eventList[a], r.handler, !0);
          var s = t.createElement("script");
          s.async = !0;
          var d = c ? "/editor/editor" : "/public-" + n;
          (s.src = "//cdn" + i + d + ".js"),
            t.getElementsByTagName("head")[0].appendChild(s);
        };
      }
  })(window, document, ".bigpicture.io");
  bigPicture.init("1646");
</script>


  

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>