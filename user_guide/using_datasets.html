


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using FiftyOne Datasets &mdash; FiftyOne 1.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../_static/css/voxel51-website.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Dataset Views" href="using_views.html" />
    <link rel="prev" title="Using Sample Parsers" href="dataset_creation/samples.html" />
<meta property="og:image" content="https://voxel51.com/wp-content/uploads/2024/03/3.24_webpages_Home_AV.png" />

<link
  href="https://fonts.googleapis.com/css?family=Palanquin:400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
  rel="stylesheet"
/>
<script src="https://tag.clearbitscripts.com/v1/pk_b9ed71c8234edd4f77326bcbfab5a4ca/tags.js"></script>


  
  <script src="../_static/js/modernizr.min.js"></script>

  
</head>


<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <nav id="nav__main" class="nav__main">
    <div class="nav__main__logo">
      <a href="https://voxel51.com/">
        <img
          src="https://voxel51.com/images/logo/voxel51-logo-horz-color-600dpi.png"
        />
      </a>
    </div>

    <div class="nav__spacer desktop_only"></div>

    <div id="nav__main__mobilebutton--on">
      <a href="javascript:void(0);" onclick="navMobileButton()">
        <i class="fa-solid fa-bars"></i>
      </a>
    </div>

    <div id="nav__main__mobilebutton--off">
      <a href="javascript:void(0);" onclick="navMobileButton()">
        <i class="fa-solid fa-times"></i>
      </a>
    </div>

    <div id="nav__main__items">
      <div class="nav__item nav__dropdown">
        <div class="nav__dropdown__trigger">Products</div>
        <div class="nav__item nav__dropdown__menu has-arrows">
          <div class="arrow-up--light-primary arrow-left20"></div>
          <ul>
            <li><a href="https://voxel51.com/fiftyone/">Open Source</a></li>
            <li><a href="https://voxel51.com/fiftyone-teams/">FiftyOne Teams</a></li>
            <li><a href="https://voxel51.com/computer-vision-use-cases/">Use Cases</a></li>
            <li><a href="https://voxel51.com/success-stories/">Success Stories</a></li>
          </ul>
        </div>
      </div>

      <div class="nav__item nav__dropdown">
        <div class="nav__dropdown__trigger">Learn</div>
        <div class="nav__item nav__dropdown__menu has-arrows">
          <div class="arrow-up--light-primary arrow-left20"></div>
          <ul>
            <li><a href="https://community.voxel51.com">Community Discord</a></li>
            <li><a href="https://voxel51.com/blog/">Blog</a></li>
            <li><a href="https://voxel51.com/computer-vision-events/">Events</a></li>
          </ul>
        </div>
      </div>

      <div class="nav__item">
        <a href="https://docs.voxel51.com/">Docs</a>
      </div>

      <div class="nav__item nav__dropdown">
        <div class="nav__dropdown__trigger">Company</div>
        <div class="nav__item nav__dropdown__menu has-arrows">
          <div class="arrow-up--light-primary arrow-left20"></div>
          <ul>
            <li><a href="https://voxel51.com/ourstory/">About Us</a></li>
            <li><a href="https://voxel51.com/jobs/">Careers</a></li>
            <li><a href="https://voxel51.com/talk-to-sales/">Talk to Sales</a></li>
          </ul>
        </div>
      </div>

      <div class="nav__item mobile_only">
        <a href="https://github.com/voxel51/fiftyone">GitHub</a>
      </div>

      <div class="nav__item desktop_only" id="octocat">
        <!-- https://buttons.github.io -->
        <a
          class="github-button"
          href="https://github.com/voxel51/fiftyone"
          data-color-scheme="no-preference: dark_high_contrast; light: dark_high_contrast; dark: dark_high_contrast;"
          data-size="large"
          data-show-count="true"
          aria-label="Star voxel51/fiftyone on GitHub"
          >Star</a
        >
      </div>

      <div class="nav__item full_nav_only">
        <a class="button-primary" href="https://voxel51.com/schedule-teams-workshop/" target="_blank"
          >Schedule a workshop</a
        >
      </div>
    </div>
  </nav>
</div>



<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

           <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../teams/index.html">FiftyOne Teams ðŸš€</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/index.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheets/index.html">Cheat Sheets</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basics.html">FiftyOne basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataset_creation/index.html">Loading datasets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_views.html">Dataset views</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html">Using the App</a></li>
<li class="toctree-l2"><a class="reference internal" href="groups.html">Grouped datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotation.html">Annotating datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">Evaluating models <strong style="color: hsl(25, 100%, 51%); font-size: 0.85em; vertical-align: top">NEW</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="using_aggregations.html">Using aggregations</a></li>
<li class="toctree-l2"><a class="reference internal" href="plots.html">Interactive plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="export_datasets.html">Exporting datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="draw_labels.html">Drawing labels on samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configuring FiftyOne</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#configuring-the-app">Configuring the App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dataset_zoo/index.html">Dataset Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_zoo/index.html">Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../brain.html">FiftyOne Brain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/index.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/fiftyone.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecation.html">Deprecation Notices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>
 
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
          <li><a href="index.html">FiftyOne User Guide</a> &gt;</li>
        
      <li>Using FiftyOne Datasets</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Contents
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content style-external-links">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <div class="section" id="using-fiftyone-datasets">
<span id="using-datasets"></span><h1>Using FiftyOne Datasets<a class="headerlink" href="#using-fiftyone-datasets" title="Permalink to this headline">Â¶</a></h1>
<p>After a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> has been loaded or created, FiftyOne provides powerful
functionality to inspect, search, and modify it from a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>-wide down to
a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> level.</p>
<p>The following sections provide details of how to use various aspects of a
FiftyOne <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>.</p>
<div class="section" id="datasets">
<h2>Datasets<a class="headerlink" href="#datasets" title="Permalink to this headline">Â¶</a></h2>
<p>Instantiating a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> object creates a new dataset.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;my_first_dataset&quot;</span><span class="p">)</span>
<span class="n">dataset2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;my_second_dataset&quot;</span><span class="p">)</span>
<span class="n">dataset3</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>  <span class="c1"># generates a default unique name</span>
</pre></div></td></tr></table></div>
</div>
<p>Check to see what datasets exist at any time via <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.list_datasets" title="fiftyone.core.dataset.list_datasets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_datasets()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">())</span>
<span class="c1"># [&#39;my_first_dataset&#39;, &#39;my_second_dataset&#39;, &#39;2020.08.04.12.36.29&#39;]</span>
</pre></div></td></tr></table></div>
</div>
<p>Load a dataset using
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.load_dataset" title="fiftyone.core.dataset.load_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_dataset()</span></code></a>.
Dataset objects are singletons. Cool!</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">_dataset2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;my_second_dataset&quot;</span><span class="p">)</span>
<span class="n">_dataset2</span> <span class="ow">is</span> <span class="n">dataset2</span>  <span class="c1"># True</span>
</pre></div></td></tr></table></div>
</div>
<p>If you try to load a dataset via <code class="code docutils literal notranslate"><span class="pre">Dataset(...)</span></code> or create a new dataset via
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.load_dataset" title="fiftyone.core.dataset.load_dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_dataset()</span></code></a> youâ€™re going to
have a bad time:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">_dataset2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;my_second_dataset&quot;</span><span class="p">)</span>
<span class="c1"># Dataset &#39;my_second_dataset&#39; already exists; use `fiftyone.load_dataset()`</span>
<span class="c1"># to load an existing dataset</span>

<span class="n">dataset4</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;my_fourth_dataset&quot;</span><span class="p">)</span>
<span class="c1"># DoesNotExistError: Dataset &#39;my_fourth_dataset&#39; not found</span>
</pre></div></td></tr></table></div>
</div>
<div class="section" id="dataset-media-type">
<span id="id1"></span><h3>Dataset media type<a class="headerlink" href="#dataset-media-type" title="Permalink to this headline">Â¶</a></h3>
<p>The media type of a dataset is determined by the
<a class="reference internal" href="#using-media-type"><span class="std std-ref">media type</span></a> of the <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> objects that it contains.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.media_type" title="fiftyone.core.dataset.Dataset.media_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">media_type</span></code></a> property of a
dataset is set based on the first sample added to it:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">media_type</span><span class="p">)</span>
<span class="c1"># None</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">media_type</span><span class="p">)</span>
<span class="c1"># &quot;image&quot;</span>
</pre></div></td></tr></table></div>
</div>
<p>Note that datasets are homogeneous; they must contain samples of the same media
type (except for <a class="reference internal" href="groups.html#groups"><span class="std std-ref">grouped datasets</span></a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/video.mp4&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="c1"># MediaTypeError: Sample media type &#39;video&#39; does not match dataset media type &#39;image&#39;</span>
</pre></div></td></tr></table></div>
</div>
<p>The following media types are available:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Media type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">image</span></code></p></td>
<td><p>Datasets that contain
<a class="reference internal" href="#image-datasets"><span class="std std-ref">images</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">video</span></code></p></td>
<td><p>Datasets that contain
<a class="reference internal" href="#video-datasets"><span class="std std-ref">videos</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">3d</span></code></p></td>
<td><p>Datasets that contain
<a class="reference internal" href="#d-datasets"><span class="std std-ref">3D scenes</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">point-cloud</span></code></p></td>
<td><p>Datasets that contain
<a class="reference internal" href="#point-cloud-datasets"><span class="std std-ref">point clouds</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">group</span></code></p></td>
<td><p>Datasets that contain
<a class="reference internal" href="groups.html#groups"><span class="std std-ref">grouped data slices</span></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dataset-persistence">
<span id="id2"></span><h3>Dataset persistence<a class="headerlink" href="#dataset-persistence" title="Permalink to this headline">Â¶</a></h3>
<p>By default, datasets are non-persistent. Non-persistent datasets are deleted
from the database each time the database is shut down. Note that FiftyOne does
not store the raw data in datasets directly (only the labels), so your source
files on disk are untouched.</p>
<p>To make a dataset persistent, set its
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.persistent" title="fiftyone.core.dataset.Dataset.persistent"><code class="xref py py-meth docutils literal notranslate"><span class="pre">persistent</span></code></a> property to
<code class="code docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Make the dataset persistent</span>
<span class="n">dataset1</span><span class="o">.</span><span class="n">persistent</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div></td></tr></table></div>
</div>
<p>Without closing your current Python shell, open a new shell and run:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="c1"># Verify that both persistent and non-persistent datasets still exist</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">())</span>
<span class="c1"># [&#39;my_first_dataset&#39;, &#39;my_second_dataset&#39;, &#39;2020.08.04.12.36.29&#39;]</span>
</pre></div></td></tr></table></div>
</div>
<p>All three datasets are still available, since the database connection has not
been terminated.</p>
<p>However, if you exit all processes with <code class="code docutils literal notranslate"><span class="pre">fiftyone</span></code> imported, then open a new
shell and run the command again:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="c1"># Verify that non-persistent datasets have been deleted</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">())</span>
<span class="c1"># [&#39;my_first_dataset&#39;]</span>
</pre></div></td></tr></table></div>
</div>
<p>youâ€™ll see that the <code class="code docutils literal notranslate"><span class="pre">my_second_dataset</span></code> and <code class="code docutils literal notranslate"><span class="pre">2020.08.04.12.36.29</span></code> datasets have
been deleted because they were not persistent.</p>
</div>
<div class="section" id="dataset-version">
<span id="id3"></span><h3>Dataset version<a class="headerlink" href="#dataset-version" title="Permalink to this headline">Â¶</a></h3>
<p>The version of the <code class="code docutils literal notranslate"><span class="pre">fiftyone</span></code> package for which a dataset is formatted is
stored in the <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.version" title="fiftyone.core.dataset.Dataset.version"><code class="xref py py-meth docutils literal notranslate"><span class="pre">version</span></code></a> property
of the dataset.</p>
<p>If you upgrade your <code class="code docutils literal notranslate"><span class="pre">fiftyone</span></code> package and then load a dataset that was created
with an older version of the package, it will be automatically migrated to the
new package version (if necessary) the first time you load it.</p>
</div>
<div class="section" id="dataset-tags">
<span id="id4"></span><h3>Dataset tags<a class="headerlink" href="#dataset-tags" title="Permalink to this headline">Â¶</a></h3>
<p>All <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances have a
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.tags" title="fiftyone.core.dataset.Dataset.tags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tags</span></code></a> property that you can use to
store an arbitrary list of string tags.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="c1"># Add some tags</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;projectA&quot;</span><span class="p">]</span>

<span class="c1"># Edit the tags</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;projectB&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.save" title="fiftyone.core.dataset.Dataset.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.save()</span></code></a> after updating
the datasetâ€™s <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.tags" title="fiftyone.core.dataset.Dataset.tags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tags</span></code></a> property
in-place to save the changes to the database.</p>
</div>
</div>
<div class="section" id="dataset-stats">
<span id="id5"></span><h3>Dataset stats<a class="headerlink" href="#dataset-stats" title="Permalink to this headline">Â¶</a></h3>
<p>You can use the <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.stats" title="fiftyone.core.dataset.Dataset.stats"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stats()</span></code></a> method on
a dataset to obtain information about the size of the dataset on disk,
including its metadata in the database and optionally the size of the physical
media on disk:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="n">fo</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">include_media</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &#39;samples_count&#39;: 200,
    &#39;samples_bytes&#39;: 1290762,
    &#39;samples_size&#39;: &#39;1.2MB&#39;,
    &#39;media_bytes&#39;: 24412374,
    &#39;media_size&#39;: &#39;23.3MB&#39;,
    &#39;total_bytes&#39;: 25703136,
    &#39;total_size&#39;: &#39;24.5MB&#39;,
}
</pre></div>
</div>
<p>You can also invoke
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.stats" title="fiftyone.core.collections.SampleCollection.stats"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stats()</span></code></a> on a
<a class="reference internal" href="using_views.html#using-views"><span class="std std-ref">dataset view</span></a> to retrieve stats for a specific subset of
the dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>

<span class="n">fo</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">include_media</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &#39;samples_count&#39;: 10,
    &#39;samples_bytes&#39;: 10141,
    &#39;samples_size&#39;: &#39;9.9KB&#39;,
    &#39;media_bytes&#39;: 1726296,
    &#39;media_size&#39;: &#39;1.6MB&#39;,
    &#39;total_bytes&#39;: 1736437,
    &#39;total_size&#39;: &#39;1.7MB&#39;,
}
</pre></div>
</div>
</div>
<div class="section" id="storing-info">
<span id="id6"></span><h3>Storing info<a class="headerlink" href="#storing-info" title="Permalink to this headline">Â¶</a></h3>
<p>All <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances have an
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.info" title="fiftyone.core.dataset.Dataset.info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">info</span></code></a> property, which contains a
dictionary that you can use to store any JSON-serializable information you wish
about your dataset.</p>
<p>Datasets can also store more specific types of ancillary information such as
<a class="reference internal" href="#storing-classes"><span class="std std-ref">class lists</span></a> and
<a class="reference internal" href="#storing-mask-targets"><span class="std std-ref">mask targets</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="c1"># Store a class list in the dataset&#39;s info</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;dataset_source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Edit existing info</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.save" title="fiftyone.core.dataset.Dataset.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.save()</span></code></a> after updating
the datasetâ€™s <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.info" title="fiftyone.core.dataset.Dataset.info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">info</span></code></a> property
in-place to save the changes to the database.</p>
</div>
</div>
<div class="section" id="dataset-app-config">
<span id="id7"></span><h3>Dataset App config<a class="headerlink" href="#dataset-app-config" title="Permalink to this headline">Â¶</a></h3>
<p>All <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances have an
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.app_config" title="fiftyone.core.dataset.Dataset.app_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app_config</span></code></a> property that
contains a <a class="reference internal" href="../api/fiftyone.core.odm.dataset.html#fiftyone.core.odm.dataset.DatasetAppConfig" title="fiftyone.core.odm.dataset.DatasetAppConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetAppConfig</span></code></a> that you can use to store dataset-specific
settings that customize how the dataset is visualized in the
<a class="reference internal" href="app.html#fiftyone-app"><span class="std std-ref">FiftyOne App</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="c1"># View the dataset&#39;s current App config</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="section" id="multiple-media-fields">
<span id="dataset-app-config-media-fields"></span><h4>Multiple media fields<a class="headerlink" href="#multiple-media-fields" title="Permalink to this headline">Â¶</a></h4>
<p>You can declare <a class="reference internal" href="app.html#app-multiple-media-fields"><span class="std std-ref">multiple media fields</span></a> on a
dataset and configure which field is used by various components of the App by
default:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.utils.image</span> <span class="k">as</span> <span class="nn">foui</span>

<span class="c1"># Generate some thumbnail images</span>
<span class="n">foui</span><span class="o">.</span><span class="n">transform_images</span><span class="p">(</span>
    <span class="n">dataset</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span>
    <span class="n">output_field</span><span class="o">=</span><span class="s2">&quot;thumbnail_path&quot;</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/thumbnails&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Configure when to use each field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">media_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;filepath&quot;</span><span class="p">,</span> <span class="s2">&quot;thumbnail_path&quot;</span><span class="p">]</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">grid_media_field</span> <span class="o">=</span> <span class="s2">&quot;thumbnail_path&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>You can set <code class="docutils literal notranslate"><span class="pre">media_fallback=True</span></code> if you want the App to fallback to the
<code class="docutils literal notranslate"><span class="pre">filepath</span></code> field if an alternate media field is missing for a particular
sample in the grid and/or modal:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Fallback to `filepath` if an alternate media field is missing</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">media_fallback</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="custom-color-scheme">
<span id="dataset-app-config-color-scheme"></span><h4>Custom color scheme<a class="headerlink" href="#custom-color-scheme" title="Permalink to this headline">Â¶</a></h4>
<p>You can store a <a class="reference internal" href="app.html#app-color-schemes"><span class="std std-ref">custom color scheme</span></a> on a dataset
that should be used by default whenever the dataset is loaded in the App:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span>
    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">eval_key</span><span class="o">=</span><span class="s2">&quot;eval&quot;</span>
<span class="p">)</span>

<span class="c1"># Store a custom color scheme</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">ColorScheme</span><span class="p">(</span>
    <span class="n">color_pool</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span> <span class="s2">&quot;#00ff00&quot;</span><span class="p">,</span> <span class="s2">&quot;#0000ff&quot;</span><span class="p">,</span> <span class="s2">&quot;pink&quot;</span><span class="p">,</span> <span class="s2">&quot;yellowgreen&quot;</span><span class="p">],</span>
    <span class="n">color_by</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
            <span class="s2">&quot;colorByAttribute&quot;</span><span class="p">:</span> <span class="s2">&quot;eval&quot;</span><span class="p">,</span>
            <span class="s2">&quot;valueColors&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;fn&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#0000ff&quot;</span><span class="p">},</span>  <span class="c1"># false negatives: blue</span>
                <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;tp&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#00ff00&quot;</span><span class="p">},</span>  <span class="c1"># true positives: green</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;predictions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;colorByAttribute&quot;</span><span class="p">:</span> <span class="s2">&quot;eval&quot;</span><span class="p">,</span>
            <span class="s2">&quot;valueColors&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;fp&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">},</span>  <span class="c1"># false positives: red</span>
                <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;tp&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#00ff00&quot;</span><span class="p">},</span>  <span class="c1"># true positives: green</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="c1"># Setting `color_scheme` to None forces the dataset&#39;s default color scheme</span>
<span class="c1"># to be loaded</span>
<span class="n">session</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Refer to the <a class="reference internal" href="../api/fiftyone.core.odm.dataset.html#fiftyone.core.odm.dataset.ColorScheme" title="fiftyone.core.odm.dataset.ColorScheme"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColorScheme</span></code></a> class for documentation of the available
customization options.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can also configure color schemes
<a class="reference internal" href="app.html#app-color-schemes"><span class="std std-ref">directly in the App</span></a>!</p>
</div>
</div>
<div class="section" id="sidebar-groups">
<span id="dataset-app-config-sidebar-groups"></span><h4>Sidebar groups<a class="headerlink" href="#sidebar-groups" title="Permalink to this headline">Â¶</a></h4>
<p>You can configure the organization and default expansion state of the
<a class="reference internal" href="app.html#app-sidebar-groups"><span class="std std-ref">sidebarâ€™s field groups</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Get the default sidebar groups for the dataset</span>
<span class="n">sidebar_groups</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">DatasetAppConfig</span><span class="o">.</span><span class="n">default_sidebar_groups</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="c1"># Collapse the `metadata` section by default</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sidebar_groups</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># metadata</span>
<span class="n">sidebar_groups</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">expanded</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Modify the dataset&#39;s App config</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">sidebar_groups</span> <span class="o">=</span> <span class="n">sidebar_groups</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="disable-frame-filtering">
<span id="dataset-app-config-disable-frame-filtering"></span><h4>Disable frame filtering<a class="headerlink" href="#disable-frame-filtering" title="Permalink to this headline">Â¶</a></h4>
<p>Filtering by frame-level fields of video datasets in the Appâ€™s grid view can be
expensive when the dataset is large.</p>
<p>You can disable frame filtering for a video dataset as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">disable_frame_filtering</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can also globally disable frame filtering for all video
datasets via your <a class="reference internal" href="config.html#configuring-fiftyone-app"><span class="std std-ref">App config</span></a>.</p>
</div>
</div>
<div class="section" id="resetting-a-dataset-s-app-config">
<span id="dataset-app-config-reset"></span><h4>Resetting a datasetâ€™s App config<a class="headerlink" href="#resetting-a-dataset-s-app-config" title="Permalink to this headline">Â¶</a></h4>
<p>You can conveniently reset any property of a datasetâ€™s App config by setting it
to <code class="code docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Reset the dataset&#39;s color scheme</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="p">)</span>

<span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>or you can reset the entire App config by setting the
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.app_config" title="fiftyone.core.dataset.Dataset.app_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app_config</span></code></a> property to
<code class="code docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Reset App config</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span> <span class="o">=</span> <span class="kc">None</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="p">)</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check out <a class="reference internal" href="app.html#app-config"><span class="std std-ref">this section</span></a> for more information about
customizing the behavior of the App.</p>
</div>
</div>
</div>
<div class="section" id="storing-class-lists">
<span id="storing-classes"></span><h3>Storing class lists<a class="headerlink" href="#storing-class-lists" title="Permalink to this headline">Â¶</a></h3>
<p>All <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances have
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.classes" title="fiftyone.core.dataset.Dataset.classes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">classes</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_classes" title="fiftyone.core.dataset.Dataset.default_classes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_classes</span></code></a>
properties that you can use to store the lists of possible classes for your
annotations/models.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.classes" title="fiftyone.core.dataset.Dataset.classes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">classes</span></code></a> property is a
dictionary mapping field names to class lists for a single <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> field of the
dataset.</p>
<p>If all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> fields in your dataset have the same semantics, you can store a
single class list in the store a single target dictionary in the
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_classes" title="fiftyone.core.dataset.Dataset.default_classes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_classes</span></code></a>
property of your dataset.</p>
<p>You can also pass your class lists to methods such as
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.evaluate_classifications" title="fiftyone.core.collections.SampleCollection.evaluate_classifications"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate_classifications()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.evaluate_detections" title="fiftyone.core.collections.SampleCollection.evaluate_detections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate_detections()</span></code></a>,
and <a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.export" title="fiftyone.core.collections.SampleCollection.export"><code class="xref py py-meth docutils literal notranslate"><span class="pre">export()</span></code></a> that
require knowledge of the possible classes in a dataset or field(s).</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="c1"># Set default classes</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">default_classes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">]</span>

<span class="c1"># Edit the default classes</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">default_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;other&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="c1"># Set classes for the `ground_truth` and `predictions` fields</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">classes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">],</span>
    <span class="s2">&quot;predictions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;other&quot;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># Edit a field&#39;s classes</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">classes</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;other&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.save" title="fiftyone.core.dataset.Dataset.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.save()</span></code></a> after updating
the datasetâ€™s <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.classes" title="fiftyone.core.dataset.Dataset.classes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">classes</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_classes" title="fiftyone.core.dataset.Dataset.default_classes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_classes</span></code></a>
properties in-place to save the changes to the database.</p>
</div>
</div>
<div class="section" id="storing-mask-targets">
<span id="id8"></span><h3>Storing mask targets<a class="headerlink" href="#storing-mask-targets" title="Permalink to this headline">Â¶</a></h3>
<p>All <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances have
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.mask_targets" title="fiftyone.core.dataset.Dataset.mask_targets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mask_targets</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_mask_targets" title="fiftyone.core.dataset.Dataset.default_mask_targets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_mask_targets</span></code></a>
properties that you can use to store label strings for the pixel values of
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation" title="fiftyone.core.labels.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> field masks.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.mask_targets" title="fiftyone.core.dataset.Dataset.mask_targets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mask_targets</span></code></a> property
is a dictionary mapping field names to target dicts, each of which is a
dictionary defining the mapping between pixel values (2D masks) or RGB hex
strings (3D masks) and label strings for the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation" title="fiftyone.core.labels.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> masks in the
specified field of the dataset.</p>
<p>If all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation" title="fiftyone.core.labels.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> fields in your dataset have the same semantics, you can
store a single target dictionary in the
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_mask_targets" title="fiftyone.core.dataset.Dataset.default_mask_targets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_mask_targets</span></code></a>
property of your dataset.</p>
<p>When you load datasets with <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation" title="fiftyone.core.labels.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> fields in the App that have
corresponding mask targets, the label strings will appear in the Appâ€™s tooltip
when you hover over pixels.</p>
<p>You can also pass your mask targets to methods such as
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.evaluate_segmentations" title="fiftyone.core.collections.SampleCollection.evaluate_segmentations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate_segmentations()</span></code></a>
and <a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.export" title="fiftyone.core.collections.SampleCollection.export"><code class="xref py py-meth docutils literal notranslate"><span class="pre">export()</span></code></a> that
require knowledge of the mask targets for a dataset or field(s).</p>
<p>If you are working with 2D segmentation masks, specify target keys as integers:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="c1"># Set default mask targets</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">default_mask_targets</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">}</span>

<span class="c1"># Edit the default mask targets</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">default_mask_targets</span><span class="p">[</span><span class="mi">255</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;other&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="c1"># Set mask targets for the `ground_truth` and `predictions` fields</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">mask_targets</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">},</span>
    <span class="s2">&quot;predictions&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="mi">255</span><span class="p">:</span> <span class="s2">&quot;other&quot;</span><span class="p">},</span>
<span class="p">}</span>

<span class="c1"># Edit an existing mask target</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">mask_targets</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">][</span><span class="mi">255</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;other&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>
</pre></div></td></tr></table></div>
</div>
<p>If you are working with RGB segmentation masks, specify target keys as RGB hex
strings:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="c1"># Set default mask targets</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">default_mask_targets</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;#499CEF&quot;</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;#6D04FF&quot;</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">}</span>

<span class="c1"># Edit the default mask targets</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">default_mask_targets</span><span class="p">[</span><span class="s2">&quot;#FF6D04&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;person&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="c1"># Set mask targets for the `ground_truth` and `predictions` fields</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">mask_targets</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;#499CEF&quot;</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;#6D04FF&quot;</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">},</span>
    <span class="s2">&quot;predictions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;#499CEF&quot;</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;#6D04FF&quot;</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;#FF6D04&quot;</span><span class="p">:</span> <span class="s2">&quot;person&quot;</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># Edit an existing mask target</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">mask_targets</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">][</span><span class="s2">&quot;#FF6D04&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;person&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.save" title="fiftyone.core.dataset.Dataset.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.save()</span></code></a> after updating
the datasetâ€™s
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.mask_targets" title="fiftyone.core.dataset.Dataset.mask_targets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mask_targets</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_mask_targets" title="fiftyone.core.dataset.Dataset.default_mask_targets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_mask_targets</span></code></a>
properties in-place to save the changes to the database.</p>
</div>
</div>
<div class="section" id="storing-keypoint-skeletons">
<span id="id9"></span><h3>Storing keypoint skeletons<a class="headerlink" href="#storing-keypoint-skeletons" title="Permalink to this headline">Â¶</a></h3>
<p>All <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances have
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.skeletons" title="fiftyone.core.dataset.Dataset.skeletons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">skeletons</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_skeleton" title="fiftyone.core.dataset.Dataset.default_skeleton"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_skeleton</span></code></a>
properties that you can use to store keypoint skeletons for <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> field(s)
of a dataset.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.skeletons" title="fiftyone.core.dataset.Dataset.skeletons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">skeletons</span></code></a> property is a
dictionary mapping field names to <a class="reference internal" href="../api/fiftyone.core.odm.dataset.html#fiftyone.core.odm.dataset.KeypointSkeleton" title="fiftyone.core.odm.dataset.KeypointSkeleton"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeypointSkeleton</span></code></a> instances, each of which
defines the keypoint label strings and edge connectivity for the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a>
instances in the specified field of the dataset.</p>
<p>If all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> fields in your dataset have the same semantics, you can store
a single <a class="reference internal" href="../api/fiftyone.core.odm.dataset.html#fiftyone.core.odm.dataset.KeypointSkeleton" title="fiftyone.core.odm.dataset.KeypointSkeleton"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeypointSkeleton</span></code></a> in the
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_skeleton" title="fiftyone.core.dataset.Dataset.default_skeleton"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_skeleton</span></code></a>
property of your dataset.</p>
<p>When you load datasets with <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> fields in the App that have
corresponding skeletons, the skeletons will automatically be rendered and label
strings will appear in the Appâ€™s tooltip when you hover over the keypoints.</p>
<p>Keypoint skeletons can be associated with <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> or <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoints" title="fiftyone.core.labels.Keypoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoints</span></code></a> fields
whose <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint.points" title="fiftyone.core.labels.Keypoint.points"><code class="xref py py-attr docutils literal notranslate"><span class="pre">points</span></code></a> attributes all
contain a fixed number of semantically ordered points.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.odm.dataset.html#fiftyone.core.odm.dataset.KeypointSkeleton.edges" title="fiftyone.core.odm.dataset.KeypointSkeleton.edges"><code class="xref py py-attr docutils literal notranslate"><span class="pre">edges</span></code></a> argument
contains lists of integer indexes that define the connectivity of the points in
the skeleton, and the optional
<a class="reference internal" href="../api/fiftyone.core.odm.dataset.html#fiftyone.core.odm.dataset.KeypointSkeleton.labels" title="fiftyone.core.odm.dataset.KeypointSkeleton.labels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">labels</span></code></a> argument
defines the label strings for each node in the skeleton.</p>
<p>For example, the skeleton below is defined by edges between the following
nodes:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>left hand &lt;-&gt; left shoulder &lt;-&gt; right shoulder &lt;-&gt; right hand
left eye &lt;-&gt; right eye &lt;-&gt; mouth
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="c1"># Set keypoint skeleton for the `ground_truth` field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">skeletons</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="n">fo</span><span class="o">.</span><span class="n">KeypointSkeleton</span><span class="p">(</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span>
            <span class="s2">&quot;left hand&quot;</span> <span class="s2">&quot;left shoulder&quot;</span><span class="p">,</span> <span class="s2">&quot;right shoulder&quot;</span><span class="p">,</span> <span class="s2">&quot;right hand&quot;</span><span class="p">,</span>
            <span class="s2">&quot;left eye&quot;</span><span class="p">,</span> <span class="s2">&quot;right eye&quot;</span><span class="p">,</span> <span class="s2">&quot;mouth&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">edges</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span>
    <span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Edit an existing skeleton</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">skeletons</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lips&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using keypoint skeletons, each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> instanceâ€™s
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint.points" title="fiftyone.core.labels.Keypoint.points"><code class="xref py py-attr docutils literal notranslate"><span class="pre">points</span></code></a> list must always
respect the indexing defined by the fieldâ€™s <a class="reference internal" href="../api/fiftyone.core.odm.dataset.html#fiftyone.core.odm.dataset.KeypointSkeleton" title="fiftyone.core.odm.dataset.KeypointSkeleton"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeypointSkeleton</span></code></a>.</p>
<p>If a particular keypoint is occluded or missing for an object, use
<code class="code docutils literal notranslate"><span class="pre">[float(&quot;nan&quot;),</span> <span class="pre">float(&quot;nan&quot;)]</span></code> in its
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint.points" title="fiftyone.core.labels.Keypoint.points"><code class="xref py py-attr docutils literal notranslate"><span class="pre">points</span></code></a> list.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.save" title="fiftyone.core.dataset.Dataset.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.save()</span></code></a> after updating
the datasetâ€™s
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.skeletons" title="fiftyone.core.dataset.Dataset.skeletons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">skeletons</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.default_skeleton" title="fiftyone.core.dataset.Dataset.default_skeleton"><code class="xref py py-meth docutils literal notranslate"><span class="pre">default_skeleton</span></code></a>
properties in-place to save the changes to the database.</p>
</div>
</div>
<div class="section" id="deleting-a-dataset">
<h3>Deleting a dataset<a class="headerlink" href="#deleting-a-dataset" title="Permalink to this headline">Â¶</a></h3>
<p>Delete a dataset explicitly via
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete" title="fiftyone.core.dataset.Dataset.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset.delete()</span></code></a>. Once a dataset
is deleted, any existing reference in memory will be in a volatile state.
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset.name</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset.deleted</span></code></a> will still be valid
attributes, but calling any other attribute or method will raise a
<code class="xref py py-class docutils literal notranslate"><span class="pre">DoesNotExistError</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;my_first_dataset&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">())</span>
<span class="c1"># []</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># my_first_dataset</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">deleted</span><span class="p">)</span>
<span class="c1"># True</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">persistent</span><span class="p">)</span>
<span class="c1"># DoesNotExistError: Dataset &#39;my_first_dataset&#39; is deleted</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="samples">
<span id="using-samples"></span><h2>Samples<a class="headerlink" href="#samples" title="Permalink to this headline">Â¶</a></h2>
<p>An individual <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> is always initialized with a <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> to the
corresponding data on disk.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># An image sample</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="c1"># A video sample</span>
<span class="n">another_sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/video.mp4&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Creating a new <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> does not load the source data into memory. Source
data is read only as needed by the App.</p>
</div>
<div class="section" id="adding-samples-to-a-dataset">
<h3>Adding samples to a dataset<a class="headerlink" href="#adding-samples-to-a-dataset" title="Permalink to this headline">Â¶</a></h3>
<p>A <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> can easily be added to an existing <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;example_dataset&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>When a sample is added to a dataset, the relevant attributes of the <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a>
are automatically updated:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">in_dataset</span><span class="p">)</span>
<span class="c1"># True</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">dataset_name</span><span class="p">)</span>
<span class="c1"># example_dataset</span>
</pre></div></td></tr></table></div>
</div>
<p>Every sample in a dataset is given a unique ID when it is added:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="c1"># 5ee0ebd72ceafe13e7741c42</span>
</pre></div></td></tr></table></div>
</div>
<p>Multiple samples can be efficiently added to a dataset in batches:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
<span class="c1"># 1</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image1.jpg&quot;</span><span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image2.jpg&quot;</span><span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image3.jpg&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
<span class="c1"># 4</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="accessing-samples-in-a-dataset">
<span id="id10"></span><h3>Accessing samples in a dataset<a class="headerlink" href="#accessing-samples-in-a-dataset" title="Permalink to this headline">Â¶</a></h3>
<p>FiftyOne provides multiple ways to access a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> in a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>.</p>
<p>You can iterate over the samples in a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Use <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.first" title="fiftyone.core.dataset.Dataset.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">first()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.last" title="fiftyone.core.dataset.Dataset.last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">last()</span></code></a> to retrieve the first and
last samples in a dataset, respectively:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">first_sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">last_sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>Samples can be accessed directly from datasets by their IDs or their filepaths.
<a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> objects are singletons, so the same <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> instance is returned
whenever accessing the sample from the <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">same_sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">sample</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">same_sample</span> <span class="ow">is</span> <span class="n">sample</span><span class="p">)</span>
<span class="c1"># True</span>

<span class="n">also_same_sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">sample</span><span class="o">.</span><span class="n">filepath</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">also_same_sample</span> <span class="ow">is</span> <span class="n">sample</span><span class="p">)</span>
<span class="c1"># True</span>
</pre></div></td></tr></table></div>
</div>
<p>You can use <a class="reference internal" href="using_views.html#using-views"><span class="std std-ref">dataset views</span></a> to perform more sophisticated
operations on samples like searching, filtering, sorting, and slicing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Accessing a sample by its integer index in a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> is not allowed. The
best practice is to lookup individual samples by ID or filepath, or use
array slicing to extract a range of samples, and iterate over samples in a
view.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># KeyError: Accessing dataset samples by numeric index is not supported.</span>
<span class="c1"># Use sample IDs, filepaths, slices, boolean arrays, or a boolean ViewExpression instead</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="deleting-samples-from-a-dataset">
<h3>Deleting samples from a dataset<a class="headerlink" href="#deleting-samples-from-a-dataset" title="Permalink to this headline">Â¶</a></h3>
<p>Samples can be removed from a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> through their ID, either one at a time
or in batches via
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete_samples" title="fiftyone.core.dataset.Dataset.delete_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_samples()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">delete_samples</span><span class="p">(</span><span class="n">sample_id</span><span class="p">)</span>

<span class="c1"># equivalent to above</span>
<span class="k">del</span> <span class="n">dataset</span><span class="p">[</span><span class="n">sample_id</span><span class="p">]</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">delete_samples</span><span class="p">([</span><span class="n">sample_id1</span><span class="p">,</span> <span class="n">sample_id2</span><span class="p">])</span>
</pre></div></td></tr></table></div>
</div>
<p>Samples can also be removed from a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> by passing <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> instance(s)
or <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a> instances:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Remove a random sample</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_samples</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="c1"># Remove 10 random samples</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_samples</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>If a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> object in memory is deleted from a dataset, it will revert to
a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> that has not been added to a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">in_dataset</span><span class="p">)</span>
<span class="c1"># False</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">dataset_name</span><span class="p">)</span>
<span class="c1"># None</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="c1"># None</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="fields">
<span id="using-fields"></span><h2>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">Â¶</a></h2>
<p>A <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field" title="fiftyone.core.fields.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> is an attribute of a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> that stores information about the
sample.</p>
<p>Fields can be dynamically created, modified, and deleted from samples on a
per-sample basis. When a new <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field" title="fiftyone.core.fields.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> is assigned to a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> in a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>,
it is automatically added to the datasetâ€™s schema and thus accessible on all
other samples in the dataset.</p>
<p>If a field exists on a dataset but has not been set on a particular sample, its
value will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="section" id="default-sample-fields">
<span id="id11"></span><h3>Default sample fields<a class="headerlink" href="#default-sample-fields" title="Permalink to this headline">Â¶</a></h3>
<p>By default, all <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> instances have the following fields:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p>string</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>The ID of the sample in its parent dataset, which
is generated automatically when the sample is
added to a dataset, or <code class="code docutils literal notranslate"><span class="pre">None</span></code> if the sample does
not belong to a dataset</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">filepath</span></code></p></td>
<td><p>string</p></td>
<td><p><strong>REQUIRED</strong></p></td>
<td><p>The path to the source data on disk. Must be
provided at sample creation time</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">media_type</span></code></p></td>
<td><p>string</p></td>
<td><p>N/A</p></td>
<td><p>The media type of the sample. Computed
automatically from the provided <code class="code docutils literal notranslate"><span class="pre">filepath</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">tags</span></code></p></td>
<td><p>list</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td><p>A list of string tags for the sample</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">metadata</span></code></p></td>
<td><p><a class="reference internal" href="../api/fiftyone.core.metadata.html#fiftyone.core.metadata.Metadata" title="fiftyone.core.metadata.Metadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metadata</span></code></a></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>Type-specific metadata about the source data</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">created_at</span></code></p></td>
<td><p>datetime</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>The datetime that the sample was added to its
parent dataset, which is generated automatically,
or <code class="code docutils literal notranslate"><span class="pre">None</span></code> if the sample does not belong to a
dataset</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">last_modified_at</span></code></p></td>
<td><p>datetime</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>The datetime that the sample was last modified,
which is updated automatically, or <code class="code docutils literal notranslate"><span class="pre">None</span></code> if the
sample does not belong to a dataset</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">created_at</span></code> and <code class="code docutils literal notranslate"><span class="pre">last_modified_at</span></code> fields are
<a class="reference internal" href="#read-only-fields"><span class="std std-ref">read-only</span></a> and are automatically populated/updated
when you add samples to datasets and modify them, respectively.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
}&gt;
</pre></div>
</div>
</div>
<div class="section" id="accessing-fields-of-a-sample">
<span id="accessing-sample-fields"></span><h3>Accessing fields of a sample<a class="headerlink" href="#accessing-fields-of-a-sample" title="Permalink to this headline">Â¶</a></h3>
<p>The names of available fields can be checked on any individual <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span><span class="o">.</span><span class="n">field_names</span>
<span class="c1"># (&#39;id&#39;, &#39;filepath&#39;, &#39;tags&#39;, &#39;metadata&#39;, &#39;created_at&#39;, &#39;last_modified_at&#39;)</span>
</pre></div></td></tr></table></div>
</div>
<p>The value of a <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field" title="fiftyone.core.fields.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> for a given <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> can be accessed either by either
attribute or item access:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span><span class="o">.</span><span class="n">filepath</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;filepath&quot;</span><span class="p">]</span>  <span class="c1"># equivalent</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="field-schemas">
<span id="id12"></span><h3>Field schemas<a class="headerlink" href="#field-schemas" title="Permalink to this headline">Â¶</a></h3>
<p>You can use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_field_schema" title="fiftyone.core.dataset.Dataset.get_field_schema"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_field_schema()</span></code></a> to
retrieve detailed information about the schema of the samples in a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;a_dataset&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>OrderedDict([
    (&#39;id&#39;, &lt;fiftyone.core.fields.ObjectIdField at 0x7fbaa862b358&gt;),
    (&#39;filepath&#39;, &lt;fiftyone.core.fields.StringField at 0x11c77ae10&gt;),
    (&#39;tags&#39;, &lt;fiftyone.core.fields.ListField at 0x11c790828&gt;),
    (&#39;metadata&#39;, &lt;fiftyone.core.fields.EmbeddedDocumentField at 0x11c7907b8&gt;),
    (&#39;created_at&#39;, &lt;fiftyone.core.fields.DateTimeField at 0x7fea48361af0&gt;),
    (&#39;last_modified_at&#39;, &lt;fiftyone.core.fields.DateTimeField at 0x7fea48361b20&gt;)]),
])
</pre></div>
</div>
<p>You can also view helpful information about a dataset, including its schema, by
printing it:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Name:           a_dataset
Media type:     image
Num samples:    1
Persistent:     False
Tags:           []
Sample fields:
    id:               fiftyone.core.fields.ObjectIdField
    filepath:         fiftyone.core.fields.StringField
    tags:             fiftyone.core.fields.ListField(fiftyone.core.fields.StringField)
    metadata:         fiftyone.core.fields.EmbeddedDocumentField(fiftyone.core.metadata.ImageMetadata)
    created_at:       fiftyone.core.fields.DateTimeField
    last_modified_at: fiftyone.core.fields.DateTimeField
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can <a class="reference internal" href="#storing-field-metadata"><span class="std std-ref">store metadata</span></a> such
as descriptions on your datasetâ€™s fields!</p>
</div>
</div>
<div class="section" id="adding-fields-to-a-sample">
<span id="adding-sample-fields"></span><h3>Adding fields to a sample<a class="headerlink" href="#adding-fields-to-a-sample" title="Permalink to this headline">Â¶</a></h3>
<p>New fields can be added to a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> using item assignment:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span><span class="p">[</span><span class="s2">&quot;integer_field&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">51</span>
<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>If the <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> belongs to a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>, the datasetâ€™s schema will automatically
be updated to reflect the new field:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Name:           a_dataset
Media type:     image
Num samples:    1
Persistent:     False
Tags:           []
Sample fields:
    id:               fiftyone.core.fields.ObjectIdField
    filepath:         fiftyone.core.fields.StringField
    tags:             fiftyone.core.fields.ListField(fiftyone.core.fields.StringField)
    metadata:         fiftyone.core.fields.EmbeddedDocumentField(fiftyone.core.metadata.ImageMetadata)
    created_at:       fiftyone.core.fields.DateTimeField
    last_modified_at: fiftyone.core.fields.DateTimeField
    integer_field:    fiftyone.core.fields.IntField
</pre></div>
</div>
<p>A <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field" title="fiftyone.core.fields.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> can be any primitive type, such as <code class="code docutils literal notranslate"><span class="pre">bool</span></code>, <code class="code docutils literal notranslate"><span class="pre">int</span></code>, <code class="code docutils literal notranslate"><span class="pre">float</span></code>, <code class="code docutils literal notranslate"><span class="pre">str</span></code>,
<code class="code docutils literal notranslate"><span class="pre">date</span></code>, <code class="code docutils literal notranslate"><span class="pre">datetime</span></code>, <code class="code docutils literal notranslate"><span class="pre">list</span></code>, <code class="code docutils literal notranslate"><span class="pre">dict</span></code>, or more complex data structures
<a class="reference internal" href="#using-labels"><span class="std std-ref">like label types</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span><span class="p">[</span><span class="s2">&quot;animal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;alligator&quot;</span><span class="p">)</span>
<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>Whenever a new field is added to a sample in a dataset, the field is available
on every other sample in the dataset with the value <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Fields must have the same type (or <code class="code docutils literal notranslate"><span class="pre">None</span></code>) across all samples in the dataset.
Setting a field to an inappropriate type raises an error:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample2</span><span class="o">.</span><span class="n">integer_field</span> <span class="o">=</span> <span class="s2">&quot;a string&quot;</span>
<span class="n">sample2</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="c1"># ValidationError: a string could not be converted to int</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample.save" title="fiftyone.core.sample.Sample.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sample.save()</span></code></a> in
order to persist changes to the database when editing samples that are in
datasets.</p>
</div>
</div>
<div class="section" id="adding-fields-to-a-dataset">
<span id="adding-dataset-fields"></span><h3>Adding fields to a dataset<a class="headerlink" href="#adding-fields-to-a-dataset" title="Permalink to this headline">Â¶</a></h3>
<p>You can also use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample_field" title="fiftyone.core.dataset.Dataset.add_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_sample_field()</span></code></a> to
declare new sample fields directly on datasets without explicitly populating
any values on its samples:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;image.jpg&quot;</span><span class="p">,</span>
    <span class="n">ground_truth</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="c1"># Declare new primitive fields</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;scene_id&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;quality&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">FloatField</span><span class="p">)</span>

<span class="c1"># Declare untyped list fields</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;more_tags&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">ListField</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">ListField</span><span class="p">)</span>

<span class="c1"># Declare a typed list field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;also_tags&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">ListField</span><span class="p">,</span> <span class="n">subfield</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>

<span class="c1"># Declare a new Label field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span>
    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span>
    <span class="n">fo</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">,</span>
    <span class="n">embedded_doc_type</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &#39;id&#39;: &lt;fiftyone.core.fields.ObjectIdField object at 0x7f9280803910&gt;,
    &#39;filepath&#39;: &lt;fiftyone.core.fields.StringField object at 0x7f92d273e0d0&gt;,
    &#39;tags&#39;: &lt;fiftyone.core.fields.ListField object at 0x7f92d2654f70&gt;,
    &#39;metadata&#39;: &lt;fiftyone.core.fields.EmbeddedDocumentField object at 0x7f9280803d90&gt;,
    &#39;created_at&#39;: &lt;fiftyone.core.fields.DateTimeField object at 0x7fea48361af0&gt;,
    &#39;last_modified_at&#39;: &lt;fiftyone.core.fields.DateTimeField object at 0x7fea48361b20&gt;,
    &#39;ground_truth&#39;: &lt;fiftyone.core.fields.EmbeddedDocumentField object at 0x7f92d2605190&gt;,
    &#39;scene_id&#39;: &lt;fiftyone.core.fields.StringField object at 0x7f9280803490&gt;,
    &#39;quality&#39;: &lt;fiftyone.core.fields.FloatField object at 0x7f92d2605bb0&gt;,
    &#39;more_tags&#39;: &lt;fiftyone.core.fields.ListField object at 0x7f92d08e4550&gt;,
    &#39;info&#39;: &lt;fiftyone.core.fields.ListField object at 0x7f92d264f9a0&gt;,
    &#39;also_tags&#39;: &lt;fiftyone.core.fields.ListField object at 0x7f92d264ff70&gt;,
    &#39;predictions&#39;: &lt;fiftyone.core.fields.EmbeddedDocumentField object at 0x7f92d2605640&gt;,
}
</pre></div>
</div>
<p>Whenever a new field is added to a dataset, the field is immediately available
on all samples in the dataset with the value <code class="code docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: &#39;642d8848f291652133df8d3a&#39;,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/Users/Brian/dev/fiftyone/image.jpg&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 0, 25, 372399),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 0, 25, 372399),
    &#39;ground_truth&#39;: &lt;Classification: {
        &#39;id&#39;: &#39;642d8848f291652133df8d38&#39;,
        &#39;tags&#39;: [],
        &#39;label&#39;: &#39;cat&#39;,
        &#39;confidence&#39;: None,
        &#39;logits&#39;: None,
    }&gt;,
    &#39;scene_id&#39;: None,
    &#39;quality&#39;: None,
    &#39;more_tags&#39;: None,
    &#39;info&#39;: None,
    &#39;also_tags&#39;: None,
    &#39;predictions&#39;: None,
}&gt;
</pre></div>
</div>
<p>You can also declare nested fields on existing embedded documents using dot
notation:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Declare a new attribute on a `Classification` field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;predictions.breed&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#dynamic-attributes"><span class="std std-ref">this section</span></a> for more options for
dynamically expanding the schema of nested lists and embedded documents.</p>
</div>
<p>You can use <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_field" title="fiftyone.core.dataset.Dataset.get_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_field()</span></code></a> to
retrieve a <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field" title="fiftyone.core.fields.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> instance by its name or <code class="docutils literal notranslate"><span class="pre">embedded.field.name</span></code>. And, if the
field contains an embedded document, you can call
<a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.EmbeddedDocumentField.get_field_schema" title="fiftyone.core.fields.EmbeddedDocumentField.get_field_schema"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_field_schema()</span></code></a>
to recursively inspect its nested fields:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">document_type</span><span class="p">)</span>
<span class="c1"># &lt;class &#39;fiftyone.core.labels.Classification&#39;&gt;</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="c1"># {&#39;logits&#39;, &#39;confidence&#39;, &#39;breed&#39;, &#39;tags&#39;, &#39;label&#39;, &#39;id&#39;}</span>

<span class="c1"># Directly retrieve a nested field</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;predictions.breed&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">field</span><span class="p">))</span>
<span class="c1"># &lt;class &#39;fiftyone.core.fields.StringField&#39;&gt;</span>
</pre></div></td></tr></table></div>
</div>
<p>If your dataset contains a <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.ListField" title="fiftyone.core.fields.ListField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListField</span></code></a> with no value type declared, you can add
the type later by appending <code class="code docutils literal notranslate"><span class="pre">[]</span></code> to the field path:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;more_tags&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>  <span class="c1"># None</span>

<span class="c1"># Declare the subfield types of an existing untyped list field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;more_tags[]&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;more_tags&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>  <span class="c1"># StringField</span>

<span class="c1"># List fields can also contain embedded documents</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span>
    <span class="s2">&quot;info[]&quot;</span><span class="p">,</span>
    <span class="n">fo</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">,</span>
    <span class="n">embedded_doc_type</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">DynamicEmbeddedDocument</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>  <span class="c1"># EmbeddedDocumentField</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">document_type</span><span class="p">)</span>  <span class="c1"># DynamicEmbeddedDocument</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Declaring the value type of list fields is required if you want to filter
by the listâ€™s values <a class="reference internal" href="app.html#app-filtering"><span class="std std-ref">in the App</span></a>.</p>
</div>
</div>
<div class="section" id="editing-sample-fields">
<span id="id13"></span><h3>Editing sample fields<a class="headerlink" href="#editing-sample-fields" title="Permalink to this headline">Â¶</a></h3>
<p>You can make any edits you wish to the fields of an existing <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.jpg&quot;</span><span class="p">,</span>
    <span class="n">ground_truth</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
        <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;CAT&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]),</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]),</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">detections</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span>

<span class="c1"># Edit an existing detection</span>
<span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;cat&quot;</span>

<span class="c1"># Add a new detection</span>
<span class="n">new_detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;animals&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">detections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_detection</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># if the sample is in a dataset</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample.save" title="fiftyone.core.sample.Sample.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sample.save()</span></code></a> in
order to persist changes to the database when editing samples that are in
datasets.</p>
</div>
<p>A common workflow is to iterate over a dataset
<a class="reference internal" href="using_views.html#editing-view-fields"><span class="std std-ref">or view</span></a> and edit each sample:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;new_field&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.iter_samples" title="fiftyone.core.dataset.Dataset.iter_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_samples()</span></code></a> method
is an equivalent way to iterate over a dataset that provides a
<code class="docutils literal notranslate"><span class="pre">progress=True</span></code> option that prints a progress bar tracking the status of the
iteration:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Prints a progress bar tracking the status of the iteration</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">iter_samples</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;new_field&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.iter_samples" title="fiftyone.core.dataset.Dataset.iter_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_samples()</span></code></a> method
also provides an <code class="docutils literal notranslate"><span class="pre">autosave=True</span></code> option that causes all changes to samples
emitted by the iterator to be automatically saved using efficient batch
updates:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Automatically saves sample edits in efficient batches</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">iter_samples</span><span class="p">(</span><span class="n">autosave</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;new_field&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
</pre></div></td></tr></table></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">autosave=True</span></code> can significantly improve performance when editing
large datasets. See <a class="reference internal" href="#batch-updates"><span class="std std-ref">this section</span></a> for more information
on batch update patterns.</p>
</div>
<div class="section" id="removing-fields-from-a-sample">
<span id="removing-sample-fields"></span><h3>Removing fields from a sample<a class="headerlink" href="#removing-fields-from-a-sample" title="Permalink to this headline">Â¶</a></h3>
<p>A field can be deleted from a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> using <code class="code docutils literal notranslate"><span class="pre">del</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">del</span> <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;integer_field&quot;</span><span class="p">]</span>
</pre></div></td></tr></table></div>
</div>
<p>If the <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> is not yet in a dataset, deleting a field will remove it from
the sample. If the <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> is in a dataset, the fieldâ€™s value will be <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Fields can also be deleted at the <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> level, in which case they are
removed from every <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> in the dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">delete_sample_field</span><span class="p">(</span><span class="s2">&quot;integer_field&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="o">.</span><span class="n">integer_field</span>
<span class="c1"># AttributeError: Sample has no field &#39;integer_field&#39;</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="storing-field-metadata">
<span id="id14"></span><h3>Storing field metadata<a class="headerlink" href="#storing-field-metadata" title="Permalink to this headline">Â¶</a></h3>
<p>You can store metadata such as descriptions and other info on the fields of
your dataset.</p>
<p>One approach is to manually declare the field with
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample_field" title="fiftyone.core.dataset.Dataset.add_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_sample_field()</span></code></a>
with the appropriate metadata provided:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span>
    <span class="s2">&quot;int_field&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">IntField</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An integer field&quot;</span>
<span class="p">)</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;int_field&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>  <span class="c1"># An integer field</span>
</pre></div></td></tr></table></div>
</div>
<p>You can also use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.get_field" title="fiftyone.core.collections.SampleCollection.get_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_field()</span></code></a> to
retrieve a field and update itâ€™s metadata at any time:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_dynamic_sample_fields</span><span class="p">()</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>
<span class="n">field</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Ground truth annotations&quot;</span>
<span class="n">field</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://fiftyone.ai&quot;</span><span class="p">}</span>
<span class="n">field</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.area&quot;</span><span class="p">)</span>
<span class="n">field</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Area of the box, in pixels^2&quot;</span>
<span class="n">field</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://fiftyone.ai&quot;</span><span class="p">}</span>
<span class="n">field</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>  <span class="c1"># Ground truth annotations</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>  <span class="c1"># {&#39;url&#39;: &#39;https://fiftyone.ai&#39;}</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.area&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>  <span class="c1"># Area of the box, in pixels^2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>  <span class="c1"># {&#39;url&#39;: &#39;https://fiftyone.ai&#39;}</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call
<a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field.save" title="fiftyone.core.fields.Field.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">field.save()</span></code></a> after updating
a fieldsâ€™s <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field.description" title="fiftyone.core.fields.Field.description"><code class="xref py py-attr docutils literal notranslate"><span class="pre">description</span></code></a>
and <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field.info" title="fiftyone.core.fields.Field.info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">info</span></code></a> attributes in-place to
save the changes to the database.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view field metadata directly in the App by hovering
over fields or attributes <a class="reference internal" href="app.html#app-fields-sidebar"><span class="std std-ref">in the sidebar</span></a>!</p>
</div>
</div>
<div class="section" id="read-only-fields">
<span id="id15"></span><h3>Read-only fields<a class="headerlink" href="#read-only-fields" title="Permalink to this headline">Â¶</a></h3>
<p>Certain <a class="reference internal" href="#default-sample-fields"><span class="std std-ref">default sample fields</span></a> like <code class="code docutils literal notranslate"><span class="pre">created_at</span></code>
and <code class="code docutils literal notranslate"><span class="pre">last_modified_at</span></code> are read-only and thus cannot be manually edited:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.jpg&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">sample</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="c1"># ValueError: Cannot edit read-only field &#39;created_at&#39;</span>

<span class="n">sample</span><span class="o">.</span><span class="n">last_modified_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="c1"># ValueError: Cannot edit read-only field &#39;last_modified_at&#39;</span>
</pre></div></td></tr></table></div>
</div>
<p>You can also manually mark additional fields or embedded fields as read-only
at any time:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="c1"># Declare a new read-only field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mark &#39;filepath&#39; as read-only</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">)</span>
<span class="n">field</span><span class="o">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">field</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="c1"># Mark a nested field as read-only</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.label&quot;</span><span class="p">)</span>
<span class="n">field</span><span class="o">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">field</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="n">sample</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;no.jpg&quot;</span>
<span class="c1"># ValueError: Cannot edit read-only field &#39;filepath&#39;</span>

<span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="c1"># ValueError: Cannot edit read-only field &#39;ground_truth.detections.label&#39;</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call
<a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field.save" title="fiftyone.core.fields.Field.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">field.save()</span></code></a> after updating
a fieldsâ€™s <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field.read_only" title="fiftyone.core.fields.Field.read_only"><code class="xref py py-attr docutils literal notranslate"><span class="pre">read_only</span></code></a>
attributes in-place to save the changes to the database.</p>
</div>
<p>Note that read-only fields do not interfere with the ability to add/delete
samples from datasets:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.jpg&quot;</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="s2">&quot;1234&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">delete_samples</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Any fields that youâ€™ve manually marked as read-only may be reverted to
editable at any time:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="c1"># Revert &#39;filepath&#39; to editable</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">)</span>
<span class="n">field</span><span class="o">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">field</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="c1"># Revert nested field to editable</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.label&quot;</span><span class="p">)</span>
<span class="n">field</span><span class="o">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">field</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># must save after edits</span>

<span class="n">sample</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;yes.jpg&quot;</span>
<span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="summary-fields">
<span id="id16"></span><h3>Summary fields<a class="headerlink" href="#summary-fields" title="Permalink to this headline">Â¶</a></h3>
<p>Summary fields allow you to efficiently perform queries on large datasets where
directly querying the underlying field is prohibitively slow due to the number
of objects/frames in the field.</p>
<p>For example, suppose youâ€™re working on a
<a class="reference internal" href="#video-datasets"><span class="std std-ref">video dataset</span></a> with frame-level objects, and youâ€™re
interested in finding videos that contain specific classes of interest, eg
<code class="code docutils literal notranslate"><span class="pre">person</span></code>, in at least one frame:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;frames.detections.detections.confidence&quot;</span><span class="p">,</span> <span class="n">F</span><span class="o">.</span><span class="n">rand</span><span class="p">())</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="quickstart-video" class="align-center" src="../_images/quickstart-video.gif" />
<p>One approach is to directly query the frame-level field (<code class="code docutils literal notranslate"><span class="pre">frames.detections</span></code>
in this case) in the Appâ€™s sidebar. However, when the dataset is large, such
queries are inefficient, as they cannot unlock
<a class="reference internal" href="app.html#app-optimizing-query-performance"><span class="std std-ref">query performance</span></a> and thus require
full collection scans over all frames to retrieve the relevant samples.</p>
<p>A more efficient approach is to first use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.create_summary_field" title="fiftyone.core.dataset.Dataset.create_summary_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_summary_field()</span></code></a>
to summarize the relevant input field path(s):</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Generate a summary field for object labels</span>
<span class="n">field_name</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_summary_field</span><span class="p">(</span><span class="s2">&quot;frames.detections.detections.label&quot;</span><span class="p">)</span>

<span class="c1"># The name of the summary field that was created</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<span class="c1"># &#39;frames_detections_label&#39;</span>

<span class="c1"># Generate a summary field for [min, max] confidences</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_summary_field</span><span class="p">(</span><span class="s2">&quot;frames.detections.detections.confidence&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Summary fields can be generated for sample-level and frame-level fields, and
the input fields can be either categorical or numeric:</p>
<p>As the above examples illustrate, summary fields allow you to encode various
types of information at the sample-level that you can directly query to find
samples that contain specific values.</p>
<p>Moreover, summary fields are <a class="reference internal" href="app.html#app-optimizing-query-performance"><span class="std std-ref">indexed</span></a>
by default and the App can natively leverage these indexes to provide
performant filtering:</p>
<img alt="quickstart-video-summary-fields" class="align-center" src="../_images/quickstart-video-summary-fields.gif" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Summary fields are automatically added to a <code class="code docutils literal notranslate"><span class="pre">summaries</span></code>
<a class="reference internal" href="#dataset-app-config-sidebar-groups"><span class="std std-ref">sidebar group</span></a> in the App for
easy access and organization.</p>
<p>They are also <a class="reference internal" href="#read-only-fields"><span class="std std-ref">read-only</span></a> by default, as they are
implicitly derived from the contents of their source field and are not
intended to be directly modified.</p>
</div>
<p>You can use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.list_summary_fields" title="fiftyone.core.dataset.Dataset.list_summary_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_summary_fields()</span></code></a>
to list the names of the summary fields on your dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">list_summary_fields</span><span class="p">())</span>
<span class="c1"># [&#39;frames_detections_label&#39;, &#39;frames_detections_confidence&#39;, ...]</span>
</pre></div></td></tr></table></div>
</div>
<p>Since a summary field is derived from the contents of another field, it must be
updated whenever there have been modifications to its source field. You can use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.check_summary_fields" title="fiftyone.core.dataset.Dataset.check_summary_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_summary_fields()</span></code></a>
to check for summary fields that <em>may</em> need to be updated:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Newly created summary fields don&#39;t needed updating</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">check_summary_fields</span><span class="p">())</span>
<span class="c1"># []</span>

<span class="c1"># Modify the dataset</span>
<span class="n">label_upper</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;frames.detections.detections.label&quot;</span><span class="p">,</span> <span class="n">label_upper</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="c1"># Summary fields now (may) need updating</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">check_summary_fields</span><span class="p">())</span>
<span class="c1"># [&#39;frames_detections_label&#39;, &#39;frames_detections_confidence&#39;, ...]</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that inclusion in
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.check_summary_fields" title="fiftyone.core.dataset.Dataset.check_summary_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_summary_fields()</span></code></a>
is only a heuristic, as any sample modifications <em>may not</em> have affected
the summaryâ€™s source field.</p>
</div>
<p>Use <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.update_summary_field" title="fiftyone.core.dataset.Dataset.update_summary_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update_summary_field()</span></code></a>
to regenerate a summary field based on the current values of its source field:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">update_summary_field</span><span class="p">(</span><span class="s2">&quot;frames_detections_label&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Finally, use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete_summary_field" title="fiftyone.core.dataset.Dataset.delete_summary_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_summary_field()</span></code></a>
or <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete_summary_fields" title="fiftyone.core.dataset.Dataset.delete_summary_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_summary_fields()</span></code></a>
to delete existing summary field(s) that you no longer need:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">delete_summary_field</span><span class="p">(</span><span class="s2">&quot;frames_detections_label&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="media-type">
<span id="using-media-type"></span><h2>Media type<a class="headerlink" href="#media-type" title="Permalink to this headline">Â¶</a></h2>
<p>When a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> is created, its media type is inferred from the <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> to
the source media and available via the <code class="code docutils literal notranslate"><span class="pre">media_type</span></code> attribute of the sample,
which is read-only.</p>
<p>Media type is inferred from the
<a class="reference external" href="https://en.wikipedia.org/wiki/Media_type">MIME type</a> of the file on disk,
as per the table below:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 30%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>MIME type/extension</p></th>
<th class="head"><p><code class="code docutils literal notranslate"><span class="pre">media_type</span></code></p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">image/*</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">image</span></code></p></td>
<td><p>Image sample</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">video/*</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">video</span></code></p></td>
<td><p>Video sample</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">*.fo3d</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">3d</span></code></p></td>
<td><p>3D sample</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">*.pcd</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">point-cloud</span></code></p></td>
<td><p>Point cloud sample</p></td>
</tr>
<tr class="row-even"><td><p>other</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p>Generic sample</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> of a sample can be changed after the sample is created, but
the new filepath must have the same media type. In other words,
<code class="code docutils literal notranslate"><span class="pre">media_type</span></code> is immutable.</p>
</div>
</div>
<div class="section" id="tags">
<span id="using-tags"></span><h2>Tags<a class="headerlink" href="#tags" title="Permalink to this headline">Â¶</a></h2>
<p>All <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> instances have a <code class="code docutils literal notranslate"><span class="pre">tags</span></code> field, which is a string list. By default,
this list is empty, but you can use it to store information like dataset splits
or application-specific issues like low quality images:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;tagged_dataset&quot;</span><span class="p">)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image1.png&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;train&quot;</span><span class="p">]),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image2.png&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;low_quality&quot;</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">distinct</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">))</span>
<span class="c1"># [&quot;test&quot;, &quot;low_quality&quot;, &quot;train&quot;]</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can add, edit, and filter by sample tags
<a class="reference internal" href="app.html#app-tagging"><span class="std std-ref">directly in the App</span></a>.</p>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">tags</span></code> field can be used like a standard Python list:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">sample</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;new_tag&quot;</span><span class="p">)</span>
<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample.save" title="fiftyone.core.sample.Sample.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sample.save()</span></code></a> in
order to persist changes to the database when editing samples that are in
datasets.</p>
</div>
<p>Datasets and views provide helpful methods such as
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.count_sample_tags" title="fiftyone.core.collections.SampleCollection.count_sample_tags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count_sample_tags()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.tag_samples" title="fiftyone.core.collections.SampleCollection.tag_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tag_samples()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.untag_samples" title="fiftyone.core.collections.SampleCollection.untag_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">untag_samples()</span></code></a>,
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_tags" title="fiftyone.core.collections.SampleCollection.match_tags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_tags()</span></code></a>
that you can use to perform batch queries and edits to sample tags:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_sample_tags</span><span class="p">())</span>  <span class="c1"># {&#39;validation&#39;: 200}</span>

<span class="c1"># Tag samples in a view</span>
<span class="n">test_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">test_view</span><span class="o">.</span><span class="n">untag_samples</span><span class="p">(</span><span class="s2">&quot;validation&quot;</span><span class="p">)</span>
<span class="n">test_view</span><span class="o">.</span><span class="n">tag_samples</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_sample_tags</span><span class="p">())</span>  <span class="c1"># {&#39;validation&#39;: 100, &#39;test&#39;: 100}</span>

<span class="c1"># Create a view containing samples with a specific tag</span>
<span class="n">validation_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match_tags</span><span class="p">(</span><span class="s2">&quot;validation&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">validation_view</span><span class="p">))</span>  <span class="c1"># 100</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="metadata">
<span id="using-metadata"></span><h2>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">Â¶</a></h2>
<p>All <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> instances have a <code class="code docutils literal notranslate"><span class="pre">metadata</span></code> field, which can optionally be
populated with a <a class="reference internal" href="../api/fiftyone.core.metadata.html#fiftyone.core.metadata.Metadata" title="fiftyone.core.metadata.Metadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metadata</span></code></a> instance that stores data type-specific metadata
about the raw data in the sample. The <a class="reference internal" href="app.html#fiftyone-app"><span class="std std-ref">FiftyOne App</span></a> and
the <a class="reference internal" href="../brain.html#fiftyone-brain"><span class="std std-ref">FiftyOne Brain</span></a> will use this provided metadata in
some workflows when it is available.</p>
</div>
<div class="section" id="dates-and-datetimes">
<span id="id17"></span><h2>Dates and datetimes<a class="headerlink" href="#dates-and-datetimes" title="Permalink to this headline">Â¶</a></h2>
<p>You can store date information in FiftyOne datasets by populating fields with
<code class="code docutils literal notranslate"><span class="pre">date</span></code> or <code class="code docutils literal notranslate"><span class="pre">datetime</span></code> values:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
            <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;image1.png&quot;</span><span class="p">,</span>
            <span class="n">acquisition_time</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
            <span class="n">acquisition_date</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
            <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;image2.png&quot;</span><span class="p">,</span>
            <span class="n">acquisition_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">(),</span>
            <span class="n">acquisition_date</span><span class="o">=</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">(),</span>
        <span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can <a class="reference internal" href="using_views.html#date-views"><span class="std std-ref">create dataset views</span></a> with
date-based queries!</p>
</div>
<p>Internally, FiftyOne stores all dates as UTC timestamps, but you can provide
any valid <code class="code docutils literal notranslate"><span class="pre">datetime</span></code> object when setting a <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.DateTimeField" title="fiftyone.core.fields.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> of a sample,
including timezone-aware datetimes, which are internally converted to UTC
format for safekeeping.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># A datetime in your local timezone</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;image.png&quot;</span><span class="p">,</span> <span class="n">acquisition_time</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="c1"># Samples are singletons, so we reload so `sample` will contain values as</span>
<span class="c1"># loaded from the database</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

<span class="n">sample</span><span class="o">.</span><span class="n">acquisition_time</span><span class="o">.</span><span class="n">tzinfo</span>  <span class="c1"># None</span>
</pre></div></td></tr></table></div>
</div>
<p>By default, when you access a datetime field of a sample in a dataset, it is
retrieved as a naive <code class="code docutils literal notranslate"><span class="pre">datetime</span></code> instance expressed in UTC format.</p>
<p>However, if you prefer, you can
<a class="reference internal" href="config.html#configuring-timezone"><span class="std std-ref">configure FiftyOne</span></a> to load datetime fields as
timezone-aware <code class="code docutils literal notranslate"><span class="pre">datetime</span></code> instances in a timezone of your choice.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>FiftyOne assumes that all <code class="code docutils literal notranslate"><span class="pre">datetime</span></code> instances with no explicit timezone
are stored in UTC format.</p>
<p>Therefore, never use <code class="code docutils literal notranslate"><span class="pre">datetime.datetime.now()</span></code> when populating a datetime
field of a FiftyOne dataset! Instead, use <code class="code docutils literal notranslate"><span class="pre">datetime.datetime.utcnow()</span></code>.</p>
</div>
</div>
<div class="section" id="labels">
<span id="using-labels"></span><h2>Labels<a class="headerlink" href="#labels" title="Permalink to this headline">Â¶</a></h2>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> class hierarchy is used to store semantic information about ground
truth or predicted labels in a sample.</p>
<p>Although such information can be stored in custom sample fields
(e.g, in a <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.DictField" title="fiftyone.core.fields.DictField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictField</span></code></a>), it is recommended that you store label information in
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instances so that the <a class="reference internal" href="app.html#fiftyone-app"><span class="std std-ref">FiftyOne App</span></a> and the
<a class="reference internal" href="../brain.html#fiftyone-brain"><span class="std std-ref">FiftyOne Brain</span></a> can visualize and compute on your
labels.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instances are dynamic! You can add custom fields to your
labels to store custom information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Provide some default fields</span>
<span class="n">label</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>

<span class="c1"># Add custom fields</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;int&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;float&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">51.0</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;bool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;of&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">]}</span>
</pre></div>
</div>
<p>You can also <a class="reference internal" href="#dynamic-attributes"><span class="std std-ref">declare dynamic attributes</span></a> on your
datasetâ€™s schema, which allows you to enforce type constraints, filter by
these custom attributes <a class="reference internal" href="app.html#app-filtering"><span class="std std-ref">in the App</span></a>, and more.</p>
</div>
<p>FiftyOne provides a dedicated <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> subclass for many common tasks. The
subsections below describe them.</p>
<div class="section" id="regression">
<span id="id18"></span><h3>Regression<a class="headerlink" href="#regression" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Regression" title="fiftyone.core.labels.Regression"><code class="xref py py-class docutils literal notranslate"><span class="pre">Regression</span></code></a> class represents a numeric regression value for an image. The
value itself is stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Regression.value" title="fiftyone.core.labels.Regression.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> attribute of the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Regression" title="fiftyone.core.labels.Regression"><code class="xref py py-class docutils literal notranslate"><span class="pre">Regression</span></code></a> object. This may be a ground truth value or a model prediction.</p>
<p>The optional
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Regression.confidence" title="fiftyone.core.labels.Regression.confidence"><code class="xref py py-attr docutils literal notranslate"><span class="pre">confidence</span></code></a> attribute can
be used to store a score associated with the model prediction and can be
visualized in the App or used, for example, when
<a class="reference internal" href="evaluation.html#evaluating-regressions"><span class="std std-ref">evaluating regressions</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Regression</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">51.0</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">42.0</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;ground_truth&#39;: &lt;Regression: {
        &#39;id&#39;: &#39;616c4bef36297ec40a26d112&#39;,
        &#39;tags&#39;: [],
        &#39;value&#39;: 51.0,
        &#39;confidence&#39;: None,
    }&gt;,
    &#39;prediction&#39;: &lt;Classification: {
        &#39;id&#39;: &#39;616c4bef36297ec40a26d113&#39;,
        &#39;tags&#39;: [],
        &#39;label&#39;: None,
        &#39;confidence&#39;: 0.9,
        &#39;logits&#39;: None,
        &#39;value&#39;: 42.0,
    }&gt;,
}&gt;
</pre></div>
</div>
</div>
<div class="section" id="classification">
<span id="id19"></span><h3>Classification<a class="headerlink" href="#classification" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification" title="fiftyone.core.labels.Classification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classification</span></code></a> class represents a classification label for an image. The
label itself is stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification.label" title="fiftyone.core.labels.Classification.label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">label</span></code></a> attribute of the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification" title="fiftyone.core.labels.Classification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classification</span></code></a> object. This may be a ground truth label or a model
prediction.</p>
<p>The optional
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification.confidence" title="fiftyone.core.labels.Classification.confidence"><code class="xref py py-attr docutils literal notranslate"><span class="pre">confidence</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification.logits" title="fiftyone.core.labels.Classification.logits"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logits</span></code></a> attributes may be
used to store metadata about the model prediction. These additional fields can
be visualized in the App or used by Brain methods, e.g., when
<a class="reference internal" href="../brain.html#brain-label-mistakes"><span class="std std-ref">computing label mistakes</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;sunny&quot;</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;sunny&quot;</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;ground_truth&#39;: &lt;Classification: {
        &#39;id&#39;: &#39;5f8708db2018186b6ef66821&#39;,
        &#39;label&#39;: &#39;sunny&#39;,
        &#39;confidence&#39;: None,
        &#39;logits&#39;: None,
    }&gt;,
    &#39;prediction&#39;: &lt;Classification: {
        &#39;id&#39;: &#39;5f8708db2018186b6ef66822&#39;,
        &#39;label&#39;: &#39;sunny&#39;,
        &#39;confidence&#39;: 0.9,
        &#39;logits&#39;: None,
    }&gt;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can <a class="reference internal" href="#storing-classes"><span class="std std-ref">store class lists</span></a> for your
models on your datasets.</p>
</div>
</div>
<div class="section" id="multilabel-classification">
<span id="id20"></span><h3>Multilabel classification<a class="headerlink" href="#multilabel-classification" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classifications" title="fiftyone.core.labels.Classifications"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classifications</span></code></a> class represents a list of classification labels for an
image. The typical use case is to represent multilabel annotations/predictions
for an image, where multiple labels from a model may apply to a given image.
The labels are stored in a
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classifications.classifications" title="fiftyone.core.labels.Classifications.classifications"><code class="xref py py-attr docutils literal notranslate"><span class="pre">classifications</span></code></a>
attribute of the object, which contains a list of <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification" title="fiftyone.core.labels.Classification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classification</span></code></a> instances.</p>
<p>Metadata about individual labels can be stored in the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification" title="fiftyone.core.labels.Classification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classification</span></code></a>
instances as usual; additionally, you can optionally store logits for the
overarching model (if applicable) in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classifications.logits" title="fiftyone.core.labels.Classifications.logits"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logits</span></code></a> attribute of the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classifications" title="fiftyone.core.labels.Classifications"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classifications</span></code></a> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classifications</span><span class="p">(</span>
    <span class="n">classifications</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;animal&quot;</span><span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;tabby&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classifications</span><span class="p">(</span>
    <span class="n">classifications</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;animal&quot;</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.99</span><span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.98</span><span class="p">),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;tabby&quot;</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.72</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;ground_truth&#39;: &lt;Classifications: {
        &#39;classifications&#39;: [
            &lt;Classification: {
                &#39;id&#39;: &#39;5f8708f62018186b6ef66823&#39;,
                &#39;label&#39;: &#39;animal&#39;,
                &#39;confidence&#39;: None,
                &#39;logits&#39;: None,
            }&gt;,
            &lt;Classification: {
                &#39;id&#39;: &#39;5f8708f62018186b6ef66824&#39;,
                &#39;label&#39;: &#39;cat&#39;,
                &#39;confidence&#39;: None,
                &#39;logits&#39;: None,
            }&gt;,
            &lt;Classification: {
                &#39;id&#39;: &#39;5f8708f62018186b6ef66825&#39;,
                &#39;label&#39;: &#39;tabby&#39;,
                &#39;confidence&#39;: None,
                &#39;logits&#39;: None,
            }&gt;,
        ],
        &#39;logits&#39;: None,
    }&gt;,
    &#39;prediction&#39;: &lt;Classifications: {
        &#39;classifications&#39;: [
            &lt;Classification: {
                &#39;id&#39;: &#39;5f8708f62018186b6ef66826&#39;,
                &#39;label&#39;: &#39;animal&#39;,
                &#39;confidence&#39;: 0.99,
                &#39;logits&#39;: None,
            }&gt;,
            &lt;Classification: {
                &#39;id&#39;: &#39;5f8708f62018186b6ef66827&#39;,
                &#39;label&#39;: &#39;cat&#39;,
                &#39;confidence&#39;: 0.98,
                &#39;logits&#39;: None,
            }&gt;,
            &lt;Classification: {
                &#39;id&#39;: &#39;5f8708f62018186b6ef66828&#39;,
                &#39;label&#39;: &#39;tabby&#39;,
                &#39;confidence&#39;: 0.72,
                &#39;logits&#39;: None,
            }&gt;,
        ],
        &#39;logits&#39;: None,
    }&gt;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can <a class="reference internal" href="#storing-classes"><span class="std std-ref">store class lists</span></a> for your
models on your datasets.</p>
</div>
</div>
<div class="section" id="object-detection">
<span id="id21"></span><h3>Object detection<a class="headerlink" href="#object-detection" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> class represents a list of object detections in an image. The
detections are stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections.detections" title="fiftyone.core.labels.Detections.detections"><code class="xref py py-attr docutils literal notranslate"><span class="pre">detections</span></code></a> attribute of
the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> object.</p>
<p>Each individual object detection is represented by a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection" title="fiftyone.core.labels.Detection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detection</span></code></a> object. The
string label of the object should be stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.label" title="fiftyone.core.labels.Detection.label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">label</span></code></a> attribute, and the
bounding box for the object should be stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.bounding_box" title="fiftyone.core.labels.Detection.bounding_box"><code class="xref py py-attr docutils literal notranslate"><span class="pre">bounding_box</span></code></a> attribute.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FiftyOne stores box coordinates as floats in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> relative to the
dimensions of the image. Bounding boxes are represented by a length-4 list
in the format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&lt;top-left-x&gt;, &lt;top-left-y&gt;, &lt;width&gt;, &lt;height&gt;]
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? FiftyOne also supports <a class="reference internal" href="#d-detections"><span class="std std-ref">3D detections</span></a>!</p>
</div>
<p>In the case of model predictions, an optional confidence score for each
detection can be stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.confidence" title="fiftyone.core.labels.Detection.confidence"><code class="xref py py-attr docutils literal notranslate"><span class="pre">confidence</span></code></a> attribute.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
    <span class="n">detections</span><span class="o">=</span><span class="p">[</span><span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])]</span>
<span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
    <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
            <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.480</span><span class="p">,</span> <span class="mf">0.513</span><span class="p">,</span> <span class="mf">0.397</span><span class="p">,</span> <span class="mf">0.288</span><span class="p">],</span>
            <span class="n">confidence</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;ground_truth&#39;: &lt;Detections: {
        &#39;detections&#39;: [
            &lt;Detection: {
                &#39;id&#39;: &#39;5f8709172018186b6ef66829&#39;,
                &#39;attributes&#39;: {},
                &#39;label&#39;: &#39;cat&#39;,
                &#39;bounding_box&#39;: [0.5, 0.5, 0.4, 0.3],
                &#39;mask&#39;: None,
                &#39;confidence&#39;: None,
                &#39;index&#39;: None,
            }&gt;,
        ],
    }&gt;,
    &#39;prediction&#39;: &lt;Detections: {
        &#39;detections&#39;: [
            &lt;Detection: {
                &#39;id&#39;: &#39;5f8709172018186b6ef6682a&#39;,
                &#39;attributes&#39;: {},
                &#39;label&#39;: &#39;cat&#39;,
                &#39;bounding_box&#39;: [0.48, 0.513, 0.397, 0.288],
                &#39;mask&#39;: None,
                &#39;confidence&#39;: 0.96,
                &#39;index&#39;: None,
            }&gt;,
        ],
    }&gt;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can <a class="reference internal" href="#storing-classes"><span class="std std-ref">store class lists</span></a> for your
models on your datasets.</p>
</div>
<p>Like all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> types, you can also add custom attributes to your detections
by dynamically adding new fields to each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection" title="fiftyone.core.labels.Detection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detection</span></code></a> instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
    <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
    <span class="n">age</span><span class="o">=</span><span class="mi">51</span><span class="p">,</span>  <span class="c1"># custom attribute</span>
    <span class="n">mood</span><span class="o">=</span><span class="s2">&quot;salty&quot;</span><span class="p">,</span>  <span class="c1"># custom attribute</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">detection</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Detection: {
    &#39;id&#39;: &#39;60f7458c467d81f41c200551&#39;,
    &#39;attributes&#39;: {},
    &#39;tags&#39;: [],
    &#39;label&#39;: &#39;cat&#39;,
    &#39;bounding_box&#39;: [0.5, 0.5, 0.4, 0.3],
    &#39;mask&#39;: None,
    &#39;confidence&#39;: None,
    &#39;index&#39;: None,
    &#39;age&#39;: 51,
    &#39;mood&#39;: &#39;salty&#39;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view custom attributes in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="instance-segmentations">
<span id="instance-segmentation"></span><h3>Instance segmentations<a class="headerlink" href="#instance-segmentations" title="Permalink to this headline">Â¶</a></h3>
<p>Object detections stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> may also have instance segmentation
masks.</p>
<p>These masks can be stored in one of two ways: either directly in the database
via the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.mask" title="fiftyone.core.labels.Detection.mask"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask</span></code></a> attribute, or on
disk referenced by the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.mask_path" title="fiftyone.core.labels.Detection.mask_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask_path</span></code></a> attribute.</p>
<p>Masks stored directly in the database must be 2D numpy arrays
containing either booleans or 0/1 integers that encode the extent of the
instance mask within the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.bounding_box" title="fiftyone.core.labels.Detection.bounding_box"><code class="xref py py-attr docutils literal notranslate"><span class="pre">bounding_box</span></code></a> of the
object.</p>
<p>For masks stored on disk, the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.mask_path" title="fiftyone.core.labels.Detection.mask_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask_path</span></code></a> attribute should
contain the file path to the mask image. We recommend storing masks as
single-channel PNG images, where a pixel value of 0 indicates the
background (rendered as transparent in the App), and any other
value indicates the object.</p>
<p>Masks can be of any size; they are stretched as necessary to fill the
objectâ€™s bounding box when visualizing in the App.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="c1"># Example instance mask</span>
<span class="n">mask</span> <span class="o">=</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">mask_path</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mask.png&quot;</span>
<span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">mask_path</span><span class="p">)</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
    <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
            <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.480</span><span class="p">,</span> <span class="mf">0.513</span><span class="p">,</span> <span class="mf">0.397</span><span class="p">,</span> <span class="mf">0.288</span><span class="p">],</span>
            <span class="n">mask_path</span><span class="o">=</span><span class="n">mask_path</span><span class="p">,</span>
            <span class="n">confidence</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;prediction&#39;: &lt;Detections: {
        &#39;detections&#39;: [
            &lt;Detection: {
                &#39;id&#39;: &#39;5f8709282018186b6ef6682b&#39;,
                &#39;attributes&#39;: {},
                &#39;tags&#39;: [],
                &#39;label&#39;: &#39;cat&#39;,
                &#39;bounding_box&#39;: [0.48, 0.513, 0.397, 0.288],
                &#39;mask&#39;: None,
                &#39;mask_path&#39;: &#39;/path/to/mask.png&#39;,
                &#39;confidence&#39;: 0.96,
                &#39;index&#39;: None,
            }&gt;,
        ],
    }&gt;,
}&gt;
</pre></div>
</div>
<p>Like all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> types, you can also add custom attributes to your instance
segmentations by dynamically adding new fields to each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection" title="fiftyone.core.labels.Detection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detection</span></code></a> instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
    <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
    <span class="n">mask_path</span><span class="o">=</span><span class="s2">&quot;/path/to/mask.png&quot;</span><span class="p">,</span>
    <span class="n">age</span><span class="o">=</span><span class="mi">51</span><span class="p">,</span>  <span class="c1"># custom attribute</span>
    <span class="n">mood</span><span class="o">=</span><span class="s2">&quot;salty&quot;</span><span class="p">,</span>  <span class="c1"># custom attribute</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">detection</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Detection: {
    &#39;id&#39;: &#39;60f74568467d81f41c200550&#39;,
    &#39;attributes&#39;: {},
    &#39;tags&#39;: [],
    &#39;label&#39;: &#39;cat&#39;,
    &#39;bounding_box&#39;: [0.5, 0.5, 0.4, 0.3],
    &#39;mask_path&#39;: &#39;/path/to/mask.png&#39;,
    &#39;confidence&#39;: None,
    &#39;index&#39;: None,
    &#39;age&#39;: 51,
    &#39;mood&#39;: &#39;salty&#39;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view custom attributes in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="polylines-and-polygons">
<span id="polylines"></span><h3>Polylines and polygons<a class="headerlink" href="#polylines-and-polygons" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polylines" title="fiftyone.core.labels.Polylines"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polylines</span></code></a> class represents a list of
<a class="reference external" href="https://en.wikipedia.org/wiki/Polygonal_chain">polylines</a> or
<a class="reference external" href="https://en.wikipedia.org/wiki/Polygon">polygons</a> in an image. The polylines
are stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polylines.polylines" title="fiftyone.core.labels.Polylines.polylines"><code class="xref py py-attr docutils literal notranslate"><span class="pre">polylines</span></code></a> attribute of the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polylines" title="fiftyone.core.labels.Polylines"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polylines</span></code></a> object.</p>
<p>Each individual polyline is represented by a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline" title="fiftyone.core.labels.Polyline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polyline</span></code></a> object, which
represents a set of one or more semantically related shapes in an image. The
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.points" title="fiftyone.core.labels.Polyline.points"><code class="xref py py-attr docutils literal notranslate"><span class="pre">points</span></code></a> attribute contains a
list of lists of <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code> coordinates defining the vertices of each shape
in the polyline. If the polyline represents a closed curve, you can set the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.closed" title="fiftyone.core.labels.Polyline.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">closed</span></code></a> attribute to <code class="docutils literal notranslate"><span class="pre">True</span></code> to
indicate that a line segment should be drawn from the last vertex to the first
vertex of each shape in the polyline. If the shapes should be filled when
rendering them, you can set the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.filled" title="fiftyone.core.labels.Polyline.filled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filled</span></code></a> attribute to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
Polylines can also have string labels, which are stored in their
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.label" title="fiftyone.core.labels.Polyline.label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">label</span></code></a> attribute.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FiftyOne stores vertex coordinates as floats in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> relative to the
dimensions of the image.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? FiftyOne also supports <a class="reference internal" href="#d-polylines"><span class="std std-ref">3D polylines</span></a>!</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="c1"># A simple polyline</span>
<span class="n">polyline1</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="p">(</span>
    <span class="n">points</span><span class="o">=</span><span class="p">[[(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)]],</span>
    <span class="n">closed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">filled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># A closed, filled polygon with a label</span>
<span class="n">polyline2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;triangle&quot;</span><span class="p">,</span>
    <span class="n">points</span><span class="o">=</span><span class="p">[[(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)]],</span>
    <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;polylines&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polylines</span><span class="p">(</span><span class="n">polylines</span><span class="o">=</span><span class="p">[</span><span class="n">polyline1</span><span class="p">,</span> <span class="n">polyline2</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;polylines&#39;: &lt;Polylines: {
        &#39;polylines&#39;: [
            &lt;Polyline: {
                &#39;id&#39;: &#39;5f87094e2018186b6ef6682e&#39;,
                &#39;attributes&#39;: {},
                &#39;label&#39;: None,
                &#39;points&#39;: [[(0.3, 0.3), (0.7, 0.3), (0.7, 0.3)]],
                &#39;index&#39;: None,
                &#39;closed&#39;: False,
                &#39;filled&#39;: False,
            }&gt;,
            &lt;Polyline: {
                &#39;id&#39;: &#39;5f87094e2018186b6ef6682f&#39;,
                &#39;attributes&#39;: {},
                &#39;label&#39;: &#39;triangle&#39;,
                &#39;points&#39;: [[(0.1, 0.1), (0.3, 0.1), (0.3, 0.3)]],
                &#39;index&#39;: None,
                &#39;closed&#39;: True,
                &#39;filled&#39;: True,
            }&gt;,
        ],
    }&gt;,
}&gt;
</pre></div>
</div>
<p>Like all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> types, you can also add custom attributes to your polylines by
dynamically adding new fields to each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline" title="fiftyone.core.labels.Polyline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polyline</span></code></a> instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">polyline</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;triangle&quot;</span><span class="p">,</span>
    <span class="n">points</span><span class="o">=</span><span class="p">[[(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)]],</span>
    <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span>  <span class="c1"># custom attribute</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">polyline</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Polyline: {
    &#39;id&#39;: &#39;60f746b4467d81f41c200555&#39;,
    &#39;attributes&#39;: {},
    &#39;tags&#39;: [],
    &#39;label&#39;: &#39;triangle&#39;,
    &#39;points&#39;: [[(0.1, 0.1), (0.3, 0.1), (0.3, 0.3)]],
    &#39;confidence&#39;: None,
    &#39;index&#39;: None,
    &#39;closed&#39;: True,
    &#39;filled&#39;: True,
    &#39;kind&#39;: &#39;right&#39;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view custom attributes in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="cuboids">
<span id="id22"></span><h3>Cuboids<a class="headerlink" href="#cuboids" title="Permalink to this headline">Â¶</a></h3>
<p>You can store and visualize cuboids in FiftyOne using the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.from_cuboid" title="fiftyone.core.labels.Polyline.from_cuboid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Polyline.from_cuboid()</span></code></a>
method.</p>
<p>The method accepts a list of 8 <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code> points describing the vertices of the
cuboid in the format depicted below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>   7--------6
  /|       /|
 / |      / |
3--------2  |
|  4-----|--5
| /      | /
|/       |/
0--------1
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FiftyOne stores vertex coordinates as floats in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> relative to the
dimensions of the image.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="k">def</span> <span class="nf">random_cuboid</span><span class="p">(</span><span class="n">frame_size</span><span class="p">):</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">frame_size</span>
    <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">])</span> <span class="o">*</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mf">0.8</span> <span class="o">*</span> <span class="n">width</span> <span class="o">-</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">-</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">height</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">dy</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">front</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">h</span><span class="p">),</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">h</span><span class="p">)]</span>
    <span class="n">back</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">h</span><span class="p">),</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">h</span><span class="p">)]</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">front</span> <span class="o">+</span> <span class="n">back</span>
    <span class="k">return</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="o">.</span><span class="n">from_cuboid</span><span class="p">(</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="n">frame_size</span><span class="o">=</span><span class="n">frame_size</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cuboid&quot;</span>
    <span class="p">)</span>

<span class="n">frame_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>

<span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;/tmp/image.png&quot;</span>
<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">frame_size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">frame_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">))</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;cuboids&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">filepath</span><span class="p">,</span> <span class="n">cuboid</span><span class="o">=</span><span class="n">random_cuboid</span><span class="p">(</span><span class="n">frame_size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">51</span><span class="p">)]</span>
<span class="p">)</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="cuboids" class="align-center" src="../_images/cuboids.png" />
<p>Like all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> types, you can also add custom attributes to your cuboids by
dynamically adding new fields to each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline" title="fiftyone.core.labels.Polyline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polyline</span></code></a> instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">polyline</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="o">.</span><span class="n">from_cuboid</span><span class="p">(</span>
    <span class="n">vertics</span><span class="p">,</span> <span class="n">frame_size</span><span class="o">=</span><span class="n">frame_size</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;vehicle&quot;</span><span class="p">,</span>
    <span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;sedan&quot;</span><span class="p">,</span>  <span class="c1"># custom attribute</span>
<span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view custom attributes in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="rotated-bounding-boxes">
<span id="id23"></span><h3>Rotated bounding boxes<a class="headerlink" href="#rotated-bounding-boxes" title="Permalink to this headline">Â¶</a></h3>
<p>You can store and visualize rotated bounding boxes in FiftyOne using the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.from_rotated_box" title="fiftyone.core.labels.Polyline.from_rotated_box"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Polyline.from_rotated_box()</span></code></a>
method, which accepts rotated boxes described by their center coordinates,
width/height, and counter-clockwise rotation, in radians.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FiftyOne stores vertex coordinates as floats in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> relative to the
dimensions of the image.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="k">def</span> <span class="nf">random_rotated_box</span><span class="p">(</span><span class="n">frame_size</span><span class="p">):</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">frame_size</span>
    <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.2</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">,</span> <span class="n">width</span> <span class="o">-</span> <span class="n">xc</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="n">yc</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="o">.</span><span class="n">from_rotated_box</span><span class="p">(</span>
        <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">frame_size</span><span class="o">=</span><span class="n">frame_size</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;box&quot;</span>
    <span class="p">)</span>

<span class="n">frame_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>

<span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;/tmp/image.png&quot;</span>
<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">frame_size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">frame_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">))</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;rotated-boxes&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">filepath</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">random_rotated_box</span><span class="p">(</span><span class="n">frame_size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">51</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="rotated-bounding-boxes" class="align-center" src="../_images/rotated-bounding-boxes.png" />
<p>Like all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> types, you can also add custom attributes to your rotated
bounding boxes by dynamically adding new fields to each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline" title="fiftyone.core.labels.Polyline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polyline</span></code></a> instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">polyline</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="o">.</span><span class="n">from_rotated_box</span><span class="p">(</span>
    <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">frame_size</span><span class="o">=</span><span class="n">frame_size</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
    <span class="n">mood</span><span class="o">=</span><span class="s2">&quot;surly&quot;</span><span class="p">,</span>  <span class="c1"># custom attribute</span>
<span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view custom attributes in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="keypoints">
<span id="id24"></span><h3>Keypoints<a class="headerlink" href="#keypoints" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoints" title="fiftyone.core.labels.Keypoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoints</span></code></a> class represents a collection of keypoint groups in an image.
The keypoint groups are stored in the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoints.keypoints" title="fiftyone.core.labels.Keypoints.keypoints"><code class="xref py py-attr docutils literal notranslate"><span class="pre">keypoints</span></code></a> attribute of the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoints" title="fiftyone.core.labels.Keypoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoints</span></code></a> object. Each element of this list is a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> object whose
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint.points" title="fiftyone.core.labels.Keypoint.points"><code class="xref py py-attr docutils literal notranslate"><span class="pre">points</span></code></a> attribute contains a
list of <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code> coordinates defining a group of semantically related
keypoints in the image.</p>
<p>For example, if you are working with a person model that outputs 18 keypoints
(<code class="code docutils literal notranslate"><span class="pre">left</span> <span class="pre">eye</span></code>, <code class="code docutils literal notranslate"><span class="pre">right</span> <span class="pre">eye</span></code>, <code class="code docutils literal notranslate"><span class="pre">nose</span></code>, etc.) per person, then each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a>
instance would represent one person, and a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoints" title="fiftyone.core.labels.Keypoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoints</span></code></a> instance would represent
the list of people in the image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FiftyOne stores keypoint coordinates as floats in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> relative to the
dimensions of the image.</p>
</div>
<p>Each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> object can have a string label, which is stored in its
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint.label" title="fiftyone.core.labels.Keypoint.label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">label</span></code></a> attribute, and it can
optionally have a list of per-point confidences in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> in its
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint.confidence" title="fiftyone.core.labels.Keypoint.confidence"><code class="xref py py-attr docutils literal notranslate"><span class="pre">confidence</span></code></a> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;keypoints&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Keypoints</span><span class="p">(</span>
    <span class="n">keypoints</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Keypoint</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span>
            <span class="n">points</span><span class="o">=</span><span class="p">[(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">)],</span>
            <span class="n">confidence</span><span class="o">=</span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;keypoints&#39;: &lt;Keypoints: {
        &#39;keypoints&#39;: [
            &lt;Keypoint: {
                &#39;id&#39;: &#39;5f8709702018186b6ef66831&#39;,
                &#39;attributes&#39;: {},
                &#39;label&#39;: &#39;square&#39;,
                &#39;points&#39;: [(0.3, 0.3), (0.7, 0.3), (0.7, 0.7), (0.3, 0.7)],
                &#39;confidence&#39;: [0.6, 0.7, 0.8, 0.9],
                &#39;index&#39;: None,
            }&gt;,
        ],
    }&gt;,
}&gt;
</pre></div>
</div>
<p>Like all <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> types, you can also add custom attributes to your keypoints by
dynamically adding new fields to each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> instance. As a special case,
if you add a custom list attribute to a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> instance whose length
matches the number of points, these values will be interpreted as per-point
attributes and rendered as such in the App:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">keypoint</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Keypoint</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span>  <span class="c1"># custom object attribute</span>
    <span class="n">points</span><span class="o">=</span><span class="p">[(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">)],</span>
    <span class="n">confidence</span><span class="o">=</span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">],</span>
    <span class="n">occluded</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>  <span class="c1"># custom per-point attributes</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">keypoint</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Keypoint: {
    &#39;id&#39;: &#39;60f74723467d81f41c200556&#39;,
    &#39;attributes&#39;: {},
    &#39;tags&#39;: [],
    &#39;label&#39;: &#39;rectangle&#39;,
    &#39;points&#39;: [(0.3, 0.3), (0.7, 0.3), (0.7, 0.7), (0.3, 0.7)],
    &#39;confidence&#39;: [0.6, 0.7, 0.8, 0.9],
    &#39;index&#39;: None,
    &#39;kind&#39;: &#39;square&#39;,
    &#39;occluded&#39;: [False, False, True, False],
}&gt;
</pre></div>
</div>
<p>If your keypoints have semantic meanings, you can
<a class="reference internal" href="#storing-keypoint-skeletons"><span class="std std-ref">store keypoint skeletons</span></a> on your dataset to
encode the meanings.</p>
<p>If you are working with keypoint skeletons and a particular point is missing or
not visible for an instance, use nan values for its coordinates:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">keypoint</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Keypoint</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
    <span class="n">points</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
        <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)),</span>  <span class="c1"># use nan to encode missing points</span>
        <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? When you view datasets with
<a class="reference internal" href="#storing-keypoint-skeletons"><span class="std std-ref">keypoint skeletons</span></a> in the App, label
strings and edges will be drawn when you visualize the keypoint fields.</p>
</div>
</div>
<div class="section" id="semantic-segmentation">
<span id="id25"></span><h3>Semantic segmentation<a class="headerlink" href="#semantic-segmentation" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation" title="fiftyone.core.labels.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> class represents a semantic segmentation mask for an image
with integer values encoding the semantic labels for each pixel in the image.</p>
<p>The mask can either be stored on disk and referenced via the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation.mask_path" title="fiftyone.core.labels.Segmentation.mask_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask_path</span></code></a> attribute or
stored directly in the database via the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation.mask" title="fiftyone.core.labels.Segmentation.mask"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask</span></code></a> attribute.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to store segmentations on disk and reference them via the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation.mask_path" title="fiftyone.core.labels.Segmentation.mask_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask_path</span></code></a> attribute,
for efficiency.</p>
<p>Note that <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation.mask_path" title="fiftyone.core.labels.Segmentation.mask_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask_path</span></code></a>
must contain the <strong>absolute path</strong> to the mask on disk in order to use the
dataset from different current working directories in the future.</p>
</div>
<p>Segmentation masks can be stored in either of these formats:</p>
<ul class="simple">
<li><p>2D 8-bit or 16-bit images or numpy arrays</p></li>
<li><p>3D 8-bit RGB images or numpy arrays</p></li>
</ul>
<p>Segmentation masks can have any size; they are stretched as necessary to fit
the imageâ€™s extent when visualizing in the App.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="c1"># Example segmentation mask</span>
<span class="n">mask_path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/segmentation.png&quot;</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">mask_path</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;segmentation1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Segmentation</span><span class="p">(</span><span class="n">mask_path</span><span class="o">=</span><span class="n">mask_path</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;segmentation2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Segmentation</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;segmentation1&#39;: &lt;Segmentation: {
        &#39;id&#39;: &#39;6371d72425de9907b93b2a6b&#39;,
        &#39;tags&#39;: [],
        &#39;mask&#39;: None,
        &#39;mask_path&#39;: &#39;/tmp/segmentation.png&#39;,
    }&gt;,
    &#39;segmentation2&#39;: &lt;Segmentation: {
        &#39;id&#39;: &#39;6371d72425de9907b93b2a6c&#39;,
        &#39;tags&#39;: [],
        &#39;mask&#39;: array([[8, 5, 5, ..., 9, 8, 5],
               [0, 7, 8, ..., 3, 4, 4],
               [5, 0, 2, ..., 0, 3, 4],
               ...,
               [4, 4, 4, ..., 3, 6, 6],
               [0, 9, 8, ..., 8, 0, 8],
               [0, 6, 8, ..., 2, 9, 1]], dtype=uint8),
        &#39;mask_path&#39;: None,
    }&gt;,
}&gt;
</pre></div>
</div>
<p>When you load datasets with <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation" title="fiftyone.core.labels.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> fields containing 2D masks in the
App, each pixel value is rendered as a different color (if possible) from the
Appâ€™s color pool. When you view RGB segmentation masks in the App, the mask
colors are always used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can <a class="reference internal" href="#storing-mask-targets"><span class="std std-ref">store semantic labels</span></a>
for your segmentation fields on your dataset. Then, when you view the
dataset in the App, label strings will appear in the Appâ€™s tooltip when you
hover over pixels.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pixel value <code class="code docutils literal notranslate"><span class="pre">0</span></code> and RGB value <code class="code docutils literal notranslate"><span class="pre">#000000</span></code> are reserved â€œbackgroundâ€
classes that are always rendered as invisible in the App.</p>
<p>If <a class="reference internal" href="#storing-mask-targets"><span class="std std-ref">mask targets</span></a> are provided, all observed
values not present in the targets are also rendered as invisible in the
App.</p>
</div>
</div>
<div class="section" id="heatmaps">
<span id="id26"></span><h3>Heatmaps<a class="headerlink" href="#heatmaps" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap" title="fiftyone.core.labels.Heatmap"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heatmap</span></code></a> class represents a continuous-valued heatmap for an image.</p>
<p>The map can either be stored on disk and referenced via the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.map_path" title="fiftyone.core.labels.Heatmap.map_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">map_path</span></code></a> attribute or stored
directly in the database via the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.map" title="fiftyone.core.labels.Heatmap.map"><code class="xref py py-attr docutils literal notranslate"><span class="pre">map</span></code></a>
attribute. When using the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.map_path" title="fiftyone.core.labels.Heatmap.map_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">map_path</span></code></a> attribute, heatmaps
may be 8-bit or 16-bit grayscale images. When using the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.map" title="fiftyone.core.labels.Heatmap.map"><code class="xref py py-attr docutils literal notranslate"><span class="pre">map</span></code></a> attribute, heatmaps should be 2D
numpy arrays. By default, the map values are assumed to be in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> for
floating point arrays and <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">255]</span></code> for integer-valued arrays, but you can
specify a custom <code class="code docutils literal notranslate"><span class="pre">[min,</span> <span class="pre">max]</span></code> range for a map by setting its optional
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.range" title="fiftyone.core.labels.Heatmap.range"><code class="xref py py-attr docutils literal notranslate"><span class="pre">range</span></code></a> attribute.</p>
<p>Heatmaps can have any size; they are stretched as necessary to fit the
imageâ€™s extent when visualizing in the App.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to store heatmaps on disk and reference them via the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.map_path" title="fiftyone.core.labels.Heatmap.map_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">map_path</span></code></a> attribute, for
efficiency.</p>
<p>Note that <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.map_path" title="fiftyone.core.labels.Heatmap.map_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">map_path</span></code></a>
must contain the <strong>absolute path</strong> to the map on disk in order to use the
dataset from different current working directories in the future.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="c1"># Example heatmap</span>
<span class="n">map_path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/heatmap.png&quot;</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">map_path</span><span class="p">,</span> <span class="nb">map</span><span class="p">)</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;heatmap1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Heatmap</span><span class="p">(</span><span class="n">map_path</span><span class="o">=</span><span class="n">map_path</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;heatmap2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Heatmap</span><span class="p">(</span><span class="nb">map</span><span class="o">=</span><span class="nb">map</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;heatmap1&#39;: &lt;Heatmap: {
        &#39;id&#39;: &#39;6371d9e425de9907b93b2a6f&#39;,
        &#39;tags&#39;: [],
        &#39;map&#39;: None,
        &#39;map_path&#39;: &#39;/tmp/heatmap.png&#39;,
        &#39;range&#39;: None,
    }&gt;,
    &#39;heatmap2&#39;: &lt;Heatmap: {
        &#39;id&#39;: &#39;6371d9e425de9907b93b2a70&#39;,
        &#39;tags&#39;: [],
        &#39;map&#39;: array([[179, 249, 119, ...,  94, 213,  68],
               [190, 202, 209, ..., 162,  16,  39],
               [252, 251, 181, ..., 221, 118, 231],
               ...,
               [ 12,  91, 201, ...,  14,  95,  88],
               [164, 118, 171, ...,  21, 170,   5],
               [232, 156, 218, ..., 224,  97,  65]], dtype=uint8),
        &#39;map_path&#39;: None,
        &#39;range&#39;: None,
    }&gt;,
}&gt;
</pre></div>
</div>
<p>When visualizing heatmaps <a class="reference internal" href="app.html#fiftyone-app"><span class="std std-ref">in the App</span></a>, when the App is
in color-by-field mode, heatmaps are rendered in their fieldâ€™s color with
opacity proportional to the magnitude of the heatmapâ€™s values. For example, for
a heatmap whose <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Heatmap.range" title="fiftyone.core.labels.Heatmap.range"><code class="xref py py-attr docutils literal notranslate"><span class="pre">range</span></code></a> is
<code class="code docutils literal notranslate"><span class="pre">[-10,</span> <span class="pre">10]</span></code>, pixels with the value +9 will be rendered with 90% opacity, and
pixels with the value -3 will be rendered with 30% opacity.</p>
<p>When the App is in color-by-value mode, heatmaps are rendered using the
colormap defined by the <code class="code docutils literal notranslate"><span class="pre">colorscale</span></code> of your
<a class="reference internal" href="config.html#configuring-fiftyone-app"><span class="std std-ref">App config</span></a>, which can be:</p>
<ul>
<li><p>The string name of any colorscale
<a class="reference external" href="https://plotly.com/python/colorscales">recognized by Plotly</a></p></li>
<li><p>A manually-defined colorscale like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">[</span><span class="mf">0.000</span><span class="p">,</span> <span class="s2">&quot;rgb(165,0,38)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.111</span><span class="p">,</span> <span class="s2">&quot;rgb(215,48,39)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.222</span><span class="p">,</span> <span class="s2">&quot;rgb(244,109,67)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.333</span><span class="p">,</span> <span class="s2">&quot;rgb(253,174,97)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.444</span><span class="p">,</span> <span class="s2">&quot;rgb(254,224,144)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.555</span><span class="p">,</span> <span class="s2">&quot;rgb(224,243,248)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.666</span><span class="p">,</span> <span class="s2">&quot;rgb(171,217,233)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.777</span><span class="p">,</span> <span class="s2">&quot;rgb(116,173,209)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.888</span><span class="p">,</span> <span class="s2">&quot;rgb(69,117,180)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">1.000</span><span class="p">,</span> <span class="s2">&quot;rgb(49,54,149)&quot;</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
<p>The example code below demonstrates the possibilities that heatmaps provide by
overlaying random gaussian kernels with positive or negative sign on an image
dataset and configuring the Appâ€™s colorscale in various ways on-the-fly:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="k">def</span> <span class="nf">random_kernel</span><span class="p">(</span><span class="n">metadata</span><span class="p">):</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">())</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">h</span><span class="p">))</span>
    <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span>
    <span class="n">kernel</span> <span class="o">=</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">fo</span><span class="o">.</span><span class="n">Heatmap</span><span class="p">(</span><span class="nb">map</span><span class="o">=</span><span class="n">kernel</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">select_fields</span><span class="p">()</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">compute_metadata</span><span class="p">()</span>

<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="n">heatmap</span> <span class="o">=</span> <span class="n">random_kernel</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>

    <span class="c1"># Convert to on-disk</span>
    <span class="n">map_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;/tmp/heatmaps&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">filepath</span><span class="p">))</span>
    <span class="n">heatmap</span><span class="o">.</span><span class="n">export_map</span><span class="p">(</span><span class="n">map_path</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;heatmap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">heatmap</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Select `Settings -&gt; Color by value` in the App</span>
<span class="c1"># Heatmaps will now be rendered using your default colorscale (printed below)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">colorscale</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Switch to a different named colorscale</span>
<span class="n">session</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">colorscale</span> <span class="o">=</span> <span class="s2">&quot;RdBu&quot;</span>
<span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Switch to a custom colorscale</span>
<span class="n">session</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">colorscale</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mf">0.00</span><span class="p">,</span> <span class="s2">&quot;rgb(166,206,227)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="s2">&quot;rgb(31,120,180)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.45</span><span class="p">,</span> <span class="s2">&quot;rgb(178,223,138)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.65</span><span class="p">,</span> <span class="s2">&quot;rgb(51,160,44)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.85</span><span class="p">,</span> <span class="s2">&quot;rgb(251,154,153)&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">1.00</span><span class="p">,</span> <span class="s2">&quot;rgb(227,26,28)&quot;</span><span class="p">],</span>
<span class="p">]</span>
<span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You customize your App config in various ways, from
environment variables to directly editing a <a class="reference internal" href="../api/fiftyone.core.session.html#fiftyone.core.session.Session" title="fiftyone.core.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objectâ€™s config.
See <a class="reference internal" href="config.html#configuring-fiftyone-app"><span class="std std-ref">this page</span></a> for more details.</p>
</div>
</div>
<div class="section" id="temporal-detection">
<span id="id27"></span><h3>Temporal detection<a class="headerlink" href="#temporal-detection" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.TemporalDetection" title="fiftyone.core.labels.TemporalDetection"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemporalDetection</span></code></a> class represents an event occurring during a specified
range of frames in a video.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.TemporalDetection.label" title="fiftyone.core.labels.TemporalDetection.label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">label</span></code></a> attribute
stores the detection label, and the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.TemporalDetection.support" title="fiftyone.core.labels.TemporalDetection.support"><code class="xref py py-attr docutils literal notranslate"><span class="pre">support</span></code></a> attribute
stores the <code class="code docutils literal notranslate"><span class="pre">[first,</span> <span class="pre">last]</span></code> frame range of the detection in the video.</p>
<p>The optional
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.TemporalDetection.confidence" title="fiftyone.core.labels.TemporalDetection.confidence"><code class="xref py py-attr docutils literal notranslate"><span class="pre">confidence</span></code></a>
attribute can be used to store a model prediction score, and you can add
<a class="reference internal" href="#using-labels"><span class="std std-ref">custom attributes</span></a> as well, which can be visualized in the
App.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/video.mp4&quot;</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">TemporalDetection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;meeting&quot;</span><span class="p">,</span> <span class="n">support</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;video&#39;,
    &#39;filepath&#39;: &#39;/path/to/video.mp4&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;events&#39;: &lt;TemporalDetection: {
        &#39;id&#39;: &#39;61321c8ea36cb17df655f44f&#39;,
        &#39;tags&#39;: [],
        &#39;label&#39;: &#39;meeting&#39;,
        &#39;support&#39;: [10, 20],
        &#39;confidence&#39;: None,
    }&gt;,
    &#39;frames&#39;: &lt;Frames: 0&gt;,
}&gt;
</pre></div>
</div>
<p>If your temporal detection data is represented as timestamps in seconds, you
can use the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.TemporalDetection.from_timestamps" title="fiftyone.core.labels.TemporalDetection.from_timestamps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_timestamps()</span></code></a>
factory method to perform the necessary conversion to frames automatically
based on the sampleâ€™s <a class="reference internal" href="#using-metadata"><span class="std std-ref">video metadata</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="c1"># Download a video to work with</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">,</span> <span class="n">max_samples</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">filepath</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">sample</span><span class="o">.</span><span class="n">compute_metadata</span><span class="p">()</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">TemporalDetection</span><span class="o">.</span><span class="n">from_timestamps</span><span class="p">(</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;meeting&quot;</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="n">sample</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;video&#39;,
    &#39;filepath&#39;: &#39;~/fiftyone/quickstart-video/data/Ulcb3AjxM5g_053-1.mp4&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: &lt;VideoMetadata: {
        &#39;size_bytes&#39;: 1758809,
        &#39;mime_type&#39;: &#39;video/mp4&#39;,
        &#39;frame_width&#39;: 1920,
        &#39;frame_height&#39;: 1080,
        &#39;frame_rate&#39;: 29.97002997002997,
        &#39;total_frame_count&#39;: 120,
        &#39;duration&#39;: 4.004,
        &#39;encoding_str&#39;: &#39;avc1&#39;,
    }&gt;,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;events&#39;: &lt;TemporalDetection: {
        &#39;id&#39;: &#39;61321e498d5f587970b29183&#39;,
        &#39;tags&#39;: [],
        &#39;label&#39;: &#39;meeting&#39;,
        &#39;support&#39;: [31, 60],
        &#39;confidence&#39;: None,
    }&gt;,
    &#39;frames&#39;: &lt;Frames: 0&gt;,
}&gt;
</pre></div>
</div>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.TemporalDetections" title="fiftyone.core.labels.TemporalDetections"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemporalDetections</span></code></a> class holds a list of temporal detections for a
sample:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/video.mp4&quot;</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">TemporalDetections</span><span class="p">(</span>
    <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">TemporalDetection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;meeting&quot;</span><span class="p">,</span> <span class="n">support</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]),</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">TemporalDetection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;party&quot;</span><span class="p">,</span> <span class="n">support</span><span class="o">=</span><span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;video&#39;,
    &#39;filepath&#39;: &#39;/path/to/video.mp4&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;events&#39;: &lt;TemporalDetections: {
        &#39;detections&#39;: [
            &lt;TemporalDetection: {
                &#39;id&#39;: &#39;61321ed78d5f587970b29184&#39;,
                &#39;tags&#39;: [],
                &#39;label&#39;: &#39;meeting&#39;,
                &#39;support&#39;: [10, 20],
                &#39;confidence&#39;: None,
            }&gt;,
            &lt;TemporalDetection: {
                &#39;id&#39;: &#39;61321ed78d5f587970b29185&#39;,
                &#39;tags&#39;: [],
                &#39;label&#39;: &#39;party&#39;,
                &#39;support&#39;: [30, 60],
                &#39;confidence&#39;: None,
            }&gt;,
        ],
    }&gt;,
    &#39;frames&#39;: &lt;Frames: 0&gt;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can <a class="reference internal" href="#storing-classes"><span class="std std-ref">store class lists</span></a> for your
models on your datasets.</p>
</div>
</div>
<div class="section" id="d-detections">
<span id="id28"></span><h3>3D detections<a class="headerlink" href="#d-detections" title="Permalink to this headline">Â¶</a></h3>
<p>The Appâ€™s <a class="reference internal" href="app.html#app-3d-visualizer"><span class="std std-ref">3D visualizer</span></a> supports rendering 3D object
detections represented as <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection" title="fiftyone.core.labels.Detection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detection</span></code></a> instances with their <code class="code docutils literal notranslate"><span class="pre">label</span></code>, <code class="code docutils literal notranslate"><span class="pre">location</span></code>,
<code class="code docutils literal notranslate"><span class="pre">dimensions</span></code>, and <code class="code docutils literal notranslate"><span class="pre">rotation</span></code> attributes populated as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="c1"># Object label</span>
<span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;vehicle&quot;</span>

<span class="c1"># Object center `[x, y, z]` in scene coordinates</span>
<span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.47</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="mf">69.44</span><span class="p">]</span>

<span class="c1"># Object dimensions `[x, y, z]` in scene units</span>
<span class="n">dimensions</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.85</span><span class="p">,</span> <span class="mf">2.63</span><span class="p">,</span> <span class="mf">12.34</span><span class="p">]</span>

<span class="c1"># Object rotation `[x, y, z]` around its center, in `[-pi, pi]`</span>
<span class="n">rotation</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.56</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1"># A 3D object detection</span>
<span class="n">detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
    <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span>
    <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
<span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view custom attributes in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="d-polylines">
<span id="id29"></span><h3>3D polylines<a class="headerlink" href="#d-polylines" title="Permalink to this headline">Â¶</a></h3>
<p>The Appâ€™s <a class="reference internal" href="app.html#app-3d-visualizer"><span class="std std-ref">3D visualizer</span></a> supports rendering 3D
polylines represented as <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline" title="fiftyone.core.labels.Polyline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polyline</span></code></a> instances with their <code class="code docutils literal notranslate"><span class="pre">label</span></code> and <code class="code docutils literal notranslate"><span class="pre">points3d</span></code>
attributes populated as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="c1"># Object label</span>
<span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;lane&quot;</span>

<span class="c1"># A list of lists of `[x, y, z]` points in scene coordinates describing</span>
<span class="c1"># the vertices of each shape in the polyline</span>
<span class="n">points3d</span> <span class="o">=</span> <span class="p">[[[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">99</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">99</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]]]</span>

<span class="c1"># A set of semantically related 3D polylines</span>
<span class="n">polyline</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Polyline</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">points3d</span><span class="o">=</span><span class="n">points3d</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view custom attributes in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="geolocation">
<span id="id30"></span><h3>Geolocation<a class="headerlink" href="#geolocation" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.GeoLocation" title="fiftyone.core.labels.GeoLocation"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoLocation</span></code></a> class can store single pieces of location data in its
properties:</p>
<ul>
<li><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.GeoLocation.point" title="fiftyone.core.labels.GeoLocation.point"><code class="xref py py-attr docutils literal notranslate"><span class="pre">point</span></code></a>: a
<code class="docutils literal notranslate"><span class="pre">[longitude,</span> <span class="pre">latitude]</span></code> point</p></li>
<li><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.GeoLocation.line" title="fiftyone.core.labels.GeoLocation.line"><code class="xref py py-attr docutils literal notranslate"><span class="pre">line</span></code></a>: a line of longitude
and latitude coordinates stored in the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">lon1</span><span class="p">,</span> <span class="n">lat1</span><span class="p">],</span> <span class="p">[</span><span class="n">lon2</span><span class="p">,</span> <span class="n">lat2</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.GeoLocation.polygon" title="fiftyone.core.labels.GeoLocation.polygon"><code class="xref py py-attr docutils literal notranslate"><span class="pre">polygon</span></code></a>: a polygon of
longitude and latitude coordinates stored in the format below, where the
first element describes the boundary of the polygon and any remaining
entries describe holes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">[[</span><span class="n">lon1</span><span class="p">,</span> <span class="n">lat1</span><span class="p">],</span> <span class="p">[</span><span class="n">lon2</span><span class="p">,</span> <span class="n">lat2</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span>
    <span class="p">[[</span><span class="n">lon1</span><span class="p">,</span> <span class="n">lat1</span><span class="p">],</span> <span class="p">[</span><span class="n">lon2</span><span class="p">,</span> <span class="n">lat2</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All geolocation coordinates are stored in <code class="docutils literal notranslate"><span class="pre">[longitude,</span> <span class="pre">latitude]</span></code>
format.</p>
</div>
<p>If you have multiple geometries of each type that you wish to store on a single
sample, then you can use the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.GeoLocations" title="fiftyone.core.labels.GeoLocations"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoLocations</span></code></a> class and its appropriate
properties to do so.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">GeoLocation</span><span class="p">(</span>
    <span class="n">point</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">73.9855</span><span class="p">,</span> <span class="mf">40.7580</span><span class="p">],</span>
    <span class="n">polygon</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">73.949701</span><span class="p">,</span> <span class="mf">40.834487</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">73.896611</span><span class="p">,</span> <span class="mf">40.815076</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">73.998083</span><span class="p">,</span> <span class="mf">40.696534</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">74.031751</span><span class="p">,</span> <span class="mf">40.715273</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">73.949701</span><span class="p">,</span> <span class="mf">40.834487</span><span class="p">],</span>
        <span class="p">]</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;location&#39;: &lt;GeoLocation: {
        &#39;id&#39;: &#39;60481f3936dc48428091e926&#39;,
        &#39;tags&#39;: [],
        &#39;point&#39;: [-73.9855, 40.758],
        &#39;line&#39;: None,
        &#39;polygon&#39;: [
            [
                [-73.949701, 40.834487],
                [-73.896611, 40.815076],
                [-73.998083, 40.696534],
                [-74.031751, 40.715273],
                [-73.949701, 40.834487],
            ],
        ],
    }&gt;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can create
<a class="reference internal" href="using_views.html#geolocation-views"><span class="std std-ref">location-based views</span></a> that filter your data by
their location!</p>
</div>
<p>All location data is stored in
<a class="reference external" href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON format</a> in the database. You
can easily retrieve the raw GeoJSON data for a slice of your dataset using the
<a class="reference internal" href="using_aggregations.html#aggregations-values"><span class="std std-ref">values()</span></a> aggregation:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-geo&quot;</span><span class="p">)</span>

<span class="n">values</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;location.point&quot;</span><span class="p">,</span> <span class="n">_raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[{&#39;type&#39;: &#39;Point&#39;, &#39;coordinates&#39;: [-73.9592175465766, 40.71052995514191]},
 {&#39;type&#39;: &#39;Point&#39;, &#39;coordinates&#39;: [-73.97748118760413, 40.74660360881843]},
 {&#39;type&#39;: &#39;Point&#39;, &#39;coordinates&#39;: [-73.9508690871987, 40.766631164626]},
 {&#39;type&#39;: &#39;Point&#39;, &#39;coordinates&#39;: [-73.96569416502996, 40.75449283200206]},
 {&#39;type&#39;: &#39;Point&#39;, &#39;coordinates&#39;: [-73.97397106211423, 40.67925541341504]}]
</pre></div>
</div>
</div>
<div class="section" id="label-tags">
<span id="id31"></span><h3>Label tags<a class="headerlink" href="#label-tags" title="Permalink to this headline">Â¶</a></h3>
<p>All <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instances have a <code class="code docutils literal notranslate"><span class="pre">tags</span></code> field, which is a string list. By default,
this list is empty, but you can use it to store application-specific
information like whether the label is incorrect:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">detection</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;mistake&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">detection</span><span class="o">.</span><span class="n">tags</span><span class="p">)</span>
<span class="c1"># [&quot;mistake&quot;]</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can add, edit, and filter by label tags
<a class="reference internal" href="app.html#app-tagging"><span class="std std-ref">directly in the App</span></a>.</p>
</div>
<p>Datasets and views provide helpful methods such as
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.count_label_tags" title="fiftyone.core.collections.SampleCollection.count_label_tags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count_label_tags()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.tag_labels" title="fiftyone.core.collections.SampleCollection.tag_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tag_labels()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.untag_labels" title="fiftyone.core.collections.SampleCollection.untag_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">untag_labels()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_labels" title="fiftyone.core.collections.SampleCollection.match_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match_labels()</span></code></a>,
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.select_labels" title="fiftyone.core.collections.SampleCollection.select_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_labels()</span></code></a>
that you can use to perform batch queries and edits to label tags:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="c1"># Tag all low confidence prediction</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">view</span><span class="o">.</span><span class="n">tag_labels</span><span class="p">(</span><span class="s2">&quot;potential_mistake&quot;</span><span class="p">,</span> <span class="n">label_fields</span><span class="o">=</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_label_tags</span><span class="p">())</span>  <span class="c1"># {&#39;potential_mistake&#39;: 1555}</span>

<span class="c1"># Create a view containing only tagged labels</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">select_labels</span><span class="p">(</span><span class="n">tags</span><span class="o">=</span><span class="s2">&quot;potential_mistake&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="p">))</span>  <span class="c1"># 173</span>
<span class="nb">print</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">))</span>  <span class="c1"># 1555</span>

<span class="c1"># Create a view containing only samples with at least one tagged label</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match_labels</span><span class="p">(</span><span class="n">tags</span><span class="o">=</span><span class="s2">&quot;potential_mistake&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="p">))</span>  <span class="c1"># 173</span>
<span class="nb">print</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">))</span>  <span class="c1"># 5151</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">untag_labels</span><span class="p">(</span><span class="s2">&quot;potential_mistake&quot;</span><span class="p">,</span> <span class="n">label_fields</span><span class="o">=</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_label_tags</span><span class="p">())</span>  <span class="c1"># {}</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="label-attributes">
<span id="id32"></span><h3>Label attributes<a class="headerlink" href="#label-attributes" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection" title="fiftyone.core.labels.Detection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detection</span></code></a>, <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline" title="fiftyone.core.labels.Polyline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polyline</span></code></a>, and <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoint" title="fiftyone.core.labels.Keypoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoint</span></code></a> label types have an optional
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.attributes" title="fiftyone.core.labels.Detection.attributes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">attributes</span></code></a> field that you
can use to store custom attributes on the object.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.attributes" title="fiftyone.core.labels.Detection.attributes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">attributes</span></code></a> field is a
dictionary mapping attribute names to <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Attribute" title="fiftyone.core.labels.Attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attribute</span></code></a> instances, which contain the
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Attribute.value" title="fiftyone.core.labels.Attribute.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> of the attribute and any
associated metadata.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.attributes" title="fiftyone.core.labels.Detection.attributes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">attributes</span></code></a> field
will be removed in an upcoming release.</p>
<p>Instead, <a class="reference internal" href="#using-labels"><span class="std std-ref">add custom attributes directly</span></a> to your
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>
<span class="n">detection</span><span class="p">[</span><span class="s2">&quot;custom_attribute&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">51</span>

<span class="c1"># Equivalent</span>
<span class="n">detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
    <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
    <span class="n">custom_attribute</span><span class="o">=</span><span class="mi">51</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>There are <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Attribute" title="fiftyone.core.labels.Attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attribute</span></code></a> subclasses for various types of attributes you may want
to store. Use the appropriate subclass when possible so that FiftyOne knows the
schema of the attributes that youâ€™re storing.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute class</p></th>
<th class="head"><p>Value type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.BooleanAttribute" title="fiftyone.core.labels.BooleanAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">BooleanAttribute</span></code></a></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>A boolean attribute</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.CategoricalAttribute" title="fiftyone.core.labels.CategoricalAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalAttribute</span></code></a></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>A categorical attribute</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.NumericAttribute" title="fiftyone.core.labels.NumericAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericAttribute</span></code></a></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A numeric attribute</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.ListAttribute" title="fiftyone.core.labels.ListAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListAttribute</span></code></a></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">list</span></code></p></td>
<td><p>A list attribute</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Attribute" title="fiftyone.core.labels.Attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attribute</span></code></a></p></td>
<td><p>arbitrary</p></td>
<td><p>A generic attribute of any type</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
    <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
            <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
            <span class="n">attributes</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="n">fo</span><span class="o">.</span><span class="n">NumericAttribute</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">51</span><span class="p">),</span>
                <span class="s2">&quot;mood&quot;</span><span class="p">:</span> <span class="n">fo</span><span class="o">.</span><span class="n">CategoricalAttribute</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;salty&quot;</span><span class="p">),</span>
            <span class="p">},</span>
        <span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
    <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
            <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.480</span><span class="p">,</span> <span class="mf">0.513</span><span class="p">,</span> <span class="mf">0.397</span><span class="p">,</span> <span class="mf">0.288</span><span class="p">],</span>
            <span class="n">confidence</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span>
            <span class="n">attributes</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="n">fo</span><span class="o">.</span><span class="n">NumericAttribute</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">51</span><span class="p">),</span>
                <span class="s2">&quot;mood&quot;</span><span class="p">:</span> <span class="n">fo</span><span class="o">.</span><span class="n">CategoricalAttribute</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="s2">&quot;surly&quot;</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.95</span>
                <span class="p">),</span>
            <span class="p">},</span>
        <span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: None,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: None,
    &#39;last_modified_at&#39;: None,
    &#39;ground_truth&#39;: &lt;Detections: {
        &#39;detections&#39;: [
            &lt;Detection: {
                &#39;id&#39;: &#39;60f738e7467d81f41c20054c&#39;,
                &#39;attributes&#39;: {
                    &#39;age&#39;: &lt;NumericAttribute: {&#39;value&#39;: 51}&gt;,
                    &#39;mood&#39;: &lt;CategoricalAttribute: {
                        &#39;value&#39;: &#39;salty&#39;, &#39;confidence&#39;: None, &#39;logits&#39;: None
                    }&gt;,
                },
                &#39;tags&#39;: [],
                &#39;label&#39;: &#39;cat&#39;,
                &#39;bounding_box&#39;: [0.5, 0.5, 0.4, 0.3],
                &#39;mask&#39;: None,
                &#39;confidence&#39;: None,
                &#39;index&#39;: None,
            }&gt;,
        ],
    }&gt;,
    &#39;prediction&#39;: &lt;Detections: {
        &#39;detections&#39;: [
            &lt;Detection: {
                &#39;id&#39;: &#39;60f738e7467d81f41c20054d&#39;,
                &#39;attributes&#39;: {
                    &#39;age&#39;: &lt;NumericAttribute: {&#39;value&#39;: 51}&gt;,
                    &#39;mood&#39;: &lt;CategoricalAttribute: {
                        &#39;value&#39;: &#39;surly&#39;, &#39;confidence&#39;: 0.95, &#39;logits&#39;: None
                    }&gt;,
                },
                &#39;tags&#39;: [],
                &#39;label&#39;: &#39;cat&#39;,
                &#39;bounding_box&#39;: [0.48, 0.513, 0.397, 0.288],
                &#39;mask&#39;: None,
                &#39;confidence&#39;: 0.96,
                &#39;index&#39;: None,
            }&gt;,
        ],
    }&gt;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can view attribute values in the
<a class="reference internal" href="app.html#app-sample-view"><span class="std std-ref">App tooltip</span></a> by hovering over the objects.</p>
</div>
</div>
<div class="section" id="converting-label-types">
<span id="label-conversions"></span><h3>Converting label types<a class="headerlink" href="#converting-label-types" title="Permalink to this headline">Â¶</a></h3>
<p>FiftyOne provides a number of utility methods to convert between different
representations of certain label types, such as converting between
<a class="reference internal" href="#instance-segmentation"><span class="std std-ref">instance segmentations</span></a>,
<a class="reference internal" href="#semantic-segmentation"><span class="std std-ref">semantic segmentations</span></a>,
and <a class="reference internal" href="#polylines"><span class="std std-ref">polylines</span></a>.</p>
<p>Letâ€™s load some instance segmentations from the COCO dataset to see this in
action:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
    <span class="s2">&quot;coco-2017&quot;</span><span class="p">,</span>
    <span class="n">split</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">,</span>
    <span class="n">label_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;segmentations&quot;</span><span class="p">],</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">],</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;instances&quot;</span><span class="p">,</span>
    <span class="n">max_samples</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
    <span class="n">only_matching</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">detections</span> <span class="o">=</span> <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;instances&quot;</span><span class="p">]</span>
</pre></div></td></tr></table></div>
</div>
<p>For example, you can use
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections.to_polylines" title="fiftyone.core.labels.Detections.to_polylines"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Detections.to_polylines()</span></code></a>
to convert instance segmentations to polylines:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Convert `Detections` to `Polylines`</span>
<span class="n">polylines</span> <span class="o">=</span> <span class="n">detections</span><span class="o">.</span><span class="n">to_polylines</span><span class="p">(</span><span class="n">tolerance</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">polylines</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Or you can use
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections.to_segmentation" title="fiftyone.core.labels.Detections.to_segmentation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Detections.to_segmentation()</span></code></a>
to convert instance segmentations to semantic segmentation masks:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">metadata</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="o">.</span><span class="n">build_for</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>

<span class="c1"># Convert `Detections` to `Segmentation`</span>
<span class="n">segmentation</span> <span class="o">=</span> <span class="n">detections</span><span class="o">.</span><span class="n">to_segmentation</span><span class="p">(</span>
    <span class="n">frame_size</span><span class="o">=</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">metadata</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
    <span class="n">mask_targets</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">},</span>
<span class="p">)</span>

<span class="c1"># Export the segmentation to disk</span>
<span class="n">segmentation</span><span class="o">.</span><span class="n">export_mask</span><span class="p">(</span><span class="s2">&quot;/tmp/mask.png&quot;</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">segmentation</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Methods such as
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation.to_detections" title="fiftyone.core.labels.Segmentation.to_detections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Segmentation.to_detections()</span></code></a>
and <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation.to_polylines" title="fiftyone.core.labels.Segmentation.to_polylines"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Segmentation.to_polylines()</span></code></a>
also exist to transform semantic segmentations back into individual shapes.</p>
<p>In addition, the <a class="reference internal" href="../api/fiftyone.utils.labels.html#module-fiftyone.utils.labels" title="fiftyone.utils.labels"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fiftyone.utils.labels</span></code></a> module contains a variety of
utility methods for converting entire collectionsâ€™ labels between common
formats:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.utils.labels</span> <span class="k">as</span> <span class="nn">foul</span>

<span class="c1"># Convert instance segmentations to semantic segmentations stored on disk</span>
<span class="n">foul</span><span class="o">.</span><span class="n">objects_to_segmentations</span><span class="p">(</span>
    <span class="n">dataset</span><span class="p">,</span>
    <span class="s2">&quot;instances&quot;</span><span class="p">,</span>
    <span class="s2">&quot;segmentations&quot;</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/segmentations&quot;</span><span class="p">,</span>
    <span class="n">mask_targets</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">},</span>
<span class="p">)</span>

<span class="c1"># Convert instance segmentations to polylines format</span>
<span class="n">foul</span><span class="o">.</span><span class="n">instances_to_polylines</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s2">&quot;instances&quot;</span><span class="p">,</span> <span class="s2">&quot;polylines&quot;</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Convert semantic segmentations to instance segmentations</span>
<span class="n">foul</span><span class="o">.</span><span class="n">segmentations_to_detections</span><span class="p">(</span>
    <span class="n">dataset</span><span class="p">,</span>
    <span class="s2">&quot;segmentations&quot;</span><span class="p">,</span>
    <span class="s2">&quot;instances2&quot;</span><span class="p">,</span>
    <span class="n">mask_targets</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">},</span>
    <span class="n">mask_types</span><span class="o">=</span><span class="s2">&quot;thing&quot;</span><span class="p">,</span>  <span class="c1"># give each connected region a separate instance</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Name:<span class="w">        </span>coco-2017-validation-25
Media<span class="w"> </span>type:<span class="w">  </span>image
Num<span class="w"> </span>samples:<span class="w"> </span><span class="m">25</span>
Persistent:<span class="w">  </span>False
Tags:<span class="w">        </span><span class="o">[]</span>
Sample<span class="w"> </span>fields:
<span class="w">    </span>id:<span class="w">               </span>fiftyone.core.fields.ObjectIdField
<span class="w">    </span>filepath:<span class="w">         </span>fiftyone.core.fields.StringField
<span class="w">    </span>tags:<span class="w">             </span>fiftyone.core.fields.ListField<span class="o">(</span>fiftyone.core.fields.StringField<span class="o">)</span>
<span class="w">    </span>metadata:<span class="w">         </span>fiftyone.core.fields.EmbeddedDocumentField<span class="o">(</span>fiftyone.core.metadata.ImageMetadata<span class="o">)</span>
<span class="w">    </span>created_at:<span class="w">       </span>fiftyone.core.fields.DateTimeField
<span class="w">    </span>last_modified_at:<span class="w"> </span>fiftyone.core.fields.DateTimeField
<span class="w">    </span>instances:<span class="w">        </span>fiftyone.core.fields.EmbeddedDocumentField<span class="o">(</span>fiftyone.core.labels.Detections<span class="o">)</span>
<span class="w">    </span>segmentations:<span class="w">    </span>fiftyone.core.fields.EmbeddedDocumentField<span class="o">(</span>fiftyone.core.labels.Segmentation<span class="o">)</span>
<span class="w">    </span>polylines:<span class="w">        </span>fiftyone.core.fields.EmbeddedDocumentField<span class="o">(</span>fiftyone.core.labels.Polylines<span class="o">)</span>
<span class="w">    </span>instances2:<span class="w">       </span>fiftyone.core.fields.EmbeddedDocumentField<span class="o">(</span>fiftyone.core.labels.Detections<span class="o">)</span>
</pre></div>
</div>
<p>Note that, if your goal is to export the labels to disk, FiftyOne can
<a class="reference internal" href="export_datasets.html#export-label-coercion"><span class="std std-ref">automatically coerce</span></a> the labels into the correct
format based on the type of the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> and the <code class="code docutils literal notranslate"><span class="pre">dataset_type</span></code> that you
specify for the export without explicitly storing the transformed labels as a
new field on your dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Export the instance segmentations in the `instances` field as semantic</span>
<span class="c1"># segmentation images on disk</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">export</span><span class="p">(</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;instances&quot;</span><span class="p">,</span>
    <span class="n">dataset_type</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">ImageSegmentationDirectory</span><span class="p">,</span>
    <span class="n">labels_path</span><span class="o">=</span><span class="s2">&quot;/tmp/masks&quot;</span><span class="p">,</span>
    <span class="n">mask_targets</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;dog&quot;</span><span class="p">},</span>
<span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="dynamic-attributes">
<span id="id33"></span><h2>Dynamic attributes<a class="headerlink" href="#dynamic-attributes" title="Permalink to this headline">Â¶</a></h2>
<p>Any field(s) of your FiftyOne datasets that contain <a class="reference internal" href="../api/fiftyone.core.odm.embedded_document.html#fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument" title="fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicEmbeddedDocument</span></code></a>
values can have arbitrary custom attributes added to their instances.</p>
<p>For example, all <a class="reference internal" href="#using-labels"><span class="std std-ref">Label classes</span></a> and
<a class="reference internal" href="#using-metadata"><span class="std std-ref">Metadata classes</span></a> are dynamic, so you can add custom
attributes to them as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Provide some default attributes</span>
<span class="n">label</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">confidence</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>

<span class="c1"># Add custom attributes</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;int&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;float&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">51.0</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;bool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">label</span><span class="p">[</span><span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;of&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">]}</span>
</pre></div></td></tr></table></div>
</div>
<p>By default, dynamic attributes are not included in a
<a class="reference internal" href="#field-schemas"><span class="std std-ref">datasetâ€™s schema</span></a>, which means that these attributes may
contain arbitrary heterogeneous values across the datasetâ€™s samples.</p>
<p>However, FiftyOne provides methods that you can use to formally declare custom
dynamic attributes, which allows you to enforce type constraints, filter by
these custom attributes <a class="reference internal" href="app.html#app-filtering"><span class="std std-ref">in the App</span></a>, and more.</p>
<p>You can use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_dynamic_field_schema" title="fiftyone.core.dataset.Dataset.get_dynamic_field_schema"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_dynamic_field_schema()</span></code></a>
to detect the names and type(s) of any undeclared dynamic embedded document
attributes on a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_dynamic_field_schema</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &#39;ground_truth.detections.iscrowd&#39;: &lt;fiftyone.core.fields.FloatField&gt;,
    &#39;ground_truth.detections.area&#39;: &lt;fiftyone.core.fields.FloatField&gt;,
}
</pre></div>
</div>
<p>You can then use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample_field" title="fiftyone.core.dataset.Dataset.add_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_sample_field()</span></code></a> to
declare a specific dynamic embedded document attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.iscrowd&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">FloatField</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>or you can use the
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_dynamic_sample_fields" title="fiftyone.core.dataset.Dataset.add_dynamic_sample_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_dynamic_sample_fields()</span></code></a>
method to declare all dynamic embedded document attribute(s) that contain
values of a single type:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">add_dynamic_sample_fields</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pass the <code class="code docutils literal notranslate"><span class="pre">add_mixed=True</span></code> option to
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_dynamic_sample_fields" title="fiftyone.core.dataset.Dataset.add_dynamic_sample_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_dynamic_sample_fields()</span></code></a>
if you wish to declare all dynamic attributes that contain mixed values
using a generic <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.Field" title="fiftyone.core.fields.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> type.</p>
</div>
<p>You can provide the optional <code class="code docutils literal notranslate"><span class="pre">flat=True</span></code> option to
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_field_schema" title="fiftyone.core.dataset.Dataset.get_field_schema"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_field_schema()</span></code></a> to
retrieve a flattened version of a datasetâ€™s schema that includes all embedded
document attributes as top-level keys:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &#39;id&#39;: &lt;fiftyone.core.fields.ObjectIdField&gt;,
    &#39;filepath&#39;: &lt;fiftyone.core.fields.StringField&gt;,
    &#39;tags&#39;: &lt;fiftyone.core.fields.ListField&gt;,
    &#39;metadata&#39;: &lt;fiftyone.core.fields.EmbeddedDocumentField&gt;,
    &#39;metadata.size_bytes&#39;: &lt;fiftyone.core.fields.IntField&gt;,
    &#39;metadata.mime_type&#39;: &lt;fiftyone.core.fields.StringField&gt;,
    &#39;metadata.width&#39;: &lt;fiftyone.core.fields.IntField&gt;,
    &#39;metadata.height&#39;: &lt;fiftyone.core.fields.IntField&gt;,
    &#39;metadata.num_channels&#39;: &lt;fiftyone.core.fields.IntField&gt;,
    &#39;created_at&#39;: &lt;fiftyone.core.fields.DateTimeField object at 0x7fea584bc730&gt;,
    &#39;last_modified_at&#39;: &lt;fiftyone.core.fields.DateTimeField object at 0x7fea584bc280&gt;,
    &#39;ground_truth&#39;: &lt;fiftyone.core.fields.EmbeddedDocumentField&gt;,
    &#39;ground_truth.detections&#39;: &lt;fiftyone.core.fields.ListField&gt;,
    &#39;ground_truth.detections.id&#39;: &lt;fiftyone.core.fields.ObjectIdField&gt;,
    &#39;ground_truth.detections.tags&#39;: &lt;fiftyone.core.fields.ListField&gt;,
    ...
    &#39;ground_truth.detections.iscrowd&#39;: &lt;fiftyone.core.fields.FloatField&gt;,
    &#39;ground_truth.detections.area&#39;: &lt;fiftyone.core.fields.FloatField&gt;,
    ...
}
</pre></div>
</div>
<p>By default, dynamic attributes are not declared on a datasetâ€™s schema when
samples are added to it:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.jpg&quot;</span><span class="p">,</span>
    <span class="n">ground_truth</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
        <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
                <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span>
                <span class="n">mood</span><span class="o">=</span><span class="s2">&quot;surly&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span>
                <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span>
                <span class="n">mood</span><span class="o">=</span><span class="s2">&quot;happy&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">schema</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">assert</span> <span class="s2">&quot;ground_truth.detections.mood&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">schema</span>
</pre></div></td></tr></table></div>
</div>
<p>However, methods such as
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample" title="fiftyone.core.dataset.Dataset.add_sample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_sample()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_samples" title="fiftyone.core.dataset.Dataset.add_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_samples()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_dir" title="fiftyone.core.dataset.Dataset.add_dir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_dir()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.from_dir" title="fiftyone.core.dataset.Dataset.from_dir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_dir()</span></code></a>, and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.merge_samples" title="fiftyone.core.dataset.Dataset.merge_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_samples()</span></code></a>
provide an optional <code class="code docutils literal notranslate"><span class="pre">dynamic=True</span></code> option that you can provide to automatically
declare any dynamic embedded document attributes encountered while importing
data:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">schema</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">assert</span> <span class="s2">&quot;ground_truth.detections.mood&quot;</span> <span class="ow">in</span> <span class="n">schema</span>
</pre></div></td></tr></table></div>
</div>
<p>Note that, when declaring dynamic attributes on non-empty datasets, you must
ensure that the attributeâ€™s type is consistent with any existing values in that
field, e.g., by first running
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_dynamic_field_schema" title="fiftyone.core.dataset.Dataset.get_dynamic_field_schema"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_dynamic_field_schema()</span></code></a>
to check the existing type(s). Methods like
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample_field" title="fiftyone.core.dataset.Dataset.add_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_sample_field()</span></code></a>
and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_samples" title="fiftyone.core.dataset.Dataset.add_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_samples(...,</span> <span class="pre">dynamic=True)</span></code></a>
do not validate newly declared fieldâ€™s types against existing field values:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample1</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image1.jpg&quot;</span><span class="p">,</span>
    <span class="n">ground_truth</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span>
        <span class="n">mood</span><span class="o">=</span><span class="s2">&quot;surly&quot;</span><span class="p">,</span>
        <span class="n">age</span><span class="o">=</span><span class="s2">&quot;bad-value&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">sample2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image2.jpg&quot;</span><span class="p">,</span>
    <span class="n">ground_truth</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span>
        <span class="n">mood</span><span class="o">=</span><span class="s2">&quot;happy&quot;</span><span class="p">,</span>
        <span class="n">age</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample1</span><span class="p">)</span>

<span class="c1"># Either of these are problematic</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample2</span><span class="p">,</span> <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.age&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">IntField</span><span class="p">)</span>

<span class="n">sample1</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>  <span class="c1"># ValidationError: bad-value could not be converted to int</span>
</pre></div></td></tr></table></div>
</div>
<p>If you declare a dynamic attribute with a type that is not compatible with
existing values in that field, you will need to remove that field from the
datasetâ€™s schema using
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.remove_dynamic_sample_field" title="fiftyone.core.dataset.Dataset.remove_dynamic_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove_dynamic_sample_field()</span></code></a>
in order for the dataset to be usable again:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Removes dynamic field from dataset&#39;s schema without deleting the values</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">remove_dynamic_sample_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.age&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>You can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.select_fields" title="fiftyone.core.collections.SampleCollection.select_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_fields()</span></code></a>
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.exclude_fields" title="fiftyone.core.collections.SampleCollection.exclude_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exclude_fields()</span></code></a>
to create <a class="reference internal" href="using_views.html#using-views"><span class="std std-ref">views</span></a> that select/exclude specific dynamic
attributes from your dataset and its schema:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.age&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">Field</span><span class="p">)</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="k">assert</span> <span class="s2">&quot;ground_truth.age&quot;</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">has_field</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)</span>

<span class="c1"># Omits the `age` attribute from the `ground_truth` field</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">exclude_fields</span><span class="p">(</span><span class="s2">&quot;ground_truth.age&quot;</span><span class="p">)</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="k">assert</span> <span class="s2">&quot;ground_truth.age&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">view</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">has_field</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)</span>

<span class="c1"># Only include `mood` (and default) attributes of the `ground_truth` field</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;ground_truth.mood&quot;</span><span class="p">)</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="k">assert</span> <span class="s2">&quot;ground_truth.age&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">view</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">has_field</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="custom-embedded-documents">
<span id="id34"></span><h2>Custom embedded documents<a class="headerlink" href="#custom-embedded-documents" title="Permalink to this headline">Â¶</a></h2>
<p>If you work with collections of related fields that you would like to organize
under a single top-level field, you can achieve this by defining and using
custom <a class="reference internal" href="../api/fiftyone.core.odm.embedded_document.html#fiftyone.core.odm.embedded_document.EmbeddedDocument" title="fiftyone.core.odm.embedded_document.EmbeddedDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmbeddedDocument</span></code></a> and <a class="reference internal" href="../api/fiftyone.core.odm.embedded_document.html#fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument" title="fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicEmbeddedDocument</span></code></a> classes to populate
your datasetes.</p>
<p>Using custom embedded document classes enables you to access your data using
the same object-oriented interface enjoyed by FiftyOneâ€™s
<a class="reference internal" href="#using-labels"><span class="std std-ref">builtin label types</span></a>.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.odm.embedded_document.html#fiftyone.core.odm.embedded_document.EmbeddedDocument" title="fiftyone.core.odm.embedded_document.EmbeddedDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmbeddedDocument</span></code></a> class represents a fixed collection of fields with
predefined types and optional default values, while the
<a class="reference internal" href="../api/fiftyone.core.odm.embedded_document.html#fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument" title="fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicEmbeddedDocument</span></code></a> class supports predefined fields but also allows
users to populate arbitrary custom fields at runtime, like FiftyOneâ€™s
<a class="reference internal" href="#using-labels"><span class="std std-ref">builtin label types</span></a>.</p>
<div class="section" id="defining-custom-documents-on-the-fly">
<span id="id35"></span><h3>Defining custom documents on-the-fly<a class="headerlink" href="#defining-custom-documents-on-the-fly" title="Permalink to this headline">Â¶</a></h3>
<p>The simplest way to define custom embedded documents on your datasets is to
declare empty <a class="reference internal" href="../api/fiftyone.core.odm.embedded_document.html#fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument" title="fiftyone.core.odm.embedded_document.DynamicEmbeddedDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicEmbeddedDocument</span></code></a> field(s) and then incrementally
populate new <a class="reference internal" href="#dynamic-attributes"><span class="std std-ref">dynamic attributes</span></a> as needed.</p>
<p>To illustrate, letâ€™s start by defining an empty embedded document field:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="c1"># Define an empty embedded document field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span>
    <span class="s2">&quot;camera_info&quot;</span><span class="p">,</span>
    <span class="n">fo</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">,</span>
    <span class="n">embedded_doc_type</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">DynamicEmbeddedDocument</span><span class="p">,</span>
<span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>From here, there are a variety of ways to add new embedded attributes to the
field.</p>
<p>You can explicitly declare new fields using
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample_field" title="fiftyone.core.dataset.Dataset.add_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_sample_field()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Declare a new `camera_id` attribute</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;camera_info.camera_id&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>

<span class="k">assert</span> <span class="s2">&quot;camera_info.camera_id&quot;</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>or you can implicitly declare new fields using
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_samples" title="fiftyone.core.dataset.Dataset.add_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_samples()</span></code></a> with the
<code class="code docutils literal notranslate"><span class="pre">dynamic=True</span></code> flag:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Includes a new `quality` attribute</span>
<span class="n">sample1</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image1.jpg&quot;</span><span class="p">,</span>
    <span class="n">camera_info</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">DynamicEmbeddedDocument</span><span class="p">(</span>
        <span class="n">camera_id</span><span class="o">=</span><span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
        <span class="n">quality</span><span class="o">=</span><span class="mf">51.0</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">sample2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image2.jpg&quot;</span><span class="p">,</span>
    <span class="n">camera_info</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">DynamicEmbeddedDocument</span><span class="p">(</span><span class="n">camera_id</span><span class="o">=</span><span class="s2">&quot;123456789&quot;</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># Automatically declares new dynamic attributes as they are encountered</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">([</span><span class="n">sample1</span><span class="p">,</span> <span class="n">sample2</span><span class="p">],</span> <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">assert</span> <span class="s2">&quot;camera_info.quality&quot;</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>or you can implicitly declare new fields using
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.set_values" title="fiftyone.core.collections.SampleCollection.set_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_values()</span></code></a>
with the <code class="code docutils literal notranslate"><span class="pre">dynamic=True</span></code> flag:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Populate a new `description` attribute on each sample in the dataset</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="s2">&quot;camera_info.description&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span> <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">assert</span> <span class="s2">&quot;camera_info.description&quot;</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="defining-custom-documents-in-modules">
<span id="id36"></span><h3>Defining custom documents in modules<a class="headerlink" href="#defining-custom-documents-in-modules" title="Permalink to this headline">Â¶</a></h3>
<p>You can also define custom embedded document classes in Python modules and
packages that you maintain, using the appropriate types from the
<a class="reference internal" href="../api/fiftyone.core.fields.html#module-fiftyone.core.fields" title="fiftyone.core.fields"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fiftyone.core.fields</span></code></a> module to declare your fields and their types,
defaults, etc.</p>
<p>The benefit of this approach over the on-the-fly definition from the previous
section is that you can provide extra metadata such as whether fields are
<code class="code docutils literal notranslate"><span class="pre">required</span></code> or should have <code class="code docutils literal notranslate"><span class="pre">default</span></code> values if they are not explicitly set
during creation.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In order to work with datasets containing custom embedded documents defined
using this approach, you must configure your <code class="code docutils literal notranslate"><span class="pre">module_path</span></code> in
<em>all environments</em> where you intend to work with the datasets that use
these classes, not just the environment where you create the dataset.</p>
<p>To avoid this requirement, consider defining custom documents
<a class="reference internal" href="#defining-custom-documents-on-the-fly"><span class="std std-ref">on-the-fly</span></a> instead.</p>
</div>
<p>For example, suppose you add the following embedded document classes to a
<code class="code docutils literal notranslate"><span class="pre">foo.bar</span></code> module:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="k">class</span> <span class="nc">CameraInfo</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">EmbeddedDocument</span><span class="p">):</span>
    <span class="n">camera_id</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">quality</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">FloatField</span><span class="p">()</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">LabelMetadata</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">DynamicEmbeddedDocument</span><span class="p">):</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">)</span>
    <span class="n">model_name</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>and then  <code class="code docutils literal notranslate"><span class="pre">foo.bar</span></code> to FiftyOneâ€™s <code class="code docutils literal notranslate"><span class="pre">module_path</span></code> config setting (see
<a class="reference internal" href="config.html#configuring-fiftyone"><span class="std std-ref">this page</span></a> for more ways to register this):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_MODULE_PATH</span><span class="o">=</span>foo.bar

<span class="c1"># Verify module path</span>
fiftyone<span class="w"> </span>config
</pre></div>
</div>
<p>Youâ€™re now free to use your custom embedded document classes as you please,
whether this be top-level sample fields or nested fields:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">foo.bar</span> <span class="k">as</span> <span class="nn">fb</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">,</span>
    <span class="n">camera_info</span><span class="o">=</span><span class="n">fb</span><span class="o">.</span><span class="n">CameraInfo</span><span class="p">(</span>
        <span class="n">camera_id</span><span class="o">=</span><span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
        <span class="n">quality</span><span class="o">=</span><span class="mf">99.0</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">weather</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;sunny&quot;</span><span class="p">,</span>
        <span class="n">confidence</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">fb</span><span class="o">.</span><span class="n">LabelMetadata</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;resnet50&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A dynamic field&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">persistent</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div></td></tr></table></div>
</div>
<p>As long as <code class="code docutils literal notranslate"><span class="pre">foo.bar</span></code> is on your <code class="code docutils literal notranslate"><span class="pre">module_path</span></code>, this dataset can be loaded in
future sessions and manipulated as usual:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">())</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: &#39;6217b696d181786cff360740&#39;,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 16, 10, 701907),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 16, 10, 701907),
    &#39;camera_info&#39;: &lt;CameraInfo: {
        &#39;camera_id&#39;: &#39;123456789&#39;,
        &#39;quality&#39;: 99.0,
        &#39;description&#39;: None,
    }&gt;,
    &#39;weather&#39;: &lt;Classification: {
        &#39;id&#39;: &#39;6217b696d181786cff36073e&#39;,
        &#39;tags&#39;: [],
        &#39;label&#39;: &#39;sunny&#39;,
        &#39;confidence&#39;: 0.95,
        &#39;logits&#39;: None,
        &#39;metadata&#39;: &lt;LabelMetadata: {
            &#39;created_at&#39;: datetime.datetime(2022, 2, 24, 16, 47, 18, 10000),
            &#39;model_name&#39;: &#39;resnet50&#39;,
            &#39;description&#39;: &#39;A dynamic field&#39;,
        }&gt;,
    }&gt;,
}&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="image-datasets">
<span id="id37"></span><h2>Image datasets<a class="headerlink" href="#image-datasets" title="Permalink to this headline">Â¶</a></h2>
<p>Any <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> whose <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> is a file with MIME type  <code class="code docutils literal notranslate"><span class="pre">image/*</span></code> is recognized
as a image sample, and datasets composed of image samples have media type
<code class="code docutils literal notranslate"><span class="pre">image</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/image.png&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">media_type</span><span class="p">)</span>  <span class="c1"># image</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: &#39;6655ca275e20e244f2c8fe31&#39;,
    &#39;media_type&#39;: &#39;image&#39;,
    &#39;filepath&#39;: &#39;/path/to/image.png&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 15, 8, 122038),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 15, 8, 122038),
}&gt;
</pre></div>
</div>
<div class="section" id="example-image-dataset">
<h3>Example image dataset<a class="headerlink" href="#example-image-dataset" title="Permalink to this headline">Â¶</a></h3>
<p>To get started exploring image datasets, try loading the
<a class="reference internal" href="../dataset_zoo/datasets.html#dataset-zoo-quickstart"><span class="std std-ref">quickstart dataset</span></a> from the zoo:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections&quot;</span><span class="p">))</span>  <span class="c1"># 1232</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">))</span>  <span class="c1"># 5620</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.label&quot;</span><span class="p">))</span>
<span class="c1"># {&#39;dog&#39;: 15, &#39;airplane&#39;: 24, &#39;dining table&#39;: 15, &#39;hot dog&#39;: 5, ...}</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="quickstart" class="align-center" src="../_images/quickstart.gif" />
</div>
</div>
<div class="section" id="video-datasets">
<span id="id38"></span><h2>Video datasets<a class="headerlink" href="#video-datasets" title="Permalink to this headline">Â¶</a></h2>
<p>Any <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> whose <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> is a file with MIME type  <code class="code docutils literal notranslate"><span class="pre">video/*</span></code> is recognized
as a video sample, and datasets composed of video samples have media type
<code class="code docutils literal notranslate"><span class="pre">video</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/video.mp4&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">media_type</span><span class="p">)</span>  <span class="c1"># video</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: &#39;6403ccef0a3af5bc780b5a10&#39;,
    &#39;media_type&#39;: &#39;video&#39;,
    &#39;filepath&#39;: &#39;/path/to/video.mp4&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 3, 17, 229263),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 3, 17, 229263),
    &#39;frames&#39;: &lt;Frames: 0&gt;,
}&gt;
</pre></div>
</div>
<p>All video samples have a reserved <code class="code docutils literal notranslate"><span class="pre">frames</span></code> attribute in which you can store
frame-level labels and other custom annotations for the video. The <code class="code docutils literal notranslate"><span class="pre">frames</span></code>
attribute is a dictionary whose keys are frame numbers and whose values are
<a class="reference internal" href="../api/fiftyone.core.frame.html#fiftyone.core.frame.Frame" title="fiftyone.core.frame.Frame"><code class="xref py py-class docutils literal notranslate"><span class="pre">Frame</span></code></a> instances that hold all of the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instances and other
primitive-type fields for the frame.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FiftyOne uses 1-based indexing for video frame numbers.</p>
</div>
<p>You can add, modify, and delete <a class="reference internal" href="#using-labels"><span class="std std-ref">labels of any type</span></a> as
well as primitive fields such as integers, strings, and booleans using the same
dynamic attribute syntax that you use to
<a class="reference internal" href="#adding-sample-fields"><span class="std std-ref">interact with samples</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">frame</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span>
    <span class="n">quality</span><span class="o">=</span><span class="mf">97.12</span><span class="p">,</span>
    <span class="n">weather</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;sunny&quot;</span><span class="p">),</span>
    <span class="n">objects</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
        <span class="n">detections</span><span class="o">=</span><span class="p">[</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Add labels to the first frame of the video</span>
<span class="n">sample</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">frame</span>
<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample.save" title="fiftyone.core.sample.Sample.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sample.save()</span></code></a> in
order to persist changes to the database when editing video samples and/or
their frames that are in datasets.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: &#39;6403ccef0a3af5bc780b5a10&#39;,
    &#39;media_type&#39;: &#39;video&#39;,
    &#39;filepath&#39;: &#39;/path/to/video.mp4&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 3, 17, 229263),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 3, 17, 229263),
    &#39;frames&#39;: &lt;Frames: 1&gt;,    &lt;-- `frames` now contains 1 frame of labels
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">frames</span></code> attribute of video samples behaves like a defaultdict; a new
<a class="reference internal" href="../api/fiftyone.core.frame.html#fiftyone.core.frame.Frame" title="fiftyone.core.frame.Frame"><code class="xref py py-class docutils literal notranslate"><span class="pre">Frame</span></code></a> will be created if the frame number does not exist when you access
it.</p>
</div>
<p>You can iterate over the frames in a video sample using the expected syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">for</span> <span class="n">frame_number</span><span class="p">,</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">sample</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Frame: {
    &#39;id&#39;: &#39;6403cd972a54cee076f88bd2&#39;,
    &#39;frame_number&#39;: 1,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 3, 40, 839000),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 3, 40, 839000),
    &#39;quality&#39;: 97.12,
    &#39;weather&#39;: &lt;Classification: {
        &#39;id&#39;: &#39;609078d54653b0094e9baa52&#39;,
        &#39;tags&#39;: [],
        &#39;label&#39;: &#39;sunny&#39;,
        &#39;confidence&#39;: None,
        &#39;logits&#39;: None,
    }&gt;,
    &#39;objects&#39;: &lt;Detections: {
        &#39;detections&#39;: [
            &lt;Detection: {
                &#39;id&#39;: &#39;609078d54653b0094e9baa53&#39;,
                &#39;attributes&#39;: {},
                &#39;tags&#39;: [],
                &#39;label&#39;: &#39;cat&#39;,
                &#39;bounding_box&#39;: [0.1, 0.1, 0.2, 0.2],
                &#39;mask&#39;: None,
                &#39;confidence&#39;: None,
                &#39;index&#39;: None,
            }&gt;,
            &lt;Detection: {
                &#39;id&#39;: &#39;609078d54653b0094e9baa54&#39;,
                &#39;attributes&#39;: {},
                &#39;tags&#39;: [],
                &#39;label&#39;: &#39;dog&#39;,
                &#39;bounding_box&#39;: [0.7, 0.7, 0.2, 0.2],
                &#39;mask&#39;: None,
                &#39;confidence&#39;: None,
                &#39;index&#39;: None,
            }&gt;,
        ],
    }&gt;,
}&gt;
</pre></div>
</div>
<p>Notice that the datasetâ€™s summary indicates that the dataset has media type
<code class="code docutils literal notranslate"><span class="pre">video</span></code> and includes the schema of any frame fields you add:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Name:           2021.05.03.18.30.20
Media type:     video
Num samples:    1
Persistent:     False
Tags:           []
Sample fields:
    id:               fiftyone.core.fields.ObjectIdField
    filepath:         fiftyone.core.fields.StringField
    tags:             fiftyone.core.fields.ListField(fiftyone.core.fields.StringField)
    metadata:         fiftyone.core.fields.EmbeddedDocumentField(fiftyone.core.metadata.VideoMetadata)
    created_at:       fiftyone.core.fields.DateTimeField
    last_modified_at: fiftyone.core.fields.DateTimeField
Frame fields:
    id:               fiftyone.core.fields.ObjectIdField
    frame_number:     fiftyone.core.fields.FrameNumberField
    created_at:       fiftyone.core.fields.DateTimeField
    last_modified_at: fiftyone.core.fields.DateTimeField
    quality:          fiftyone.core.fields.FloatField
    weather:          fiftyone.core.fields.EmbeddedDocumentField(fiftyone.core.labels.Classification)
    objects:          fiftyone.core.fields.EmbeddedDocumentField(fiftyone.core.labels.Detections)
</pre></div>
</div>
<p>You can retrieve detailed information about the schema of the frames of a
video <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> using
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_frame_field_schema" title="fiftyone.core.dataset.Dataset.get_frame_field_schema"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.get_frame_field_schema()</span></code></a>.</p>
<p>The samples in video datasets can be accessed
<a class="reference internal" href="#accessing-samples-in-a-dataset"><span class="std std-ref">like usual</span></a>, and the sampleâ€™s frame
labels can be modified by updating the <code class="code docutils literal notranslate"><span class="pre">frames</span></code> attribute of a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="k">for</span> <span class="n">frame_number</span><span class="p">,</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">sample</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;frame_str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">frame_number</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;weather&quot;</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span>

<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Frame: {
    &#39;id&#39;: &#39;6403cd972a54cee076f88bd2&#39;,
    &#39;frame_number&#39;: 1,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 3, 40, 839000),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 4, 49, 430051),
    &#39;quality&#39;: 97.12,
    &#39;weather&#39;: None,
    &#39;objects&#39;: None,
    &#39;frame_str&#39;: &#39;1&#39;,
}&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must call <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample.save" title="fiftyone.core.sample.Sample.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sample.save()</span></code></a> in
order to persist changes to the database when editing video samples and/or
their frames that are in datasets.</p>
</div>
<p><a class="reference internal" href="dataset_creation/index.html#loading-custom-datasets"><span class="std std-ref">See this page</span></a> for more information about
building labeled video samples.</p>
<div class="section" id="example-video-dataset">
<h3>Example video dataset<a class="headerlink" href="#example-video-dataset" title="Permalink to this headline">Â¶</a></h3>
<p>To get started exploring video datasets, try loading the
<a class="reference internal" href="../dataset_zoo/datasets.html#dataset-zoo-quickstart-video"><span class="std std-ref">quickstart-video dataset</span></a> from the zoo:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;frames&quot;</span><span class="p">))</span>  <span class="c1"># 1279</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;frames.detections.detections&quot;</span><span class="p">))</span>  <span class="c1"># 11345</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;frames.detections.detections.label&quot;</span><span class="p">))</span>
<span class="c1"># {&#39;vehicle&#39;: 7511, &#39;road sign&#39;: 2726, &#39;person&#39;: 1108}</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="quickstart-video" class="align-center" src="../_images/quickstart-video.gif" />
</div>
</div>
<div class="section" id="d-datasets">
<span id="id39"></span><h2>3D datasets<a class="headerlink" href="#d-datasets" title="Permalink to this headline">Â¶</a></h2>
<p>Any <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> whose <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> is a file with extension <code class="code docutils literal notranslate"><span class="pre">.fo3d</span></code> is
recognized as a 3D sample, and datasets composed of 3D
samples have media type <code class="code docutils literal notranslate"><span class="pre">3d</span></code>.</p>
<p>An FO3D file encapsulates a 3D scene constructed using the
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.Scene" title="fiftyone.core.threed.Scene"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scene</span></code></a> class, which provides methods
to add, remove, and manipulate 3D objects in the scene. A scene is
internally represented as a n-ary tree of 3D objects, where each
object is a node in the tree. A 3D object is either a
<a class="reference internal" href="#d-meshes"><span class="std std-ref">3D mesh</span></a>, <a class="reference internal" href="#d-point-clouds"><span class="std std-ref">point cloud</span></a>,
or a <a class="reference internal" href="#d-shapes"><span class="std std-ref">3D shape geometry</span></a>.</p>
<p>A scene may be explicitly initialized with additional attributes, such as
<a class="reference internal" href="../api/fiftyone.core.threed.camera.html#module-fiftyone.core.threed.camera" title="fiftyone.core.threed.camera"><code class="xref py py-class docutils literal notranslate"><span class="pre">camera</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.threed.lights.html#module-fiftyone.core.threed.lights" title="fiftyone.core.threed.lights"><code class="xref py py-class docutils literal notranslate"><span class="pre">lights</span></code></a>, and
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.SceneBackground" title="fiftyone.core.threed.SceneBackground"><code class="xref py py-class docutils literal notranslate"><span class="pre">background</span></code></a>. By default, a
scene is created with neutral lighting, and a perspective camera whose
<code class="code docutils literal notranslate"><span class="pre">up</span></code> is set to <code class="code docutils literal notranslate"><span class="pre">Y</span></code> axis in a right-handed coordinate system.</p>
<p>After a scene is constructed, it should be written to the disk using the
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.Scene.write" title="fiftyone.core.threed.Scene.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scene.write()</span></code></a> method, which
serializes the scene into an FO3D file.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">camera</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">PerspectiveCamera</span><span class="p">(</span><span class="n">up</span><span class="o">=</span><span class="s2">&quot;Z&quot;</span><span class="p">)</span>

<span class="n">mesh</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">GltfMesh</span><span class="p">(</span><span class="s2">&quot;mesh&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh.glb&quot;</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Euler</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">sphere1</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">SphereGeometry</span><span class="p">(</span><span class="s2">&quot;sphere1&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">sphere1</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">sphere1</span><span class="o">.</span><span class="n">default_material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>

<span class="n">sphere2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">SphereGeometry</span><span class="p">(</span><span class="s2">&quot;sphere2&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">sphere2</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">sphere2</span><span class="o">.</span><span class="n">default_material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;blue&quot;</span>

<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="n">sphere1</span><span class="p">,</span> <span class="n">sphere2</span><span class="p">)</span>

<span class="n">scene</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">media_type</span><span class="p">)</span>  <span class="c1"># 3d</span>
</pre></div></td></tr></table></div>
</div>
<p>To modify an exising scene, load it via
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.Scene.from_fo3d" title="fiftyone.core.threed.Scene.from_fo3d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Scene.from_fo3d()</span></code></a>, perform any
necessary updates, and then re-write it to disk:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Scene</span><span class="o">.</span><span class="n">from_fo3d</span><span class="p">(</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">scene</span><span class="o">.</span><span class="n">traverse</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">SphereGeometry</span><span class="p">):</span>
        <span class="n">node</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">scene</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="section" id="d-meshes">
<span id="id40"></span><h3>3D meshes<a class="headerlink" href="#d-meshes" title="Permalink to this headline">Â¶</a></h3>
<p>A 3D mesh is a collection of vertices, edges, and faces that define the shape
of a 3D object. Whereas some mesh formats store only the geometry of the mesh,
others also store the material properties and textures of the mesh. If a
mesh file contains material properties and textures, FiftyOne will
automatically load and display them. You may also
assign default material for your meshes by setting the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">default_material</span></code>
attribute of the mesh. In the absence of any material information,
meshes are assigned a
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.MeshStandardMaterial" title="fiftyone.core.threed.MeshStandardMaterial"><code class="xref py py-class docutils literal notranslate"><span class="pre">MeshStandardMaterial</span></code></a>
with reasonable defaults that can also be dynamically configured from the app.
Please refer to <a class="reference internal" href="../api/fiftyone.core.threed.material_3d.html#module-fiftyone.core.threed.material_3d" title="fiftyone.core.threed.material_3d"><code class="xref py py-mod docutils literal notranslate"><span class="pre">material_3d</span></code></a> for more
details.</p>
<p>FiftyOne currently supports
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.GltfMesh" title="fiftyone.core.threed.GltfMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">GLTF</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.ObjMesh" title="fiftyone.core.threed.ObjMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">OBJ</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.PlyMesh" title="fiftyone.core.threed.PlyMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">PLY</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.StlMesh" title="fiftyone.core.threed.StlMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">STL</span></code></a>, and
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.FbxMesh" title="fiftyone.core.threed.FbxMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">FBX</span> <span class="pre">7.x+</span></code></a> mesh formats.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We recommend the <a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.GltfMesh" title="fiftyone.core.threed.GltfMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">GLTF</span></code></a> format for
3D meshes where possible, as it is the most compact, efficient, and
web-friendly format for storing and transmitting 3D models.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>

<span class="n">mesh1</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">GltfMesh</span><span class="p">(</span><span class="s2">&quot;mesh1&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh.glb&quot;</span><span class="p">)</span>
<span class="n">mesh1</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Euler</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">mesh2</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">ObjMesh</span><span class="p">(</span><span class="s2">&quot;mesh2&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh.obj&quot;</span><span class="p">)</span>
<span class="n">mesh3</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">PlyMesh</span><span class="p">(</span><span class="s2">&quot;mesh3&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh.ply&quot;</span><span class="p">)</span>
<span class="n">mesh4</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">StlMesh</span><span class="p">(</span><span class="s2">&quot;mesh4&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh.stl&quot;</span><span class="p">)</span>
<span class="n">mesh5</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">FbxMesh</span><span class="p">(</span><span class="s2">&quot;mesh5&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh.fbx&quot;</span><span class="p">)</span>

<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mesh1</span><span class="p">,</span> <span class="n">mesh2</span><span class="p">,</span> <span class="n">mesh3</span><span class="p">,</span> <span class="n">mesh4</span><span class="p">,</span> <span class="n">mesh5</span><span class="p">)</span>

<span class="n">scene</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="d-point-clouds">
<span id="id41"></span><h3>3D point clouds<a class="headerlink" href="#d-point-clouds" title="Permalink to this headline">Â¶</a></h3>
<p>FiftyOne supports the
<a class="reference external" href="https://pointclouds.org/documentation/tutorials/pcd_file_format.html">PCD</a>
point cloud format. A code snippet to create a PCD object that can be added
to a FiftyOne 3D scene is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">pcd</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="s2">&quot;my-pcd&quot;</span><span class="p">,</span> <span class="s2">&quot;point-cloud.pcd&quot;</span><span class="p">)</span>
<span class="n">pcd</span><span class="o">.</span><span class="n">default_material</span><span class="o">.</span><span class="n">shading_mode</span> <span class="o">=</span> <span class="s2">&quot;custom&quot;</span>
<span class="n">pcd</span><span class="o">.</span><span class="n">default_material</span><span class="o">.</span><span class="n">custom_color</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>
<span class="n">pcd</span><span class="o">.</span><span class="n">default_material</span><span class="o">.</span><span class="n">point_size</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>

<span class="n">scene</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>You can customize the appearance of a point cloud by setting the
<code class="code docutils literal notranslate"><span class="pre">default_material</span></code> attribute of the point cloud object, or dynamically from
the app. Please refer to the
<a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.PointCloudMaterial" title="fiftyone.core.threed.PointCloudMaterial"><code class="xref py py-class docutils literal notranslate"><span class="pre">PointCloudMaterial</span></code></a>
class for more details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your scene contains multiple point clouds, you can control which point
cloud is included in
<a class="reference internal" href="#orthographic-projection-images"><span class="std std-ref">orthographic projections</span></a> by
initializing it with <code class="code docutils literal notranslate"><span class="pre">flag_for_projection=True</span></code>.</p>
</div>
<p>Hereâ€™s how a typical PCD file is structured:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>

<span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">),</span> <span class="o">...</span><span class="p">])</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="n">r1</span><span class="p">,</span> <span class="n">g1</span><span class="p">,</span> <span class="n">b1</span><span class="p">),</span> <span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">b2</span><span class="p">),</span> <span class="o">...</span><span class="p">])</span>

<span class="n">pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
<span class="n">pcd</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<span class="n">pcd</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>

<span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">write_point_cloud</span><span class="p">(</span><span class="s2">&quot;/path/to/point-cloud.pcd&quot;</span><span class="p">,</span> <span class="n">pcd</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When working with modalities such as LIDAR, intensity data is assumed to be
encoded in the <code class="code docutils literal notranslate"><span class="pre">r</span></code> channel of the <code class="code docutils literal notranslate"><span class="pre">rgb</span></code> field of the
<a class="reference external" href="https://pointclouds.org/documentation/tutorials/pcd_file_format.html">PCD files</a>.</p>
<p>When coloring by intensity <a class="reference internal" href="app.html#app-3d-visualizer"><span class="std std-ref">in the App</span></a>, the
intensity values are automatically scaled to use the full dynamic range of
the colorscale.</p>
</div>
</div>
<div class="section" id="d-shapes">
<span id="id42"></span><h3>3D shapes<a class="headerlink" href="#d-shapes" title="Permalink to this headline">Â¶</a></h3>
<p>FiftyOne provides a set of primitive 3D shape geometries that can be added to
a 3D scene. The following 3D shape geometries are supported:</p>
<ul class="simple">
<li><p>Box: <a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.BoxGeometry" title="fiftyone.core.threed.BoxGeometry"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxGeometry</span></code></a></p></li>
<li><p>Sphere: <a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.SphereGeometry" title="fiftyone.core.threed.SphereGeometry"><code class="xref py py-class docutils literal notranslate"><span class="pre">SphereGeometry</span></code></a></p></li>
<li><p>Cylinder: <a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.CylinderGeometry" title="fiftyone.core.threed.CylinderGeometry"><code class="xref py py-class docutils literal notranslate"><span class="pre">CylinderGeometry</span></code></a></p></li>
<li><p>Plane: <a class="reference internal" href="../api/fiftyone.core.threed.html#fiftyone.core.threed.PlaneGeometry" title="fiftyone.core.threed.PlaneGeometry"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlaneGeometry</span></code></a></p></li>
</ul>
<p>Similar to meshes and point clouds, shapes can be manipulated by setting their
position, rotation, and scale. Their appearance can be customized either by
setting the <code class="code docutils literal notranslate"><span class="pre">default_material</span></code> attribute of the shape object, or dynamically
from the app.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>

<span class="n">box</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">BoxGeometry</span><span class="p">(</span><span class="s2">&quot;box&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">box</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">box</span><span class="o">.</span><span class="n">default_material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>

<span class="n">sphere</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">SphereGeometry</span><span class="p">(</span><span class="s2">&quot;sphere&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">sphere</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">sphere</span><span class="o">.</span><span class="n">default_material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;blue&quot;</span>

<span class="n">cylinder</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">CylinderGeometry</span><span class="p">(</span><span class="s2">&quot;cylinder&quot;</span><span class="p">,</span> <span class="n">radius_top</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cylinder</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">plane</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">PlaneGeometry</span><span class="p">(</span><span class="s2">&quot;plane&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plane</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Euler</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">,</span> <span class="n">sphere</span><span class="p">,</span> <span class="n">cylinder</span><span class="p">,</span> <span class="n">plane</span><span class="p">)</span>

<span class="n">scene</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="d-annotations">
<span id="id43"></span><h3>3D annotations<a class="headerlink" href="#d-annotations" title="Permalink to this headline">Â¶</a></h3>
<p>3D samples may contain any type and number of custom fields, including
<a class="reference internal" href="#d-detections"><span class="std std-ref">3D detections</span></a> and <a class="reference internal" href="#d-polylines"><span class="std std-ref">3D polylines</span></a>,
which are natively visualizable by the Appâ€™s
<a class="reference internal" href="app.html#app-3d-visualizer"><span class="std std-ref">3D visualizer</span></a>.</p>
<p>Because 3D annotations are stored in dedicated fields of datasets rather than
being embedded in FO3D files, they can be queried and filtered via
<a class="reference internal" href="using_views.html#view-filtering"><span class="std std-ref">dataset views</span></a> and <a class="reference internal" href="app.html#app-filtering"><span class="std std-ref">in the App</span></a>
just like other primitive/label fields.</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">GltfMesh</span><span class="p">(</span><span class="s2">&quot;mesh&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh.gltf&quot;</span><span class="p">))</span>
<span class="n">scene</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">)</span>

<span class="n">detection</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;vehicle&quot;</span><span class="p">,</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">0.47</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="mf">69.44</span><span class="p">],</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="p">[</span><span class="mf">2.85</span><span class="p">,</span> <span class="mf">2.63</span><span class="p">,</span> <span class="mf">12.34</span><span class="p">],</span>
    <span class="n">rotation</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.56</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/scene.fo3d&quot;</span><span class="p">,</span>
    <span class="n">ground_truth</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span><span class="n">detections</span><span class="o">=</span><span class="p">[</span><span class="n">detection</span><span class="p">]),</span>
<span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="orthographic-projection-images">
<span id="id44"></span><h3>Orthographic projection images<a class="headerlink" href="#orthographic-projection-images" title="Permalink to this headline">Â¶</a></h3>
<p>In order to visualize 3D datasets in the Appâ€™s grid view, you can use
<a class="reference internal" href="../api/fiftyone.utils.utils3d.html#fiftyone.utils.utils3d.compute_orthographic_projection_images" title="fiftyone.utils.utils3d.compute_orthographic_projection_images"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_orthographic_projection_images()</span></code></a>
to generate orthographic projection images of each scene:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.utils.utils3d</span> <span class="k">as</span> <span class="nn">fou3d</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="c1"># Load an example 3D dataset</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-3d&quot;</span><span class="p">)</span>

<span class="c1"># This dataset already has orthographic projections populated, but let&#39;s</span>
<span class="c1"># recompute them to demonstrate the idea</span>
<span class="n">fou3d</span><span class="o">.</span><span class="n">compute_orthographic_projection_images</span><span class="p">(</span>
    <span class="n">dataset</span><span class="p">,</span>
    <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span>  <span class="c1"># (width, height) of each image; -1 means aspect-preserving</span>
    <span class="n">bounds</span><span class="o">=</span><span class="p">((</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)),</span>
    <span class="n">projection_normal</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/quickstart-3d-proj&quot;</span><span class="p">,</span>
    <span class="n">shading_mode</span><span class="o">=</span><span class="s2">&quot;height&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>Note that the method also supports <a class="reference internal" href="groups.html#groups"><span class="std std-ref">grouped datasets</span></a> that
contain 3D slice(s):</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.utils.utils3d</span> <span class="k">as</span> <span class="nn">fou3d</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="c1"># Load an example group dataset that contains a 3D slice</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-groups&quot;</span><span class="p">)</span>

<span class="c1"># Populate orthographic projections</span>
<span class="n">fou3d</span><span class="o">.</span><span class="n">compute_orthographic_projection_images</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span> <span class="s2">&quot;/tmp/proj&quot;</span><span class="p">)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">group_slice</span> <span class="o">=</span> <span class="s2">&quot;pcd&quot;</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Orthographic projection images currently only include point clouds, not
meshes or 3D shapes.</p>
<p>If a scene contains multiple <a class="reference internal" href="#d-point-clouds"><span class="std std-ref">point clouds</span></a>, you can
control which point cloud to project by initializing it with
<code class="code docutils literal notranslate"><span class="pre">flag_for_projection=True</span></code>.</p>
</div>
<p>The above method populates an <a class="reference internal" href="../api/fiftyone.utils.utils3d.html#fiftyone.utils.utils3d.OrthographicProjectionMetadata" title="fiftyone.utils.utils3d.OrthographicProjectionMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrthographicProjectionMetadata</span></code></a> field on each
sample that contains the path to its projection image and other necessary
information to properly
<a class="reference internal" href="app.html#app-3d-orthographic-projections"><span class="std std-ref">visualize it in the App</span></a>.</p>
<p>Refer to the
<a class="reference internal" href="../api/fiftyone.utils.utils3d.html#fiftyone.utils.utils3d.compute_orthographic_projection_images" title="fiftyone.utils.utils3d.compute_orthographic_projection_images"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_orthographic_projection_images()</span></code></a>
documentation for available parameters to customize the projections.</p>
</div>
<div class="section" id="example-3d-datasets">
<span id="id45"></span><h3>Example 3D datasets<a class="headerlink" href="#example-3d-datasets" title="Permalink to this headline">Â¶</a></h3>
<p>To get started exploring 3D datasets, try loading the
<a class="reference internal" href="../dataset_zoo/datasets.html#dataset-zoo-quickstart-3d"><span class="std std-ref">quickstart-3d dataset</span></a> from the zoo:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-3d&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;ground_truth.label&quot;</span><span class="p">))</span>
<span class="c1"># {&#39;bottle&#39;: 5, &#39;stairs&#39;: 5, &#39;keyboard&#39;: 5, &#39;car&#39;: 5, ...}</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="quickstart-3d" class="align-center" src="../_images/quickstart-3d.gif" />
<p>Also check out the
<a class="reference internal" href="../dataset_zoo/datasets.html#dataset-zoo-quickstart-groups"><span class="std std-ref">quickstart-groups dataset</span></a>, which
contains a point cloud slice:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.utils.utils3d</span> <span class="k">as</span> <span class="nn">fou3d</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-groups&quot;</span><span class="p">)</span>

<span class="c1"># Populate orthographic projections</span>
<span class="n">fou3d</span><span class="o">.</span><span class="n">compute_orthographic_projection_images</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span> <span class="s2">&quot;/tmp/proj&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections&quot;</span><span class="p">))</span>  <span class="c1"># 1100</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.label&quot;</span><span class="p">))</span>
<span class="c1"># {&#39;Pedestrian&#39;: 133, &#39;Car&#39;: 774, ...}</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">group_slice</span> <span class="o">=</span> <span class="s2">&quot;pcd&quot;</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<img alt="quickstart-groups" class="align-center" src="../_images/quickstart-groups.gif" />
</div>
</div>
<div class="section" id="point-cloud-datasets">
<span id="id46"></span><h2>Point cloud datasets<a class="headerlink" href="#point-cloud-datasets" title="Permalink to this headline">Â¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">point-cloud</span></code> media type has been deprecated in favor of the
<a class="reference internal" href="#d-datasets"><span class="std std-ref">3D media type</span></a>.</p>
<p>While weâ€™ll keep supporting the <code class="code docutils literal notranslate"><span class="pre">point-cloud</span></code> media type for backward
compatibility, we recommend using the <code class="code docutils literal notranslate"><span class="pre">3d</span></code> media type for new datasets.</p>
</div>
<p>Any <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> whose <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> is a
<a class="reference external" href="https://pointclouds.org/documentation/tutorials/pcd_file_format.html">PCD file</a>
with extension <code class="code docutils literal notranslate"><span class="pre">.pcd</span></code> is recognized as a point cloud sample, and datasets
composed of point cloud samples have media type <code class="code docutils literal notranslate"><span class="pre">point-cloud</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;/path/to/point-cloud.pcd&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">media_type</span><span class="p">)</span>  <span class="c1"># point-cloud</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Sample: {
    &#39;id&#39;: &#39;6403ce64c8957c42bc8f9e67&#39;,
    &#39;media_type&#39;: &#39;point-cloud&#39;,
    &#39;filepath&#39;: &#39;/path/to/point-cloud.pcd&#39;,
    &#39;tags&#39;: [],
    &#39;metadata&#39;: None,
    &#39;created_at&#39;: datetime.datetime(2024, 7, 22, 5, 16, 10, 701907),
    &#39;last_modified_at&#39;: datetime.datetime(2024, 7, 22, 5, 16, 10, 701907),
}&gt;
</pre></div>
</div>
<p>Point cloud samples may contain any type and number of custom fields, including
<a class="reference internal" href="#d-detections"><span class="std std-ref">3D detections</span></a> and <a class="reference internal" href="#d-polylines"><span class="std std-ref">3D polylines</span></a>,
which are natively visualizable by the Appâ€™s
<a class="reference internal" href="app.html#app-3d-visualizer"><span class="std std-ref">3D visualizer</span></a>.</p>
</div>
<div class="section" id="datasetviews">
<h2>DatasetViews<a class="headerlink" href="#datasetviews" title="Permalink to this headline">Â¶</a></h2>
<p>Previous sections have demonstrated how to add and interact with <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>
components like samples, fields, and labels. The true power of FiftyOne lies in
the ability to search, sort, filter, and explore the contents of a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>.</p>
<p>Behind this power is the <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a>. Whenever an operation
like <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView.match" title="fiftyone.core.view.DatasetView.match"><code class="xref py py-meth docutils literal notranslate"><span class="pre">match()</span></code></a> or
<a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView.sort_by" title="fiftyone.core.view.DatasetView.sort_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sort_by()</span></code></a> is applied to a
dataset, a <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a> is returned. As the name implies, a <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a>
is a <em>view</em> into the data in your <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> that was produced by a series of
operations that manipulated your data in different ways.</p>
<p>A <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a> is composed of <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.SampleView" title="fiftyone.core.sample.SampleView"><code class="xref py py-class docutils literal notranslate"><span class="pre">SampleView</span></code></a> objects for a subset of the samples
in your dataset. For example, a view may contain only samples with a given tag,
or samples whose labels meet a certain criteria.</p>
<p>In turn, each <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.SampleView" title="fiftyone.core.sample.SampleView"><code class="xref py py-class docutils literal notranslate"><span class="pre">SampleView</span></code></a> represents a view into the content of the underlying
<a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> in the dataset. For example, a <a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.SampleView" title="fiftyone.core.sample.SampleView"><code class="xref py py-class docutils literal notranslate"><span class="pre">SampleView</span></code></a> may represent the contents
of a sample with <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> below a specified threshold filtered out.</p>
<p><div class="tutorials-callout-container">
    <a class="btn with-right-arrow callout-button" href="using_views.html">Learn more about DatasetViews</a>
</div></p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">compute_metadata</span><span class="p">()</span>

<span class="c1"># Create a view containing the 5 samples from the validation split whose</span>
<span class="c1"># images are &gt;= 48 KB that have the most predictions with confidence &gt; 0.9</span>
<span class="n">complex_view</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">dataset</span>
    <span class="o">.</span><span class="n">match_tags</span><span class="p">(</span><span class="s2">&quot;validation&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;metadata.size_bytes&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">48</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>  <span class="c1"># &gt;= 48 KB</span>
    <span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Check to see how many predictions there are in each matching sample</span>
<span class="nb">print</span><span class="p">(</span><span class="n">complex_view</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()))</span>
<span class="c1"># [29, 20, 17, 15, 15]</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="merging-datasets">
<span id="id47"></span><h2>Merging datasets<a class="headerlink" href="#merging-datasets" title="Permalink to this headline">Â¶</a></h2>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> class provides a powerful
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.merge_samples" title="fiftyone.core.dataset.Dataset.merge_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_samples()</span></code></a> method
that you can use to merge the contents of another <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> or <a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a>
into an existing dataset.</p>
<p>By default, samples with the same absolute <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> are merged, and top-level
fields from the provided samples are merged in, overwriting any existing values
for those fields, with the exception of list fields (e.g.,
<a class="reference internal" href="#using-tags"><span class="std std-ref">tags</span></a>) and label list fields (e.g.,
<a class="reference internal" href="#object-detection"><span class="std std-ref">Detections</span></a>), in which case the elements of the lists
themselves are merged. In the case of label list fields, labels with the same
<code class="code docutils literal notranslate"><span class="pre">id</span></code> in both collections are updated rather than duplicated.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.merge_samples" title="fiftyone.core.dataset.Dataset.merge_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_samples()</span></code></a>
method can be configured in numerous ways, including:</p>
<ul class="simple">
<li><p>Which field to use as a merge key, or an arbitrary function defining the
merge key</p></li>
<li><p>Whether existing samples should be modified or skipped</p></li>
<li><p>Whether new samples should be added or omitted</p></li>
<li><p>Whether new fields can be added to the dataset schema</p></li>
<li><p>Whether list fields should be treated as ordinary fields and merged as a
whole rather than merging their elements</p></li>
<li><p>Whether to merge only specific fields, or all but certain fields</p></li>
<li><p>Mapping input fields to different field names of this dataset</p></li>
</ul>
<p>For example, the following snippet demonstrates merging a new field into an
existing dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="c1"># Create a dataset containing only ground truth objects</span>
<span class="n">dataset2</span> <span class="o">=</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="c1"># Create a view containing only the predictions</span>
<span class="n">predictions_view</span> <span class="o">=</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>

<span class="c1"># Merge the predictions</span>
<span class="n">dataset2</span><span class="o">.</span><span class="n">merge_samples</span><span class="p">(</span><span class="n">predictions_view</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset1</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections&quot;</span><span class="p">))</span>  <span class="c1"># 1232</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset2</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections&quot;</span><span class="p">))</span>  <span class="c1"># 1232</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset1</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">))</span>  <span class="c1"># 5620</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset2</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">))</span>  <span class="c1"># 5620</span>
</pre></div></td></tr></table></div>
</div>
<p>Note that the argument to
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.merge_samples" title="fiftyone.core.dataset.Dataset.merge_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_samples()</span></code></a> can be a
<a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a>, which means that you can perform possibly-complex
<a class="reference internal" href="using_views.html#using-views"><span class="std std-ref">transformations</span></a> to the source dataset to select the
desired content to merge.</p>
<p>Consider the following variation of the above snippet, which demonstrates a
workflow where <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> from another dataset are merged into a dataset with
existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> in the same field:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="c1"># Create a new dataset that only contains predictions with confidence &gt;= 0.9</span>
<span class="n">dataset3</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">dataset1</span>
    <span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="c1"># Create a view that contains only the remaining predictions</span>
<span class="n">low_conf_view</span> <span class="o">=</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.9</span><span class="p">)</span>

<span class="c1"># Merge the low confidence predictions back in</span>
<span class="n">dataset3</span><span class="o">.</span><span class="n">merge_samples</span><span class="p">(</span><span class="n">low_conf_view</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset1</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">))</span>  <span class="c1"># 5620</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset3</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">))</span>  <span class="c1"># 5620</span>
</pre></div></td></tr></table></div>
</div>
<p>Finally, the example below demonstrates the use of a custom merge key to define
which samples to merge:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Create a dataset with 100 samples of ground truth labels</span>
<span class="n">dataset4</span> <span class="o">=</span> <span class="n">dataset1</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">150</span><span class="p">]</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="c1"># Create a view with 50 overlapping samples of predictions</span>
<span class="n">predictions_view</span> <span class="o">=</span> <span class="n">dataset1</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>

<span class="c1"># Merge predictions into dataset, using base filename as merge key and</span>
<span class="c1"># never inserting new samples</span>
<span class="n">dataset4</span><span class="o">.</span><span class="n">merge_samples</span><span class="p">(</span>
    <span class="n">predictions_view</span><span class="p">,</span>
    <span class="n">key_fcn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">sample</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">filepath</span><span class="p">),</span>
    <span class="n">insert_new</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset4</span><span class="p">))</span>  <span class="c1"># 100</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset4</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">)))</span>  <span class="c1"># 50</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can use
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.merge_dir" title="fiftyone.core.dataset.Dataset.merge_dir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_dir()</span></code></a> to directly
merge the contents of a dataset on disk into an existing FiftyOne
dataset without first
<a class="reference internal" href="dataset_creation/datasets.html#loading-datasets-from-disk"><span class="std std-ref">loading it</span></a> into a temporary dataset and
then using
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.merge_samples" title="fiftyone.core.dataset.Dataset.merge_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_samples()</span></code></a> to
perform the merge.</p>
</div>
</div>
<div class="section" id="cloning-datasets">
<span id="id48"></span><h2>Cloning datasets<a class="headerlink" href="#cloning-datasets" title="Permalink to this headline">Â¶</a></h2>
<p>You can use <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.clone" title="fiftyone.core.dataset.Dataset.clone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clone()</span></code></a> to create a
copy of a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="n">dataset2</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">dataset2</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;new_field&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>

<span class="c1"># The source dataset is unaffected</span>
<span class="k">assert</span> <span class="s2">&quot;new_field&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<p>Dataset clones contain deep copies of all samples and dataset-level information
in the source dataset. The source <em>media files</em>, however, are not copied.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can also
<a class="reference internal" href="using_views.html#saving-and-cloning-views"><span class="std std-ref">clone specific subsets</span></a> of your datasets.</p>
</div>
</div>
<div class="section" id="batch-updates">
<span id="id49"></span><h2>Batch updates<a class="headerlink" href="#batch-updates" title="Permalink to this headline">Â¶</a></h2>
<p>You are always free to perform any necessary modifications to a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> by
iterating over it via a Python loop and explicitly
<a class="reference internal" href="#editing-sample-fields"><span class="std std-ref">performing the edits</span></a> that you require.</p>
<p>However, the <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> class provides a number of methods that allow you to
efficiently perform various common batch actions to your entire dataset.</p>
<div class="section" id="cloning-renaming-clearing-and-deleting-fields">
<span id="clone-rename-clear-delete"></span><h3>Cloning, renaming, clearing, and deleting fields<a class="headerlink" href="#cloning-renaming-clearing-and-deleting-fields" title="Permalink to this headline">Â¶</a></h3>
<p>You can use the
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.clone_sample_field" title="fiftyone.core.dataset.Dataset.clone_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clone_sample_field()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.rename_sample_field" title="fiftyone.core.dataset.Dataset.rename_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_sample_field()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.clear_sample_field" title="fiftyone.core.dataset.Dataset.clear_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear_sample_field()</span></code></a>,
and
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete_sample_field" title="fiftyone.core.dataset.Dataset.delete_sample_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_sample_field()</span></code></a>
methods to efficiently perform common actions on the sample fields of a
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="c1"># Clone an existing field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">clone_sample_field</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="s2">&quot;also_predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;also_predictions&quot;</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">())</span>  <span class="c1"># True</span>

<span class="c1"># Rename a field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">rename_sample_field</span><span class="p">(</span><span class="s2">&quot;also_predictions&quot;</span><span class="p">,</span> <span class="s2">&quot;still_predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;still_predictions&quot;</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">())</span>  <span class="c1"># True</span>

<span class="c1"># Clear a field (sets all values to None)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">clear_sample_field</span><span class="p">(</span><span class="s2">&quot;still_predictions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;still_predictions&quot;</span><span class="p">))</span>  <span class="c1"># {None: 200}</span>

<span class="c1"># Delete a field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_sample_field</span><span class="p">(</span><span class="s2">&quot;still_predictions&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>You can also use
<a class="reference external" href="https://docs.mongodb.com/manual/core/document/#dot-notation">dot notation</a>
to manipulate the fields or subfields of embedded documents in your dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="c1"># Clone an existing embedded field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">clone_sample_field</span><span class="p">(</span>
    <span class="s2">&quot;predictions.detections.label&quot;</span><span class="p">,</span>
    <span class="s2">&quot;predictions.detections.also_label&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;also_label&quot;</span><span class="p">])</span>  <span class="c1"># &quot;bird&quot;</span>

<span class="c1"># Rename an embedded field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">rename_sample_field</span><span class="p">(</span>
    <span class="s2">&quot;predictions.detections.also_label&quot;</span><span class="p">,</span>
    <span class="s2">&quot;predictions.detections.still_label&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;still_label&quot;</span><span class="p">])</span>  <span class="c1"># &quot;bird&quot;</span>

<span class="c1"># Clear an embedded field (sets all values to None)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">clear_sample_field</span><span class="p">(</span><span class="s2">&quot;predictions.detections.still_label&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;still_label&quot;</span><span class="p">])</span>  <span class="c1"># None</span>

<span class="c1"># Delete an embedded field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_sample_field</span><span class="p">(</span><span class="s2">&quot;predictions.detections.still_label&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="efficient-batch-edits">
<span id="id50"></span><h3>Efficient batch edits<a class="headerlink" href="#efficient-batch-edits" title="Permalink to this headline">Â¶</a></h3>
<p>You are always free to perform arbitrary edits to a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> by iterating over
its contents and editing the samples directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="c1"># Populate a new field on each sample in the dataset</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">))</span>  <span class="c1"># 200</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">))</span> <span class="c1"># (0.0007, 0.9987)</span>
</pre></div></td></tr></table></div>
</div>
<p>However, the above pattern can be inefficient for large datasets because each
<a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample.save" title="fiftyone.core.sample.Sample.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sample.save()</span></code></a> call makes a new
connection to the database.</p>
<p>The <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.iter_samples" title="fiftyone.core.dataset.Dataset.iter_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_samples()</span></code></a> method
provides an <code class="docutils literal notranslate"><span class="pre">autosave=True</span></code> option that causes all changes to samples
emitted by the iterator to be automatically saved using an efficient batch
update strategy:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Automatically saves sample edits in efficient batches</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">select_fields</span><span class="p">()</span><span class="o">.</span><span class="n">iter_samples</span><span class="p">(</span><span class="n">autosave</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As the above snippet shows, you should also optimize your iteration by
<a class="reference internal" href="using_views.html#efficient-iteration-views"><span class="std std-ref">selecting only</span></a> the required fields.</p>
</div>
<p>You can configure the default batching strategy that is used via your
<a class="reference internal" href="config.html#configuring-fiftyone"><span class="std std-ref">FiftyOne config</span></a>, or you can configure the
batching strategy on a per-method call basis by passing the optional
<code class="docutils literal notranslate"><span class="pre">batch_size</span></code> and <code class="docutils literal notranslate"><span class="pre">batching_strategy</span></code> arguments to
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.iter_samples" title="fiftyone.core.dataset.Dataset.iter_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_samples()</span></code></a>.</p>
<p>You can also use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.save_context" title="fiftyone.core.collections.SampleCollection.save_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save_context()</span></code></a>
method to perform batched edits using the pattern below:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Use a context to save sample edits in efficient batches</span>
<span class="k">with</span> <span class="n">dataset</span><span class="o">.</span><span class="n">save_context</span><span class="p">()</span> <span class="k">as</span> <span class="n">context</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">select_fields</span><span class="p">():</span>
        <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="n">context</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div></td></tr></table></div>
</div>
<p>The benefit of the above approach versus passing <code class="docutils literal notranslate"><span class="pre">autosave=True</span></code> to
<a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.iter_samples" title="fiftyone.core.dataset.Dataset.iter_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_samples()</span></code></a> is that
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SaveContext.save" title="fiftyone.core.collections.SaveContext.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">context.save()</span></code></a> allows you
to be explicit about which samples you are editing, which avoids unnecessary
computations if your loop only edits certain samples.</p>
</div>
<div class="section" id="setting-values">
<span id="set-values"></span><h3>Setting values<a class="headerlink" href="#setting-values" title="Permalink to this headline">Â¶</a></h3>
<p>Another strategy for performing efficient batch edits is to use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.set_values" title="fiftyone.core.collections.SampleCollection.set_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_values()</span></code></a> to
set a field (or embedded field) on each sample in the dataset in a single
batch operation:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Delete the field we added earlier</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_sample_field</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>

<span class="c1"># Equivalent way to populate the field on each sample in the dataset</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">))]</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">))</span>  <span class="c1"># 50</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">))</span> <span class="c1"># (0.0041, 0.9973)</span>
</pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When possible, using
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.set_values" title="fiftyone.core.collections.SampleCollection.set_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_values()</span></code></a>
is often more efficient than performing the equivalent operation via an
explicit iteration over the <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> because it avoids the need to read
<a class="reference internal" href="../api/fiftyone.core.sample.html#fiftyone.core.sample.Sample" title="fiftyone.core.sample.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> instances into memory and sequentially save them.</p>
</div>
<p>Similarly, you can edit nested sample fields of a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> by iterating over
the dataset and editing the necessary data:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Add a tag to all low confidence predictions in the dataset</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">detection</span> <span class="ow">in</span> <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;predictions&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">detections</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">detection</span><span class="o">.</span><span class="n">confidence</span> <span class="o">&lt;</span> <span class="mf">0.06</span><span class="p">:</span>
            <span class="n">detection</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;low_confidence&quot;</span><span class="p">)</span>

    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_label_tags</span><span class="p">())</span>
<span class="c1"># {&#39;low_confidence&#39;: 447}</span>
</pre></div></td></tr></table></div>
</div>
<p>However, an equivalent and often more efficient approach is to use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.values" title="fiftyone.core.collections.SampleCollection.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> to
extract the slice of data you wish to modify and then use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.set_values" title="fiftyone.core.collections.SampleCollection.set_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_values()</span></code></a> to
save the updated data in a single batch operation:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Remove the tags we added in the previous variation</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">untag_labels</span><span class="p">(</span><span class="s2">&quot;low_confidence&quot;</span><span class="p">)</span>

<span class="c1"># Load all predicted detections</span>
<span class="c1"># This is a list of lists of `Detection` instances for each sample</span>
<span class="n">detections</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span>

<span class="c1"># Add a tag to all low confidence detections</span>
<span class="k">for</span> <span class="n">sample_detections</span> <span class="ow">in</span> <span class="n">detections</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">detection</span> <span class="ow">in</span> <span class="n">sample_detections</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">detection</span><span class="o">.</span><span class="n">confidence</span> <span class="o">&lt;</span> <span class="mf">0.06</span><span class="p">:</span>
            <span class="n">detection</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;low_confidence&quot;</span><span class="p">)</span>

<span class="c1"># Save the updated predictions</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">,</span> <span class="n">detections</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_label_tags</span><span class="p">())</span>
<span class="c1"># {&#39;low_confidence&#39;: 447}</span>
</pre></div></td></tr></table></div>
</div>
</div>
<div class="section" id="setting-label-values">
<span id="set-label-values"></span><h3>Setting label values<a class="headerlink" href="#setting-label-values" title="Permalink to this headline">Â¶</a></h3>
<p>Often when working with <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> fields, the edits you want to make may be
naturally represented as a mapping between label IDs and corresponding
attribute values to set on each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instance. In such cases, you can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.set_label_values" title="fiftyone.core.collections.SampleCollection.set_label_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_label_values()</span></code></a>
to conveniently perform the updates:</p>
<div class="highlight-python notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># Grab some random label IDs</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">51</span><span class="p">)</span>
<span class="n">label_ids</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;predictions.detections.id&quot;</span><span class="p">,</span> <span class="n">unwind</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Populate a `random` attribute on all labels</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="kc">True</span> <span class="k">for</span> <span class="n">_id</span> <span class="ow">in</span> <span class="n">label_ids</span><span class="p">}</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_label_values</span><span class="p">(</span><span class="s2">&quot;predictions.detections.random&quot;</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;predictions.detections.random&quot;</span><span class="p">))</span>
<span class="c1"># {True: 111, None: 5509}</span>
</pre></div></td></tr></table></div>
</div>
</div>
</div>
</div>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="using_views.html" class="btn btn-neutral float-right" title="Dataset Views" accesskey="n" rel="next">Next <img src="../_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="dataset_creation/samples.html" class="btn btn-neutral" title="Using Sample Parsers" accesskey="p" rel="prev"><img src="../_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  
</footer>
          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Using FiftyOne Datasets</a><ul>
<li><a class="reference internal" href="#datasets">Datasets</a><ul>
<li><a class="reference internal" href="#dataset-media-type">Dataset media type</a></li>
<li><a class="reference internal" href="#dataset-persistence">Dataset persistence</a></li>
<li><a class="reference internal" href="#dataset-version">Dataset version</a></li>
<li><a class="reference internal" href="#dataset-tags">Dataset tags</a></li>
<li><a class="reference internal" href="#dataset-stats">Dataset stats</a></li>
<li><a class="reference internal" href="#storing-info">Storing info</a></li>
<li><a class="reference internal" href="#dataset-app-config">Dataset App config</a><ul>
<li><a class="reference internal" href="#multiple-media-fields">Multiple media fields</a></li>
<li><a class="reference internal" href="#custom-color-scheme">Custom color scheme</a></li>
<li><a class="reference internal" href="#sidebar-groups">Sidebar groups</a></li>
<li><a class="reference internal" href="#disable-frame-filtering">Disable frame filtering</a></li>
<li><a class="reference internal" href="#resetting-a-dataset-s-app-config">Resetting a datasetâ€™s App config</a></li>
</ul>
</li>
<li><a class="reference internal" href="#storing-class-lists">Storing class lists</a></li>
<li><a class="reference internal" href="#storing-mask-targets">Storing mask targets</a></li>
<li><a class="reference internal" href="#storing-keypoint-skeletons">Storing keypoint skeletons</a></li>
<li><a class="reference internal" href="#deleting-a-dataset">Deleting a dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#samples">Samples</a><ul>
<li><a class="reference internal" href="#adding-samples-to-a-dataset">Adding samples to a dataset</a></li>
<li><a class="reference internal" href="#accessing-samples-in-a-dataset">Accessing samples in a dataset</a></li>
<li><a class="reference internal" href="#deleting-samples-from-a-dataset">Deleting samples from a dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fields">Fields</a><ul>
<li><a class="reference internal" href="#default-sample-fields">Default sample fields</a></li>
<li><a class="reference internal" href="#accessing-fields-of-a-sample">Accessing fields of a sample</a></li>
<li><a class="reference internal" href="#field-schemas">Field schemas</a></li>
<li><a class="reference internal" href="#adding-fields-to-a-sample">Adding fields to a sample</a></li>
<li><a class="reference internal" href="#adding-fields-to-a-dataset">Adding fields to a dataset</a></li>
<li><a class="reference internal" href="#editing-sample-fields">Editing sample fields</a></li>
<li><a class="reference internal" href="#removing-fields-from-a-sample">Removing fields from a sample</a></li>
<li><a class="reference internal" href="#storing-field-metadata">Storing field metadata</a></li>
<li><a class="reference internal" href="#read-only-fields">Read-only fields</a></li>
<li><a class="reference internal" href="#summary-fields">Summary fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#media-type">Media type</a></li>
<li><a class="reference internal" href="#tags">Tags</a></li>
<li><a class="reference internal" href="#metadata">Metadata</a></li>
<li><a class="reference internal" href="#dates-and-datetimes">Dates and datetimes</a></li>
<li><a class="reference internal" href="#labels">Labels</a><ul>
<li><a class="reference internal" href="#regression">Regression</a></li>
<li><a class="reference internal" href="#classification">Classification</a></li>
<li><a class="reference internal" href="#multilabel-classification">Multilabel classification</a></li>
<li><a class="reference internal" href="#object-detection">Object detection</a></li>
<li><a class="reference internal" href="#instance-segmentations">Instance segmentations</a></li>
<li><a class="reference internal" href="#polylines-and-polygons">Polylines and polygons</a></li>
<li><a class="reference internal" href="#cuboids">Cuboids</a></li>
<li><a class="reference internal" href="#rotated-bounding-boxes">Rotated bounding boxes</a></li>
<li><a class="reference internal" href="#keypoints">Keypoints</a></li>
<li><a class="reference internal" href="#semantic-segmentation">Semantic segmentation</a></li>
<li><a class="reference internal" href="#heatmaps">Heatmaps</a></li>
<li><a class="reference internal" href="#temporal-detection">Temporal detection</a></li>
<li><a class="reference internal" href="#d-detections">3D detections</a></li>
<li><a class="reference internal" href="#d-polylines">3D polylines</a></li>
<li><a class="reference internal" href="#geolocation">Geolocation</a></li>
<li><a class="reference internal" href="#label-tags">Label tags</a></li>
<li><a class="reference internal" href="#label-attributes">Label attributes</a></li>
<li><a class="reference internal" href="#converting-label-types">Converting label types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dynamic-attributes">Dynamic attributes</a></li>
<li><a class="reference internal" href="#custom-embedded-documents">Custom embedded documents</a><ul>
<li><a class="reference internal" href="#defining-custom-documents-on-the-fly">Defining custom documents on-the-fly</a></li>
<li><a class="reference internal" href="#defining-custom-documents-in-modules">Defining custom documents in modules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#image-datasets">Image datasets</a><ul>
<li><a class="reference internal" href="#example-image-dataset">Example image dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#video-datasets">Video datasets</a><ul>
<li><a class="reference internal" href="#example-video-dataset">Example video dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#d-datasets">3D datasets</a><ul>
<li><a class="reference internal" href="#d-meshes">3D meshes</a></li>
<li><a class="reference internal" href="#d-point-clouds">3D point clouds</a></li>
<li><a class="reference internal" href="#d-shapes">3D shapes</a></li>
<li><a class="reference internal" href="#d-annotations">3D annotations</a></li>
<li><a class="reference internal" href="#orthographic-projection-images">Orthographic projection images</a></li>
<li><a class="reference internal" href="#example-3d-datasets">Example 3D datasets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#point-cloud-datasets">Point cloud datasets</a></li>
<li><a class="reference internal" href="#datasetviews">DatasetViews</a></li>
<li><a class="reference internal" href="#merging-datasets">Merging datasets</a></li>
<li><a class="reference internal" href="#cloning-datasets">Cloning datasets</a></li>
<li><a class="reference internal" href="#batch-updates">Batch updates</a><ul>
<li><a class="reference internal" href="#cloning-renaming-clearing-and-deleting-fields">Cloning, renaming, clearing, and deleting fields</a></li>
<li><a class="reference internal" href="#efficient-batch-edits">Efficient batch edits</a></li>
<li><a class="reference internal" href="#setting-values">Setting values</a></li>
<li><a class="reference internal" href="#setting-label-values">Setting label values</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
         <script src="../_static/jquery.js"></script>
         <script src="../_static/underscore.js"></script>
         <script src="../_static/doctools.js"></script>
         <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
         <script src="../_static/js/voxel51-website.js"></script>
         <script src="../_static/js/custom.js"></script>
     

  

  <script type="text/javascript" src="../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->


<footer class="footer-wrapper" id="docs-tutorials-resources">
  <div class="footer pytorch-container">
    <div class="footer__logo">
      <a href="https://voxel51.com/"
        ><img
          src="https://voxel51.com/images/logo/voxel51-logo-horz-color-600dpi.png"
      /></a>
    </div>

    <div class="footer__address">
      330 E Liberty St<br />
      Ann Arbor, MI 48104<br />
      <a href="mailto:info@voxel51.com">info@voxel51.com</a>
    </div>

    <!--
    <div class="footer__contact">
      <a href="mailto:info@voxel51.com">info@voxel51.com</a>
    </div>
    -->

    <div class="footer__links">
      <div class="footer__links--col2">
        <p class="nav__item--brand">Products</p>
        <a href="https://voxel51.com/fiftyone/">FiftyOne</a>
        <a href="https://voxel51.com/fiftyone-teams/">FiftyOne Teams</a>
        <a href="https://voxel51.com/computer-vision-use-cases/">Use Cases</a>
        <a href="https://voxel51.com/success-stories/">Success Stories</a>
      </div>
      <div class="footer__links--col3">
        <p class="nav__item--brand">Resources</p>
        <a href="https://voxel51.com/blog/">Blog</a>
        <a href="https://docs.voxel51.com/">Docs</a>
        <a href="https://github.com/voxel51/">GitHub</a>
        <a href="https://community.voxel51.com">Discord</a>
        <a href="https://voxel51.com/ourstory/">About Us</a>
        <a href="https://voxel51.com/computer-vision-events/">Events</a>
        <a href="https://voxel51.com/jobs/">Careers</a>
        <a href="https://voxel51.com/press/">Press</a>
      </div>
    </div>

    <div class="footer__icons">
      <ul class="list-inline">
        <li>
          <a href="https://www.linkedin.com/company/voxel51/">
            <i class="fa-brands fa-linkedin"></i>
          </a>
        </li>
        <li>
          <a href="https://github.com/voxel51/">
            <i class="fa-brands fa-github"></i>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/voxel51">
            <i class="fa-brands fa-twitter"></i>
          </a>
        </li>
        <li>
          <a href="https://www.facebook.com/voxel51/">
            <i class="fa-brands fa-facebook"></i>
          </a>
        </li>
      </ul>
    </div>

    <div class="footer__copyright">
      <ul class="list-inline">
        <li>&copy; 2024 Voxel51 Inc.</li>
        <li>
          <a href="https://voxel51.com/privacy/">Privacy Policy</a>
        </li>
        <li>
          <a href="https://voxel51.com/terms/">Terms of Service</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<!-- https://buttons.github.io -->
<script async defer src="https://buttons.github.io/buttons.js" ></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XD15NFRY3M" ></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-XD15NFRY3M");
</script>

<script>
  function open_modal(modal_id, modal_closer_id) {
    // Get the modal
    let the_modal = document.getElementById(modal_id);

    the_modal.style.display = "flex";
    document.body.style.overflow = "hidden";

    let the_modal_closer = document.getElementById(modal_closer_id);

    // When the user clicks on <span> (x), close the modal
    the_modal_closer &&
      (the_modal_closer.onclick = function () {
        the_modal.style.display = "none";
      });

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == the_modal) {
        the_modal.style.display = "none";
        document.body.style.overflow = "unset";
        window.onclick = undefined;
      }
    };
  }
</script>

<!-- bigpicture.io -->
<script>
  !(function (e, t, i) {
    var r = (e.bigPicture = e.bigPicture || []);
    if (!r.initialized)
      if (r.invoked)
        e.console &&
          console.error &&
          console.error("BigPicture.io snippet included twice.");
      else {
        (r.invoked = !0),
          (r.SNIPPET_VERSION = 1.5),
          (r.handler = function (e) {
            if (void 0 !== r.callback)
              try {
                return r.callback(e);
              } catch (e) {}
          }),
          (r.eventList = ["mousedown", "mouseup", "click", "submit"]),
          (r.methods = [
            "track",
            "identify",
            "page",
            "group",
            "alias",
            "integration",
            "ready",
            "intelReady",
            "consentReady",
            "on",
            "off",
          ]),
          (r.factory = function (e) {
            return function () {
              var t = Array.prototype.slice.call(arguments);
              return t.unshift(e), r.push(t), r;
            };
          });
        for (var n = 0; n < r.methods.length; n++) {
          var o = r.methods[n];
          r[o] = r.factory(o);
        }
        r.getCookie = function (e) {
          var i = ("; " + t.cookie).split("; " + e + "=");
          return 2 == i.length && i.pop().split(";").shift();
        };
        var c = (r.isEditor = (function () {
          try {
            return (
              e.self !== e.top &&
              (new RegExp("app" + i, "ig").test(t.referrer) ||
                "edit" == r.getCookie("_bpr_edit"))
            );
          } catch (e) {
            return !1;
          }
        })());
        r.init = function (n, o) {
          if (((r.projectId = n), (r._config = o), !c))
            for (var a = 0; a < r.eventList.length; a++)
              e.addEventListener(r.eventList[a], r.handler, !0);
          var s = t.createElement("script");
          s.async = !0;
          var d = c ? "/editor/editor" : "/public-" + n;
          (s.src = "//cdn" + i + d + ".js"),
            t.getElementsByTagName("head")[0].appendChild(s);
        };
      }
  })(window, document, ".bigpicture.io");
  bigPicture.init("1646");
</script>


  

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>