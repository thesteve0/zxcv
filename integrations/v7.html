


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>V7 Integration &mdash; FiftyOne 1.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../_static/css/voxel51-website.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Labelbox Integration" href="labelbox.html" />
    <link rel="prev" title="Label Studio Integration" href="labelstudio.html" />
<meta property="og:image" content="https://voxel51.com/wp-content/uploads/2024/03/3.24_webpages_Home_AV.png" />

<link
  href="https://fonts.googleapis.com/css?family=Palanquin:400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
  rel="stylesheet"
/>
<script src="https://tag.clearbitscripts.com/v1/pk_b9ed71c8234edd4f77326bcbfab5a4ca/tags.js"></script>


  
  <script src="../_static/js/modernizr.min.js"></script>

  
</head>


<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://pytorch.org/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <div class="ecosystem-dropdown">
              <a id="dropdownMenuButton" data-toggle="ecosystem-dropdown">
                Ecosystem
              </a>
              <div class="ecosystem-dropdown-menu">
                <a class="nav-dropdown-item" href="https://pytorch.org/hub"">
                  <span class=dropdown-title>Models (Beta)</span>
                  <p>Discover, publish, and reuse pre-trained models</p>
                </a>
                <a class="nav-dropdown-item" href="https://pytorch.org/ecosystem">
                  <span class=dropdown-title>Tools & Libraries</span>
                  <p>Explore the ecosystem of tools and libraries</p>
                </a>
              </div>
            </div>
          </li>

          <li>
            <a href="https://pytorch.org/mobile">Mobile</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li class="active">
            <a href="https://pytorch.org/docs/stable/index.html">Docs</a>
          </li>

          <li>
            <div class="resources-dropdown">
              <a id="resourcesDropdownButton" data-toggle="resources-dropdown">
                Resources
              </a>
              <div class="resources-dropdown-menu">
                <a class="nav-dropdown-item" href="https://pytorch.org/resources"">
                  <span class=dropdown-title>Developer Resources</span>
                  <p>Find resources and get questions answered</p>
                </a>
                <a class="nav-dropdown-item" href="https://pytorch.org/features">
                  <span class=dropdown-title>About</span>
                  <p>Learn about PyTorch’s features and capabilities</p>
                </a>
              </div>
            </div>
          </li>

          <li>
            <a href="https://github.com/pytorch/pytorch">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>



<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../teams/index.html">FiftyOne Teams 🚀</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/index.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheets/index.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataset_zoo/index.html">Dataset Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_zoo/index.html">Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../brain.html">FiftyOne Brain</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/fiftyone.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecation.html">Deprecation Notices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
          <li><a href="index.html">FiftyOne Integrations</a> &gt;</li>
        
      <li>V7 Integration</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Contents
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content style-external-links">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <div class="section" id="v7-integration">
<span id="id1"></span><h1>V7 Integration<a class="headerlink" href="#v7-integration" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://www.v7labs.com">V7</a> is one of the leading image and video annotation
tools available, and we’ve made it easy to upload your data directly from
FiftyOne to V7 for labeling.</p>
<p>Create a <a class="reference external" href="https://www.v7labs.com/sign-up">V7 account</a> and follow
these <a class="reference internal" href="#v7-setup"><span class="std std-ref">simple setup instructions</span></a> to get up and running.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can request, manage, and import annotations from within
the FiftyOne App by installing the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/annotation">&#64;voxel51/annotation</a>
plugin!</p>
</div>
<p>FiftyOne provides an API to upload data, define label schemas,
and download annotations using V7, all programmatically in Python. All of the
following label types are supported, for both image and video datasets:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#classification"><span class="std std-ref">Classifications</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#object-detection"><span class="std std-ref">Detections</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#polylines"><span class="std std-ref">Polygons</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#keypoints"><span class="std std-ref">Keypoints</span></a></p></li>
</ul>
<img alt="v7-hero" class="align-center" src="../_images/v7-hero.jpg" />
<div class="section" id="basic-recipe">
<span id="v7-basic-recipe"></span><h2>Basic recipe<a class="headerlink" href="#basic-recipe" title="Permalink to this headline">¶</a></h2>
<p>The basic workflow to use V7 to add or edit labels on your FiftyOne datasets is
as follows:</p>
<ol class="arabic simple">
<li><p>Load a <a class="reference internal" href="../user_guide/dataset_creation/index.html#loading-datasets"><span class="std std-ref">labeled or unlabeled dataset</span></a> into FiftyOne</p></li>
<li><p>Explore the dataset using the <a class="reference internal" href="../user_guide/app.html#fiftyone-app"><span class="std std-ref">App</span></a> or
<a class="reference internal" href="../user_guide/using_views.html#using-views"><span class="std std-ref">dataset views</span></a> to locate either unlabeled samples that
you wish to annotate or labeled samples whose annotations you want to edit</p></li>
<li><p>Use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
method on your dataset or view to upload the samples and optionally their
existing labels to V7 by setting the parameter <code class="code docutils literal notranslate"><span class="pre">backend=&quot;darwin&quot;</span></code></p></li>
<li><p>In V7, perform the necessary annotation work</p></li>
<li><p>Back in FiftyOne, load your dataset and use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
method to merge the annotations back into your FiftyOne dataset</p></li>
<li><p>If desired, delete the V7 project and the record of the annotation run from
your FiftyOne dataset</p></li>
</ol>
<p><br />
The example below demonstrates this workflow.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must create an account at
<a class="reference external" href="https://www.v7labs.com/sign-up">https://www.v7labs.com/sign-up</a> and
follow the simple setup instructions in
<a class="reference internal" href="#v7-setup"><span class="std std-ref">this section</span></a> in order to run this example.</p>
</div>
<p>First, we create the annotation tasks in V7:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="c1"># Step 1: Load your data into FiftyOne</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
    <span class="s2">&quot;quickstart&quot;</span><span class="p">,</span> <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;v7-annotation-example&quot;</span>
<span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">persistent</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span>
    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">eval_key</span><span class="o">=</span><span class="s2">&quot;eval&quot;</span>
<span class="p">)</span>

<span class="c1"># Step 2: Locate a subset of your data requiring annotation</span>

<span class="c1"># Create a view that contains only high confidence false positive model</span>
<span class="c1"># predictions, with samples containing the most false positives first</span>
<span class="n">most_fp_view</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">dataset</span>
    <span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;fp&quot;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Retrieve the sample with the most high confidence false positives</span>
<span class="n">sample_id</span> <span class="o">=</span> <span class="n">most_fp_view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">id</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">sample_id</span><span class="p">)</span>

<span class="c1"># Step 3: Send samples to V7</span>

<span class="c1"># A unique identifier for this run</span>
<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;v7_basic_recipe&quot;</span>

<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_ground_truth&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;detections&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="n">dataset</span><span class="o">.</span><span class="n">distinct</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.label&quot;</span><span class="p">),</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span>
    <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">dataset_slug</span><span class="o">=</span><span class="n">anno_key</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Step 4: Perform annotation in V7 and save the tasks</span>
</pre></div>
</div>
<p>Then, once the annotation work is complete, we merge the annotations back into
FiftyOne:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;v7_basic_recipe&quot;</span>

<span class="c1"># Step 5: Merge annotations back into FiftyOne dataset</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;v7-annotation-example&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>

<span class="c1"># Load the view that was annotated in the App</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_view</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

<span class="c1"># Step 6: Cleanup</span>

<span class="c1"># Delete tasks from V7</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

<span class="c1"># Delete run record (not the labels) from FiftyOne</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#v7-examples"><span class="std std-ref">this section</span></a> to see a variety of common V7
annotation patterns.</p>
</div>
</div>
<div class="section" id="setup">
<span id="v7-setup"></span><h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>You can get started with V7 by
<a class="reference external" href="https://www.v7labs.com/sign-up">creating an account</a> and downloading an
API key.</p>
<div class="section" id="installing-the-v7-backend">
<h3>Installing the V7 backend<a class="headerlink" href="#installing-the-v7-backend" title="Permalink to this headline">¶</a></h3>
<p>In order to use the V7 backend, you must install the <code class="docutils literal notranslate"><span class="pre">darwin_fiftyone</span></code> Python
package:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>darwin_fiftyone
</pre></div>
</div>
<p>and register the <code class="docutils literal notranslate"><span class="pre">darwin</span></code> backend with FiftyOne, which you can do either by
setting the following environment variables:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_ANNOTATION_BACKENDS</span><span class="o">=</span>*,darwin
<span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_DARWIN_CONFIG_CLS</span><span class="o">=</span>darwin_fiftyone.DarwinBackendConfig
<span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_DARWIN_API_KEY</span><span class="o">=</span>XXXXXXXXX
</pre></div>
</div>
<p>or by adding the following parameters to your
<a class="reference internal" href="../user_guide/annotation.html#annotation-config"><span class="std std-ref">annotation config</span></a> located at
<code class="code docutils literal notranslate"><span class="pre">~/.fiftyone/annotation_config.json</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;backends&quot;: {
        &quot;darwin&quot;: {
            &quot;config_cls&quot;: &quot;darwin_fiftyone.DarwinBackendConfig&quot;,
            &quot;api_key&quot;: &quot;XXXXXXXXX&quot;
        }
    }
}
</pre></div>
</div>
<p>Note that this file may not exist if you haven’t previously customized your
annotation backends.</p>
</div>
<div class="section" id="using-the-v7-backend">
<h3>Using the V7 backend<a class="headerlink" href="#using-the-v7-backend" title="Permalink to this headline">¶</a></h3>
<p>By default, calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> will
use the <a class="reference internal" href="cvat.html#cvat-integration"><span class="std std-ref">CVAT backend</span></a>.</p>
<p>To use the V7 backend, simply set the optional <code class="code docutils literal notranslate"><span class="pre">backend</span></code> parameter of
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> to
<code class="code docutils literal notranslate"><span class="pre">&quot;darwin&quot;</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can permanently configure FiftyOne to use the V7 backend by
setting the <code class="code docutils literal notranslate"><span class="pre">FIFTYONE_ANNOTATION_DEFAULT_BACKEND</span></code> environment variable:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_ANNOTATION_DEFAULT_BACKEND</span><span class="o">=</span>darwin
</pre></div>
</div>
<p>or by setting the <code class="code docutils literal notranslate"><span class="pre">default_backend</span></code> parameter of your
<a class="reference internal" href="../user_guide/annotation.html#annotation-config"><span class="std std-ref">annotation config</span></a> located at
<code class="code docutils literal notranslate"><span class="pre">~/.fiftyone/annotation_config.json</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;default_backend&quot;: &quot;darwin&quot;
}
</pre></div>
</div>
</div>
<div class="section" id="authentication">
<h3>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h3>
<p>In order to connect to V7, you must provide your API key, which can be done in
a variety of ways.</p>
<p><strong>Environment variables (recommended)</strong></p>
<p>The recommended way to configure your V7 API key is to store it in the
<code class="code docutils literal notranslate"><span class="pre">FIFTYONE_DARWIN_API_KEY</span></code> environment variable. This is automatically accessed
by FiftyOne whenever a connection to V7 is made.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_DARWIN_API_KEY</span><span class="o">=</span>...
</pre></div>
</div>
<p><strong>FiftyOne annotation config</strong></p>
<p>You can also store your credentials in your
<a class="reference internal" href="../user_guide/annotation.html#annotation-config"><span class="std std-ref">annotation config</span></a> located at
<code class="code docutils literal notranslate"><span class="pre">~/.fiftyone/annotation_config.json</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;backends&quot;: {
        &quot;darwin&quot;: {
            &quot;api_key&quot;: ...,
        }
    }
}
</pre></div>
</div>
<p>Note that this file will not exist until you create it.</p>
<p><strong>Keyword arguments</strong></p>
<p>You can manually provide your API key as a keyword argument each time you call
methods like
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
that require connections to V7:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">dataset_slug</span><span class="o">=</span><span class="n">anno_key</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=...</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="requesting-annotations">
<span id="v7-requesting-annotations"></span><h2>Requesting annotations<a class="headerlink" href="#requesting-annotations" title="Permalink to this headline">¶</a></h2>
<p>Use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> method
to send the samples and optionally existing labels in a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> or
<a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a> to V7 for annotation.</p>
<p>The basic syntax is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">anno_key</span></code> argument defines a unique identifier for the annotation run, and
you will provide it to methods like
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_annotation_info()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotation_results" title="fiftyone.core.collections.SampleCollection.load_annotation_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotation_results()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.rename_annotation_run" title="fiftyone.core.collections.SampleCollection.rename_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_annotation_run()</span></code></a>, and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_annotation_run" title="fiftyone.core.collections.SampleCollection.delete_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_annotation_run()</span></code></a>
to manage the run in the future.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
will upload the source media files to the V7 server.</p>
</div>
<p>In addition,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
provides various parameters that you can use to customize the annotation tasks
that you wish to be performed.</p>
<p>The following parameters are supported by all annotation backends:</p>
<ul class="simple">
<li><p><strong>backend</strong> (<em>None</em>): the annotation backend to use. Use <code class="code docutils literal notranslate"><span class="pre">&quot;darwin&quot;</span></code> for
the V7 backend. The supported values are
<code class="code docutils literal notranslate"><span class="pre">fiftyone.annotation_config.backends.keys()</span></code> and the default is
<code class="code docutils literal notranslate"><span class="pre">fiftyone.annotation_config.default_backend</span></code></p></li>
<li><p><strong>media_field</strong> (<em>“filepath”</em>): the sample field containing the path to the
source media to upload</p></li>
<li><p><strong>launch_editor</strong> (<em>False</em>): whether to launch the annotation backend’s
editor after uploading the samples</p></li>
</ul>
<p>The following parameters allow you to configure the labeling schema to use for
your annotation tasks. See <a class="reference internal" href="#v7-label-schema"><span class="std std-ref">this section</span></a> for more
details:</p>
<ul>
<li><p><strong>label_schema</strong> (<em>None</em>): a dictionary defining the label schema to use.
If this argument is provided, it takes precedence over <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> and
<code class="code docutils literal notranslate"><span class="pre">label_type</span></code></p></li>
<li><p><strong>label_field</strong> (<em>None</em>): a string indicating a new or existing label field
to annotate</p></li>
<li><p><strong>label_type</strong> (<em>None</em>): a string indicating the type of labels to
annotate. The possible label types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;classification&quot;</span></code>: a single classification stored in
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification" title="fiftyone.core.labels.Classification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classification</span></code></a> fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;classifications&quot;</span></code>: multilabel classifications stored in
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classifications" title="fiftyone.core.labels.Classifications"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classifications</span></code></a> fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;detections&quot;</span></code>: object detections stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;polygons&quot;</span></code>: polygons stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polylines" title="fiftyone.core.labels.Polylines"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polylines</span></code></a> fields with their
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.filled" title="fiftyone.core.labels.Polyline.filled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filled</span></code></a> attributes set to
<code class="code docutils literal notranslate"><span class="pre">True</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;keypoints&quot;</span></code>: keypoints stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoints" title="fiftyone.core.labels.Keypoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoints</span></code></a> fields</p></li>
</ul>
<p>All new label fields must have their type specified via this argument or in
<code class="code docutils literal notranslate"><span class="pre">label_schema</span></code></p>
</li>
<li><p><strong>classes</strong> (<em>None</em>): a list of strings indicating the class options for
<code class="code docutils literal notranslate"><span class="pre">label_field</span></code> or all fields in <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> without classes specified.
All new label fields must have a class list provided via one of the
supported methods. For existing label fields, if classes are not provided
by this argument nor <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code>, the observed labels on your dataset
are used</p></li>
<li><p><strong>allow_additions</strong> (<em>True</em>): whether to allow new labels to be added. Only
applicable when editing existing label fields</p></li>
<li><p><strong>allow_deletions</strong> (<em>True</em>): whether to allow labels to be deleted. Only
applicable when editing existing label fields</p></li>
<li><p><strong>allow_label_edits</strong> (<em>True</em>): whether to allow the <code class="code docutils literal notranslate"><span class="pre">label</span></code> attribute of
existing labels to be modified. Only applicable when editing existing
fields with <code class="code docutils literal notranslate"><span class="pre">label</span></code> attributes</p></li>
<li><p><strong>allow_spatial_edits</strong> (<em>True</em>): whether to allow edits to the spatial
properties (bounding boxes, vertices, keypoints, etc) of labels.
Only applicable when editing existing spatial label fields</p></li>
</ul>
<p><br />
In addition, the following V7-specific parameters can also be provided:</p>
<ul class="simple">
<li><p><strong>dataset_slug</strong> (<em>None</em>): the name of the dataset to use or create in
Darwin. This is currently mandatory</p></li>
<li><p><strong>external_storage</strong> (<em>None</em>): the sluggified name of a Darwin external
storage to use. If provided, indicates that all files should be treated as
external storage</p></li>
</ul>
<div class="section" id="label-schema">
<span id="v7-label-schema"></span><h3>Label schema<a class="headerlink" href="#label-schema" title="Permalink to this headline">¶</a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code>, <code class="code docutils literal notranslate"><span class="pre">label_field</span></code>, <code class="code docutils literal notranslate"><span class="pre">label_type</span></code>, and <code class="code docutils literal notranslate"><span class="pre">classes</span></code> parameters to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> allow
you to define the annotation schema that you wish to be used.</p>
<p>The label schema may define new label field(s) that you wish to populate, and
it may also include existing label field(s), in which case you can add, delete,
or edit the existing labels on your FiftyOne dataset.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> argument is the most flexible way to define how to construct
tasks in V7. In its most verbose form, it is a dictionary that defines
the label type, annotation type, and possible classes for each label field:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_field&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;classifications&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;class1&quot;</span><span class="p">,</span> <span class="s2">&quot;class2&quot;</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span>
    <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span>
    <span class="n">dataset_slug</span><span class="o">=</span><span class="s2">&quot;dataset_slug&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, if you are only editing or creating a single label field, you
can use the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code>, <code class="code docutils literal notranslate"><span class="pre">label_type</span></code>, and <code class="code docutils literal notranslate"><span class="pre">classes</span></code>  parameters to specify
the components of the label schema individually:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">label_field</span> <span class="o">=</span> <span class="s2">&quot;new_field&quot;</span><span class="p">,</span>
<span class="n">label_type</span> <span class="o">=</span> <span class="s2">&quot;classifications&quot;</span>
<span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class1&quot;</span><span class="p">,</span> <span class="s2">&quot;class2&quot;</span><span class="p">]</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="n">label_type</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">,</span>
    <span class="n">dataset_slug</span><span class="o">=</span><span class="s2">&quot;dataset_slug&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>When you are annotating existing label fields, you can omit some of these
parameters from
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>, as
FiftyOne can infer the appropriate values to use:</p>
<ul class="simple">
<li><p><strong>label_type</strong>: if omitted, the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> type of the field will be used to
infer the appropriate value for this parameter</p></li>
<li><p><strong>classes</strong>: if omitted, the observed labels on your dataset will be used
to construct a classes list</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Annotating multiple fields is not yet supported by the <code class="code docutils literal notranslate"><span class="pre">darwin</span></code> backend.
Please check back soon!</p>
</div>
</div>
<div class="section" id="label-attributes">
<span id="v7-label-attributes"></span><h3>Label attributes<a class="headerlink" href="#label-attributes" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Label attributes are not yet supported by the <code class="code docutils literal notranslate"><span class="pre">darwin</span></code> backend. Please
check back soon!</p>
</div>
</div>
</div>
<div class="section" id="loading-annotations">
<span id="v7-loading-annotations"></span><h2>Loading annotations<a class="headerlink" href="#loading-annotations" title="Permalink to this headline">¶</a></h2>
<p>After your annotations tasks in the annotation backend are complete, you can
use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
method to download them and merge them back into your FiftyOne dataset.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">anno_key</span></code> parameter is the unique identifier for the annotation run that
you provided when calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>. You
can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.list_annotation_runs" title="fiftyone.core.collections.SampleCollection.list_annotation_runs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_annotation_runs()</span></code></a>
to see the available keys on a dataset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
will not delete any information for the run from the annotation backend.</p>
<p>However, you can pass <code class="code docutils literal notranslate"><span class="pre">cleanup=True</span></code> to delete the V7 dataset associated
with the run after the annotations are downloaded.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">dest_field</span></code> parameter of
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
is not yet supported by the <code class="code docutils literal notranslate"><span class="pre">darwin</span></code> backend. Check back soon!</p>
</div>
</div>
<div class="section" id="managing-annotation-runs">
<span id="v7-managing-annotation-runs"></span><h2>Managing annotation runs<a class="headerlink" href="#managing-annotation-runs" title="Permalink to this headline">¶</a></h2>
<p>FiftyOne provides a variety of methods that you can use to manage in-progress
or completed annotation runs.</p>
<p>For example, you can call
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.list_annotation_runs" title="fiftyone.core.collections.SampleCollection.list_annotation_runs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_annotation_runs()</span></code></a>
to see the available annotation keys on a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">list_annotation_runs</span><span class="p">()</span>
</pre></div>
</div>
<p>Or, you can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.get_annotation_info" title="fiftyone.core.collections.SampleCollection.get_annotation_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_annotation_info()</span></code></a>
to retrieve information about the configuration of an annotation run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</pre></div>
</div>
<p>Use <a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotation_results" title="fiftyone.core.collections.SampleCollection.load_annotation_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotation_results()</span></code></a>
to load the <a class="reference internal" href="../api/fiftyone.utils.annotations.html#fiftyone.utils.annotations.AnnotationResults" title="fiftyone.utils.annotations.AnnotationResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnnotationResults</span></code></a>
instance for an annotation run.</p>
<p>All results objects provide a <a class="reference internal" href="../api/fiftyone.utils.annotations.html#fiftyone.utils.annotations.AnnotationResults.cleanup" title="fiftyone.utils.annotations.AnnotationResults.cleanup"><code class="xref py py-class docutils literal notranslate"><span class="pre">cleanup()</span></code></a>
method that you can use to delete all information associated with a run from
the annotation backend.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
<p>You can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.rename_annotation_run" title="fiftyone.core.collections.SampleCollection.rename_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_annotation_run()</span></code></a>
to rename the annotation key associated with an existing annotation run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">rename_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">new_anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, you can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_annotation_run" title="fiftyone.core.collections.SampleCollection.delete_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_annotation_run()</span></code></a>
to delete the record of an annotation run from your FiftyOne dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_annotation_run" title="fiftyone.core.collections.SampleCollection.delete_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_annotation_run()</span></code></a>
only deletes the <strong>record</strong> of the annotation run from your FiftyOne
dataset; it will not delete any annotations loaded onto your dataset via
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>,
nor will it delete any associated information from the annotation backend.</p>
</div>
</div>
<div class="section" id="examples">
<span id="v7-examples"></span><h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>This section demonstrates how to perform some common annotation workflows on a
FiftyOne dataset using the V7 backend.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All of the examples below assume you have configured your V7 backend as
described in <a class="reference internal" href="#v7-setup"><span class="std std-ref">this section</span></a>.</p>
</div>
<div class="section" id="adding-new-label-fields">
<span id="v7-new-label-fields"></span><h3>Adding new label fields<a class="headerlink" href="#adding-new-label-fields" title="Permalink to this headline">¶</a></h3>
<p>In order to annotate a new label field, you can provide the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code>,
<code class="code docutils literal notranslate"><span class="pre">label_type</span></code>, and <code class="code docutils literal notranslate"><span class="pre">classes</span></code> parameters to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> to
define the annotation schema for the field:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;v7_new_field&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;new_classifications&quot;</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="s2">&quot;classifications&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="n">dataset_slug</span><span class="o">=</span><span class="n">anno_key</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Create annotations in V7</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can use the <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> argument to define the same
labeling task:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;v7_new_field&quot;</span>

<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_classifications&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;classifications&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span>
    <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span>
    <span class="n">dataset_slug</span><span class="o">=</span><span class="n">anno_key</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Create annotations in V7</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="editing-existing-labels">
<span id="v7-editing-labels"></span><h3>Editing existing labels<a class="headerlink" href="#editing-existing-labels" title="Permalink to this headline">¶</a></h3>
<p>A common use case is to fix annotation mistakes that you discovered in your
datasets through FiftyOne.</p>
<p>You can easily edit the labels in an existing field of your FiftyOne dataset
by simply passing the name of the field via the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> parameter of
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;v7_existing_field&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;darwin&quot;</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">dataset_slug</span><span class="o">=</span><span class="n">anno_key</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Modify/add/delete bounding boxes and their attributes in V7</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="labelbox.html" class="btn btn-neutral float-right" title="Labelbox Integration" accesskey="n" rel="next">Next <img src="../_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="labelstudio.html" class="btn btn-neutral" title="Label Studio Integration" accesskey="p" rel="prev"><img src="../_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  
</footer>
          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">V7 Integration</a><ul>
<li><a class="reference internal" href="#basic-recipe">Basic recipe</a></li>
<li><a class="reference internal" href="#setup">Setup</a><ul>
<li><a class="reference internal" href="#installing-the-v7-backend">Installing the V7 backend</a></li>
<li><a class="reference internal" href="#using-the-v7-backend">Using the V7 backend</a></li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
</ul>
</li>
<li><a class="reference internal" href="#requesting-annotations">Requesting annotations</a><ul>
<li><a class="reference internal" href="#label-schema">Label schema</a></li>
<li><a class="reference internal" href="#label-attributes">Label attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loading-annotations">Loading annotations</a></li>
<li><a class="reference internal" href="#managing-annotation-runs">Managing annotation runs</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#adding-new-label-fields">Adding new label fields</a></li>
<li><a class="reference internal" href="#editing-existing-labels">Editing existing labels</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
         <script src="../_static/jquery.js"></script>
         <script src="../_static/underscore.js"></script>
         <script src="../_static/doctools.js"></script>
         <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
         <script src="../_static/js/voxel51-website.js"></script>
         <script src="../_static/js/custom.js"></script>
     

  

  <script type="text/javascript" src="../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->


  <div class="container-fluid docs-tutorials-resources" id="docs-tutorials-resources">
    <div class="container">
      <div class="row">
        <div class="col-md-4 text-center">
          <h2>Docs</h2>
          <p>Access comprehensive developer documentation for PyTorch</p>
          <a class="with-right-arrow" href="https://pytorch.org/docs/stable/index.html">View Docs</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Tutorials</h2>
          <p>Get in-depth tutorials for beginners and advanced developers</p>
          <a class="with-right-arrow" href="https://pytorch.org/tutorials">View Tutorials</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Resources</h2>
          <p>Find development resources and get your questions answered</p>
          <a class="with-right-arrow" href="https://pytorch.org/resources">View Resources</a>
        </div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="https://pytorch.org/" class="footer-logo"></a>
      </div>

      <div class="footer-links-wrapper">
        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/">PyTorch</a></li>
            <li><a href="https://pytorch.org/get-started">Get Started</a></li>
            <li><a href="https://pytorch.org/features">Features</a></li>
            <li><a href="https://pytorch.org/ecosystem">Ecosystem</a></li>
            <li><a href="https://pytorch.org/blog/">Blog</a></li>
            <li><a href="https://github.com/pytorch/pytorch/blob/master/CONTRIBUTING.md">Contributing</a></li>
          </ul>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/resources">Resources</a></li>
            <li><a href="https://pytorch.org/tutorials">Tutorials</a></li>
            <li><a href="https://pytorch.org/docs/stable/index.html">Docs</a></li>
            <li><a href="https://discuss.pytorch.org" target="_blank">Discuss</a></li>
            <li><a href="https://github.com/pytorch/pytorch/issues" target="_blank">Github Issues</a></li>
            <li><a href="https://pytorch.org/assets/brand-guidelines/PyTorch-Brand-Guidelines.pdf" target="_blank">Brand Guidelines</a></li>
          </ul>
        </div>

        <div class="footer-links-col follow-us-col">
          <ul>
            <li class="list-title">Stay Connected</li>
            <li>
              <div id="mc_embed_signup">
                <form
                  action="https://twitter.us14.list-manage.com/subscribe/post?u=75419c71fe0a935e53dfa4a3f&id=91d0dccd39"
                  method="post"
                  id="mc-embedded-subscribe-form"
                  name="mc-embedded-subscribe-form"
                  class="email-subscribe-form validate"
                  target="_blank"
                  novalidate>
                  <div id="mc_embed_signup_scroll" class="email-subscribe-form-fields-wrapper">
                    <div class="mc-field-group">
                      <label for="mce-EMAIL" style="display:none;">Email Address</label>
                      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address">
                    </div>

                    <div id="mce-responses" class="clear">
                      <div class="response" id="mce-error-response" style="display:none"></div>
                      <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->

                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_75419c71fe0a935e53dfa4a3f_91d0dccd39" tabindex="-1" value=""></div>

                    <div class="clear">
                      <input type="submit" value="" name="subscribe" id="mc-embedded-subscribe" class="button email-subscribe-button">
                    </div>
                  </div>
                </form>
              </div>

            </li>
          </ul>

          <div class="footer-social-icons">
            <a href="https://www.facebook.com/pytorch" target="_blank" class="facebook"></a>
            <a href="https://twitter.com/pytorch" target="_blank" class="twitter"></a>
            <a href="https://www.youtube.com/pytorch" target="_blank" class="youtube"></a>
          </div>
        </div>
      </div>
    </div>
  </footer>


  

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->


  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://pytorch.org/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <a href="https://pytorch.org/features">Features</a>
          </li>

          <li>
            <a href="https://pytorch.org/ecosystem">Ecosystem</a>
          </li>

          <li>
            <a href="https://pytorch.org/mobile">Mobile</a>
          </li>

          <li>
            <a href="https://pytorch.org/hub">PyTorch Hub</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li class="active">
            <a href="https://pytorch.org/docs/stable/index.html">Docs</a>
          </li>

          <li>
            <a href="https://pytorch.org/resources">Resources</a>
          </li>

          <li>
            <a href="https://github.com/pytorch/pytorch">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>


  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>