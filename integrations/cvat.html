


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CVAT Integration &mdash; FiftyOne 1.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../_static/css/voxel51-website.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Label Studio Integration" href="labelstudio.html" />
    <link rel="prev" title="ActivityNet Integration" href="activitynet.html" />
<meta property="og:image" content="https://voxel51.com/wp-content/uploads/2024/03/3.24_webpages_Home_AV.png" />

<link
  href="https://fonts.googleapis.com/css?family=Palanquin:400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
  rel="stylesheet"
/>
<script src="https://tag.clearbitscripts.com/v1/pk_b9ed71c8234edd4f77326bcbfab5a4ca/tags.js"></script>


  
  <script src="../_static/js/modernizr.min.js"></script>

  
</head>


<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://pytorch.org/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <div class="ecosystem-dropdown">
              <a id="dropdownMenuButton" data-toggle="ecosystem-dropdown">
                Ecosystem
              </a>
              <div class="ecosystem-dropdown-menu">
                <a class="nav-dropdown-item" href="https://pytorch.org/hub"">
                  <span class=dropdown-title>Models (Beta)</span>
                  <p>Discover, publish, and reuse pre-trained models</p>
                </a>
                <a class="nav-dropdown-item" href="https://pytorch.org/ecosystem">
                  <span class=dropdown-title>Tools & Libraries</span>
                  <p>Explore the ecosystem of tools and libraries</p>
                </a>
              </div>
            </div>
          </li>

          <li>
            <a href="https://pytorch.org/mobile">Mobile</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li class="active">
            <a href="https://pytorch.org/docs/stable/index.html">Docs</a>
          </li>

          <li>
            <div class="resources-dropdown">
              <a id="resourcesDropdownButton" data-toggle="resources-dropdown">
                Resources
              </a>
              <div class="resources-dropdown-menu">
                <a class="nav-dropdown-item" href="https://pytorch.org/resources"">
                  <span class=dropdown-title>Developer Resources</span>
                  <p>Find resources and get questions answered</p>
                </a>
                <a class="nav-dropdown-item" href="https://pytorch.org/features">
                  <span class=dropdown-title>About</span>
                  <p>Learn about PyTorch’s features and capabilities</p>
                </a>
              </div>
            </div>
          </li>

          <li>
            <a href="https://github.com/pytorch/pytorch">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>



<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../teams/index.html">FiftyOne Teams 🚀</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/index.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheets/index.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataset_zoo/index.html">Dataset Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_zoo/index.html">Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../brain.html">FiftyOne Brain</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/fiftyone.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecation.html">Deprecation Notices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
          <li><a href="index.html">FiftyOne Integrations</a> &gt;</li>
        
      <li>CVAT Integration</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Contents
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content style-external-links">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <div class="section" id="cvat-integration">
<span id="id1"></span><h1>CVAT Integration<a class="headerlink" href="#cvat-integration" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/opencv/cvat">CVAT</a> is one of the most popular
open-source image and video annotation tools available, and we’ve made it easy
to upload your data directly from FiftyOne to CVAT to add or edit labels.</p>
<p>You can use CVAT either through the hosted server at
<a class="reference external" href="https://app.cvat.ai">app.cvat.ai</a> or through a
<a class="reference external" href="https://opencv.github.io/cvat/docs/administration/basics/installation/">self-hosted server</a>.
In either case, FiftyOne provides <a class="reference internal" href="#cvat-setup"><span class="std std-ref">simple setup</span></a> instructions
that you can use to specify the necessary account credentials and server
endpoint to use.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know? You can request, manage, and import annotations from within
the FiftyOne App by installing the
<a class="reference external" href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/annotation">&#64;voxel51/annotation</a>
plugin!</p>
</div>
<p>CVAT provides three levels of abstraction for annotation workflows: projects,
tasks, and jobs. A job contains one or more images and can be assigned to a
specific annotator or reviewer. A task defines the label schema to use for
annotation and contains one or more jobs. A project can optionally be created
to group multiple tasks together under a shared label schema.</p>
<p>FiftyOne provides an API to create tasks and jobs, upload data, define label
schemas, and download annotations using CVAT, all programmatically in Python.
All of the following label types are supported, for both image and video
datasets:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#classification"><span class="std std-ref">Classifications</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#object-detection"><span class="std std-ref">Detections</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#instance-segmentation"><span class="std std-ref">Instance segmentations</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#polylines"><span class="std std-ref">Polygons and polylines</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#keypoints"><span class="std std-ref">Keypoints</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#adding-sample-fields"><span class="std std-ref">Scalar fields</span></a></p></li>
<li><p><a class="reference internal" href="../user_guide/using_datasets.html#semantic-segmentation"><span class="std std-ref">Semantic segmentation</span></a></p></li>
</ul>
<img alt="cvat-example" class="align-center" src="../_images/cvat_example.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check out <a class="reference internal" href="../tutorials/cvat_annotation.html"><span class="doc">this tutorial</span></a> to see how
you can use FiftyOne to upload your data to CVAT to create, delete, and fix
annotations.</p>
</div>
<div class="section" id="basic-recipe">
<span id="cvat-basic-recipe"></span><h2>Basic recipe<a class="headerlink" href="#basic-recipe" title="Permalink to this headline">¶</a></h2>
<p>The basic workflow to use CVAT to add or edit labels on your FiftyOne datasets
is as follows:</p>
<ol class="arabic simple">
<li><p>Load a <a class="reference internal" href="../user_guide/dataset_creation/index.html#loading-datasets"><span class="std std-ref">labeled or unlabeled dataset</span></a> into FiftyOne</p></li>
<li><p>Explore the dataset using the <a class="reference internal" href="../user_guide/app.html#fiftyone-app"><span class="std std-ref">App</span></a> or
<a class="reference internal" href="../user_guide/using_views.html#using-views"><span class="std std-ref">dataset views</span></a> to locate either unlabeled samples that
you wish to annotate or labeled samples whose annotations you want to edit</p></li>
<li><p>Use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
method on your dataset or view to upload the samples and optionally their
existing labels to CVAT</p></li>
<li><p>In CVAT, perform the necessary annotation work</p></li>
<li><p>Back in FiftyOne, load your dataset and use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
method to merge the annotations back into your FiftyOne dataset</p></li>
<li><p>If desired, delete the CVAT tasks and the record of the annotation run from
your FiftyOne dataset</p></li>
</ol>
<p><br />
The example below demonstrates this workflow.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must create an account at <a class="reference external" href="https://app.cvat.ai">app.cvat.ai</a> in order to
run this example.</p>
<p>Note that you can store your credentials as described in
<a class="reference internal" href="#cvat-setup"><span class="std std-ref">this section</span></a> to avoid entering them manually each time
you interact with CVAT.</p>
</div>
<p>First, we create the annotation tasks in CVAT:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="c1"># Step 1: Load your data into FiftyOne</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
    <span class="s2">&quot;quickstart&quot;</span><span class="p">,</span> <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;cvat-annotation-example&quot;</span>
<span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">persistent</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span>
    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">eval_key</span><span class="o">=</span><span class="s2">&quot;eval&quot;</span>
<span class="p">)</span>

<span class="c1"># Step 2: Locate a subset of your data requiring annotation</span>

<span class="c1"># Create a view that contains only high confidence false positive model</span>
<span class="c1"># predictions, with samples containing the most false positives first</span>
<span class="n">most_fp_view</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">dataset</span>
    <span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;fp&quot;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Let&#39;s edit the ground truth annotations for the sample with the most</span>
<span class="c1"># high confidence false positives</span>
<span class="n">sample_id</span> <span class="o">=</span> <span class="n">most_fp_view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">id</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">sample_id</span><span class="p">)</span>

<span class="c1"># Step 3: Send samples to CVAT</span>

<span class="c1"># A unique identifier for this run</span>
<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_basic_recipe&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;iscrowd&quot;</span><span class="p">],</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Step 4: Perform annotation in CVAT and save the tasks</span>
</pre></div>
</div>
<p>Then, once the annotation work is complete, we merge the annotations back into
FiftyOne:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_basic_recipe&quot;</span>

<span class="c1"># Step 5: Merge annotations back into FiftyOne dataset</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;cvat-annotation-example&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>

<span class="c1"># Load the view that was annotated in the App</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_view</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

<span class="c1"># Step 6: Cleanup</span>

<span class="c1"># Delete tasks from CVAT</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

<span class="c1"># Delete run record (not the labels) from FiftyOne</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Skip to <a class="reference internal" href="#cvat-examples"><span class="std std-ref">this section</span></a> to see a variety of common CVAT
annotation patterns.</p>
</div>
</div>
<div class="section" id="setup">
<span id="cvat-setup"></span><h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>FiftyOne supports both <a class="reference external" href="https://app.cvat.ai">app.cvat.ai</a> and
<a class="reference external" href="https://opencv.github.io/cvat/docs/administration/basics/installation/">self-hosted servers</a>.</p>
<p>The easiest way to get started is to use the default server
<a class="reference external" href="https://app.cvat.ai">app.cvat.ai</a>, which simply requires creating an account and
then providing your authentication credentials as shown below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CVAT is the default annotation backend used by FiftyOne. However, if you
have changed your default backend, you can opt-in to using CVAT on a
one-off basis by passing the optional <code class="code docutils literal notranslate"><span class="pre">backend</span></code> parameter to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;cvat&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Refer to <a class="reference internal" href="../user_guide/annotation.html#annotation-setup"><span class="std std-ref">these instructions</span></a> to see how to
permanently change your default backend.</p>
</div>
<div class="section" id="authentication">
<h3>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h3>
<p>In order to connect to a CVAT server, you must provide your login credentials,
which can be done in a variety of ways.</p>
<p><strong>Environment variables (recommended)</strong></p>
<p>The recommended way to configure your CVAT login credentials is to store them
in the <code class="code docutils literal notranslate"><span class="pre">FIFTYONE_CVAT_USERNAME</span></code> and <code class="code docutils literal notranslate"><span class="pre">FIFTYONE_CVAT_PASSWORD</span></code> environment
variables. These are automatically accessed by FiftyOne whenever a connection
to CVAT is made.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_CVAT_USERNAME</span><span class="o">=</span>...
<span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_CVAT_PASSWORD</span><span class="o">=</span>...
<span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_CVAT_EMAIL</span><span class="o">=</span>...<span class="w">  </span><span class="c1"># if applicable</span>
</pre></div>
</div>
<p><strong>FiftyOne annotation config</strong></p>
<p>You can also store your credentials in your
<a class="reference internal" href="../user_guide/annotation.html#annotation-config"><span class="std std-ref">annotation config</span></a> located at
<code class="code docutils literal notranslate"><span class="pre">~/.fiftyone/annotation_config.json</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;backends&quot;: {
        &quot;cvat&quot;: {
            ...
            &quot;username&quot;: ...,
            &quot;password&quot;: ...,
            &quot;email&quot;: ...  # if applicable
        }
    }
}
</pre></div>
</div>
<p>Note that this file will not exist until you create it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Storing your username and password in plain text on disk is generally not
recommended. Consider using environment variables instead.</p>
</div>
<p><strong>Keyword arguments</strong></p>
<p>You can manually provide your login credentials as keyword arguments each time
you call methods like
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
that require connections to CVAT:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">username</span><span class="o">=...</span><span class="p">,</span> <span class="n">password</span><span class="o">=...</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Command line prompt</strong></p>
<p>If you have not stored your login credentials via another method, you will be
prompted to enter them interactively in your shell each time you call a method
that requires a connection to CVAT:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Please enter your login credentials.
You can avoid this in the future by setting your `FIFTYONE_CVAT_USERNAME` and `FIFTYONE_CVAT_PASSWORD` environment variables.
Username: ...
Password: ...
</pre></div>
</div>
</div>
<div class="section" id="cvat-self-hosted-server">
<span id="id5"></span><h3>Self-hosted servers<a class="headerlink" href="#cvat-self-hosted-server" title="Permalink to this headline">¶</a></h3>
<p>If you wish to use a
<a class="reference external" href="https://opencv.github.io/cvat/docs/administration/basics/installation/">self-hosted server</a>,
you can configure the URL of your server in any of the following ways:</p>
<ul class="simple">
<li><p>Set the <code class="code docutils literal notranslate"><span class="pre">FIFTYONE_CVAT_URL</span></code> environment variable:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FIFTYONE_CVAT_URL</span><span class="o">=</span>http://localhost:8080
</pre></div>
</div>
<ul class="simple">
<li><p>Store the <code class="code docutils literal notranslate"><span class="pre">url</span></code> of your server in your
<a class="reference internal" href="../user_guide/annotation.html#annotation-config"><span class="std std-ref">annotation config</span></a> at
<code class="code docutils literal notranslate"><span class="pre">~/.fiftyone/annotation_config.json</span></code>:</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;backends&quot;: {
        &quot;cvat&quot;: {
            &quot;url&quot;: &quot;http://localhost:8080&quot;,
            ...
        }
    }
}
</pre></div>
</div>
<ul class="simple">
<li><p>Pass the <code class="code docutils literal notranslate"><span class="pre">url</span></code> parameter manually each time you call
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If your self-hosted server requires additional headers in order to make HTTP
requests, you can provide them in either of the following ways:</p>
<ul class="simple">
<li><p>Store your custom headers in a <code class="code docutils literal notranslate"><span class="pre">headers</span></code> key of your
<a class="reference internal" href="../user_guide/annotation.html#annotation-config"><span class="std std-ref">annotation config</span></a> at
<code class="code docutils literal notranslate"><span class="pre">~/.fiftyone/annotation_config.json</span></code>:</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    &quot;backends&quot;: {
        &quot;cvat&quot;: {
            ...
            &quot;headers&quot;: {
                &quot;&lt;name&gt;&quot;: &quot;&lt;value&gt;&quot;,
                ...
            }
        }
    }
}
</pre></div>
</div>
<ul class="simple">
<li><p>Pass the <code class="code docutils literal notranslate"><span class="pre">headers</span></code> parameter manually each time you call
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="o">...</span> <span class="n">headers</span><span class="o">=...</span><span class="p">)</span>
<span class="n">view</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="o">...</span> <span class="n">headers</span><span class="o">=...</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="requesting-annotations">
<span id="cvat-requesting-annotations"></span><h2>Requesting annotations<a class="headerlink" href="#requesting-annotations" title="Permalink to this headline">¶</a></h2>
<p>Use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> method
to send the samples and optionally existing labels in a <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> or
<a class="reference internal" href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetView</span></code></a> to CVAT for annotation.</p>
<p>The basic syntax is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">anno_key</span></code> argument defines a unique identifier for the annotation run, and
you will provide it to methods like
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_annotation_info()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotation_results" title="fiftyone.core.collections.SampleCollection.load_annotation_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotation_results()</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.rename_annotation_run" title="fiftyone.core.collections.SampleCollection.rename_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_annotation_run()</span></code></a>, and
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_annotation_run" title="fiftyone.core.collections.SampleCollection.delete_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_annotation_run()</span></code></a>
to manage the run in the future.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>FiftyOne assumes that all labels in an annotation run can fit in memory.</p>
<p>If you are annotating very large scale video datasets with dense frame
labels, you may violate this assumption. Instead, consider breaking the
work into multiple smaller annotation runs that each contain limited
subsets of the samples you wish to annotate.</p>
<p>You can use <a class="reference internal" href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.stats" title="fiftyone.core.dataset.Dataset.stats"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset.stats()</span></code></a>
to get a sense for the total size of the labels in a dataset as a rule of
thumb to estimate the size of a candidate annotation run.</p>
</div>
<p>In addition,
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
provides various parameters that you can use to customize the annotation tasks
that you wish to be performed.</p>
<p>The following parameters are supported by all annotation backends:</p>
<ul class="simple">
<li><p><strong>backend</strong> (<em>None</em>): the annotation backend to use. Use <code class="code docutils literal notranslate"><span class="pre">&quot;cvat&quot;</span></code> for the
CVAT backend. The supported values are
<code class="code docutils literal notranslate"><span class="pre">fiftyone.annotation_config.backends.keys()</span></code> and the default is
<code class="code docutils literal notranslate"><span class="pre">fiftyone.annotation_config.default_backend</span></code></p></li>
<li><p><strong>media_field</strong> (<em>“filepath”</em>): the sample field containing the path to the
source media to upload</p></li>
<li><p><strong>launch_editor</strong> (<em>False</em>): whether to launch the annotation backend’s
editor after uploading the samples</p></li>
</ul>
<p>The following parameters allow you to configure the labeling schema to use for
your annotation tasks. See <a class="reference internal" href="#cvat-label-schema"><span class="std std-ref">this section</span></a> for more
details:</p>
<ul>
<li><p><strong>label_schema</strong> (<em>None</em>): a dictionary defining the label schema to use.
If this argument is provided, it takes precedence over <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> and
<code class="code docutils literal notranslate"><span class="pre">label_type</span></code></p></li>
<li><p><strong>label_field</strong> (<em>None</em>): a string indicating a new or existing label field
to annotate</p></li>
<li><p><strong>label_type</strong> (<em>None</em>): a string indicating the type of labels to
annotate. The possible label types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;classification&quot;</span></code>: a single classification stored in
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classification" title="fiftyone.core.labels.Classification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classification</span></code></a> fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;classifications&quot;</span></code>: multilabel classifications stored in
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Classifications" title="fiftyone.core.labels.Classifications"><code class="xref py py-class docutils literal notranslate"><span class="pre">Classifications</span></code></a> fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;detections&quot;</span></code>: object detections stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;instances&quot;</span></code>: instance segmentations stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> fields
with their <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detection.mask" title="fiftyone.core.labels.Detection.mask"><code class="xref py py-attr docutils literal notranslate"><span class="pre">mask</span></code></a>
attributes populated</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;polylines&quot;</span></code>: polylines stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polylines" title="fiftyone.core.labels.Polylines"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polylines</span></code></a> fields with their
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.filled" title="fiftyone.core.labels.Polyline.filled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filled</span></code></a> attributes set to
<code class="code docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;polygons&quot;</span></code>: polygons stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polylines" title="fiftyone.core.labels.Polylines"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polylines</span></code></a> fields with their
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Polyline.filled" title="fiftyone.core.labels.Polyline.filled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filled</span></code></a> attributes set to
<code class="code docutils literal notranslate"><span class="pre">True</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;keypoints&quot;</span></code>: keypoints stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Keypoints" title="fiftyone.core.labels.Keypoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keypoints</span></code></a> fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;segmentation&quot;</span></code>: semantic segmentations stored in <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Segmentation" title="fiftyone.core.labels.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a>
fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;scalar&quot;</span></code>: scalar labels stored in <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.IntField" title="fiftyone.core.fields.IntField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntField</span></code></a>, <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.FloatField" title="fiftyone.core.fields.FloatField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatField</span></code></a>,
<a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.StringField" title="fiftyone.core.fields.StringField"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringField</span></code></a>, or <a class="reference internal" href="../api/fiftyone.core.fields.html#fiftyone.core.fields.BooleanField" title="fiftyone.core.fields.BooleanField"><code class="xref py py-class docutils literal notranslate"><span class="pre">BooleanField</span></code></a> fields</p></li>
</ul>
<p>All new label fields must have their type specified via this argument or in
<code class="code docutils literal notranslate"><span class="pre">label_schema</span></code></p>
</li>
<li><p><strong>classes</strong> (<em>None</em>): a list of strings indicating the class options for
<code class="code docutils literal notranslate"><span class="pre">label_field</span></code> or all fields in <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> without classes specified.
All new label fields must have a class list provided via one of the
supported methods. For existing label fields, if classes are not provided
by this argument nor <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code>, the observed labels on your dataset
are used</p></li>
<li><p><strong>attributes</strong> (<em>True</em>): specifies the label attributes of each label field
to include (other than their <code class="code docutils literal notranslate"><span class="pre">label</span></code>, which is always included) in the
annotation export. Can be any of the following:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">True</span></code>: export all label attributes</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">False</span></code>: don’t export any custom label attributes</p></li>
<li><p>a list of label attributes to export</p></li>
<li><p>a dict mapping attribute names to dicts specifying the <code class="code docutils literal notranslate"><span class="pre">type</span></code>,
<code class="code docutils literal notranslate"><span class="pre">values</span></code>, and <code class="code docutils literal notranslate"><span class="pre">default</span></code> for each attribute</p></li>
</ul>
<p>If a <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> is also provided, this parameter determines which
attributes are included for all fields that do not explicitly define their
per-field attributes (in addition to any per-class attributes)</p>
</li>
<li><p><strong>mask_targets</strong> (<em>None</em>): a dict mapping pixel values to semantic label
strings. Only applicable when annotating semantic segmentations</p></li>
<li><p><strong>allow_additions</strong> (<em>True</em>): whether to allow new labels to be added. Only
applicable when editing existing label fields</p></li>
<li><p><strong>allow_deletions</strong> (<em>True</em>): whether to allow labels to be deleted. Only
applicable when editing existing label fields</p></li>
<li><p><strong>allow_label_edits</strong> (<em>True</em>): whether to allow the <code class="code docutils literal notranslate"><span class="pre">label</span></code> attribute of
existing labels to be modified. Only applicable when editing existing
fields with <code class="code docutils literal notranslate"><span class="pre">label</span></code> attributes</p></li>
<li><p><strong>allow_index_edits</strong> (<em>True</em>): whether to allow the <code class="code docutils literal notranslate"><span class="pre">index</span></code> attribute
of existing video tracks to be modified. Only applicable when editing
existing frame fields with <code class="code docutils literal notranslate"><span class="pre">index</span></code> attributes</p></li>
<li><p><strong>allow_spatial_edits</strong> (<em>True</em>): whether to allow edits to the spatial
properties (bounding boxes, vertices, keypoints, masks, etc) of labels.
Only applicable when editing existing spatial label fields</p></li>
</ul>
<p><br />
In addition, the following CVAT-specific parameters from
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATBackendConfig" title="fiftyone.utils.cvat.CVATBackendConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">CVATBackendConfig</span></code></a> can also be
provided:</p>
<ul>
<li><p><strong>task_size</strong> (<em>None</em>): an optional maximum number of images to upload per
task. Videos are always uploaded one per task</p></li>
<li><p><strong>segment_size</strong> (<em>None</em>): the maximum number of images to upload per job.
Not applicable to videos</p></li>
<li><p><strong>image_quality</strong> (<em>75</em>): an int in <code class="code docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">100]</span></code> determining the image
quality to upload to CVAT</p></li>
<li><p><strong>use_cache</strong> (<em>True</em>): whether to use a cache when uploading data. Using a
cache reduces task creation time as data will be processed on-the-fly and
stored in the cache when requested</p></li>
<li><p><strong>use_zip_chunks</strong> (<em>True</em>): when annotating videos, whether to upload
video frames in smaller chunks. Setting this option to <code class="code docutils literal notranslate"><span class="pre">False</span></code> may result
in reduced video quality in CVAT due to size limitations on ZIP files that
can be uploaded to CVAT</p></li>
<li><p><strong>chunk_size</strong> (<em>None</em>): the number of frames to upload per ZIP chunk</p></li>
<li><p><strong>task_assignee</strong> (<em>None</em>): the username to assign the generated tasks.
This argument can be a list of usernames when annotating videos as each
video is uploaded to a separate task</p></li>
<li><p><strong>job_assignees</strong> (<em>None</em>): a list of usernames to assign jobs</p></li>
<li><p><strong>job_reviewers</strong> (<em>None</em>): a list of usernames to assign job reviews. Only
available in CVAT v1 servers</p></li>
<li><p><strong>project_name</strong> (<em>None</em>): an optional project name to which to upload the
created CVAT task. If a project with this name exists, it will be used,
otherwise a new project is created. By default, no project is used</p></li>
<li><p><strong>project_id</strong> (<em>None</em>): an optional ID of an existing CVAT project to
which to upload the annotation tasks. By default, no project is used</p></li>
<li><p><strong>task_name</strong> (None): an optional task name to use for the created CVAT task</p></li>
<li><p><strong>occluded_attr</strong> (<em>None</em>): an optional attribute name containing existing
occluded values and/or in which to store downloaded occluded values for all
objects in the annotation run</p></li>
<li><p><strong>group_id_attr</strong> (<em>None</em>): an optional attribute name containing existing
group ids and/or in which to store downloaded group ids for all objects in
the annotation run</p></li>
<li><p><strong>issue_tracker</strong> (<em>None</em>): URL(s) of an issue tracker to link to the
created task(s). This argument can be a list of URLs when annotating videos
or when using <code class="code docutils literal notranslate"><span class="pre">task_size</span></code> and generating multiple tasks</p></li>
<li><p><strong>organization</strong> (<em>None</em>): the name of the organization to use when sending
requests to CVAT</p></li>
<li><p><strong>frame_start</strong> (<em>None</em>): nonnegative integer(s) defining the first frame
of videos to upload when creating video tasks. Supported values are:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">integer</span></code>: the first frame to upload for each video</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">list</span></code>: a list of first frame integers corresponding to videos in the
given samples</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dict</span></code>: a dictionary mapping sample filepaths to first frame integers
to use for the corresponding videos</p></li>
</ul>
</li>
<li><p><strong>frame_stop</strong> (<em>None</em>): nonnegative integer(s) defining the last frame of
videos to upload when creating video tasks. Supported values are:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">integer</span></code>: the last frame to upload for each video</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">list</span></code>: a list of last frame integers corresponding to videos in the
given samples</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dict</span></code>: a dictionary mapping sample filepaths to last frame integers to
use for the corresponding videos</p></li>
</ul>
</li>
<li><p><strong>frame_step</strong> (<em>None</em>): positive integer(s) defining which frames to
sample when creating video tasks. Supported values are:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">integer</span></code>: the frame step to apply to each video task</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">list</span></code>: a list of frame step integers corresponding to videos in the
given samples</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dict</span></code>: a dictionary mapping sample filepaths to frame step integers to
use for the corresponding videos</p></li>
</ul>
<p>Note that this argument cannot be provided when uploading existing tracks</p>
</li>
</ul>
<div class="section" id="label-schema">
<span id="cvat-label-schema"></span><h3>Label schema<a class="headerlink" href="#label-schema" title="Permalink to this headline">¶</a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code>, <code class="code docutils literal notranslate"><span class="pre">label_field</span></code>, <code class="code docutils literal notranslate"><span class="pre">label_type</span></code>, <code class="code docutils literal notranslate"><span class="pre">classes</span></code>, <code class="code docutils literal notranslate"><span class="pre">attributes</span></code>, and
<code class="code docutils literal notranslate"><span class="pre">mask_targets</span></code> parameters to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> allow
you to define the annotation schema that you wish to be used.</p>
<p>The label schema may define new label field(s) that you wish to populate, and
it may also include existing label field(s), in which case you can add, delete,
or edit the existing labels on your FiftyOne dataset.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> argument is the most flexible way to define how to construct
tasks in CVAT. In its most verbose form, it is a dictionary that defines the
label type, annotation type, possible classes, and possible attributes for each
label field:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_field&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;classifications&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;class1&quot;</span><span class="p">,</span> <span class="s2">&quot;class2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;attr1&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
                <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;val1&quot;</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">],</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;val1&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;attr2&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span>
                <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;existing_field&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;class3&quot;</span><span class="p">,</span> <span class="s2">&quot;class4&quot;</span><span class="p">],</span>
        <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;attr3&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also define class-specific attributes by setting elements of the
<code class="code docutils literal notranslate"><span class="pre">classes</span></code> list to dicts that specify groups of <code class="code docutils literal notranslate"><span class="pre">classes</span></code> and their
corresponding <code class="code docutils literal notranslate"><span class="pre">attributes</span></code>. For example, in the configuration below, <code class="code docutils literal notranslate"><span class="pre">attr1</span></code>
only applies to <code class="code docutils literal notranslate"><span class="pre">class1</span></code> and <code class="code docutils literal notranslate"><span class="pre">class2</span></code> while <code class="code docutils literal notranslate"><span class="pre">attr2</span></code> applies to all classes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_field&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;detections&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;class1&quot;</span><span class="p">,</span> <span class="s2">&quot;class2&quot;</span><span class="p">],</span>
                <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;attr1&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;val1&quot;</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;val1&quot;</span><span class="p">,</span>
                    <span class="p">}</span>
                 <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;class3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;class4&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;attr2&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span>
                <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, if you are only editing or creating a single label field, you
can use the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code>, <code class="code docutils literal notranslate"><span class="pre">label_type</span></code>, <code class="code docutils literal notranslate"><span class="pre">classes</span></code>, <code class="code docutils literal notranslate"><span class="pre">attributes</span></code>, and
<code class="code docutils literal notranslate"><span class="pre">mask_targets</span></code> parameters to specify the components of the label schema
individually:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">label_field</span> <span class="o">=</span> <span class="s2">&quot;new_field&quot;</span><span class="p">,</span>
<span class="n">label_type</span> <span class="o">=</span> <span class="s2">&quot;classifications&quot;</span>
<span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class1&quot;</span><span class="p">,</span> <span class="s2">&quot;class2&quot;</span><span class="p">]</span>

<span class="c1"># These are optional</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;attr1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;val1&quot;</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;val1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;attr2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="n">label_type</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>When you are annotating existing label fields, you can omit some of these
parameters from
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>, as
FiftyOne can infer the appropriate values to use:</p>
<ul class="simple">
<li><p><strong>label_type</strong>: if omitted, the <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> type of the field will be used to
infer the appropriate value for this parameter</p></li>
<li><p><strong>classes</strong>: if omitted for a non-semantic segmentation field, the observed
labels on your dataset will be used to construct a classes list</p></li>
</ul>
</div>
<div class="section" id="label-attributes">
<span id="cvat-label-attributes"></span><h3>Label attributes<a class="headerlink" href="#label-attributes" title="Permalink to this headline">¶</a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">attributes</span></code> parameter allows you to configure whether
<a class="reference internal" href="../user_guide/using_datasets.html#using-labels"><span class="std std-ref">custom attributes</span></a> beyond the default <code class="code docutils literal notranslate"><span class="pre">label</span></code> attribute
are included in the annotation tasks.</p>
<p>When adding new label fields for which you want to include attributes, you must
use the dictionary syntax demonstrated below to define the schema of each
attribute that you wish to label:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;is_truncated&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;male&quot;</span><span class="p">,</span> <span class="s2">&quot;female&quot;</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;caption&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;new_field&quot;</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="s2">&quot;detections&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can always omit this parameter if you do not require attributes beyond the
default <code class="code docutils literal notranslate"><span class="pre">label</span></code>.</p>
<p>For CVAT, the following <code class="code docutils literal notranslate"><span class="pre">type</span></code> values are supported:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">text</span></code>: a free-form text box. In this case, <code class="code docutils literal notranslate"><span class="pre">default</span></code> is optional and
<code class="code docutils literal notranslate"><span class="pre">values</span></code> is unused</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">select</span></code>: a selection dropdown. In this case, <code class="code docutils literal notranslate"><span class="pre">values</span></code> is required and
<code class="code docutils literal notranslate"><span class="pre">default</span></code> is optional</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">radio</span></code>: a radio button list UI. In this case, <code class="code docutils literal notranslate"><span class="pre">values</span></code> is required and
<code class="code docutils literal notranslate"><span class="pre">default</span></code> is optional</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">checkbox</span></code>: a boolean checkbox UI. In this case, <code class="code docutils literal notranslate"><span class="pre">default</span></code> is optional and
<code class="code docutils literal notranslate"><span class="pre">values</span></code> is unused</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">occluded</span></code>: CVAT’s builtin occlusion toggle icon. This widget type can only
be specified for at most one attribute, which must be a boolean</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">group_id</span></code>: CVAT’s grouping capabilities. This attribute type can only
be specified for at most one attribute, which must be an integer</p></li>
</ul>
<p>When you are annotating existing label fields, the <code class="code docutils literal notranslate"><span class="pre">attributes</span></code> parameter can
take additional values:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> (default): export all custom attributes observed on the existing
labels, using their observed values to determine the appropriate UI type
and possible values, if applicable</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">False</span></code>: do not include any custom attributes in the export</p></li>
<li><p>a list of custom attributes to include in the export</p></li>
<li><p>a full dictionary syntax described above</p></li>
</ul>
<p>Note that only scalar-valued label attributes are supported. Other attribute
types like lists, dictionaries, and arrays will be omitted.</p>
</div>
<div class="section" id="restricting-additions-deletions-and-edits">
<span id="cvat-restricting-edits"></span><h3>Restricting additions, deletions, and edits<a class="headerlink" href="#restricting-additions-deletions-and-edits" title="Permalink to this headline">¶</a></h3>
<p>When you create annotation runs that involve editing existing label fields, you
can optionally specify that certain changes are not allowed by passing the
following flags to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>:</p>
<ul class="simple">
<li><p><strong>allow_additions</strong> (<em>True</em>): whether to allow new labels to be added</p></li>
<li><p><strong>allow_deletions</strong> (<em>True</em>): whether to allow labels to be deleted</p></li>
<li><p><strong>allow_label_edits</strong> (<em>True</em>): whether to allow the <code class="code docutils literal notranslate"><span class="pre">label</span></code> attribute to
be modified</p></li>
<li><p><strong>allow_index_edits</strong> (<em>True</em>): whether to allow the <code class="code docutils literal notranslate"><span class="pre">index</span></code> attribute of
video tracks to be modified</p></li>
<li><p><strong>allow_spatial_edits</strong> (<em>True</em>): whether to allow edits to the spatial
properties (bounding boxes, vertices, keypoints, etc) of labels</p></li>
</ul>
<p>If you are using the <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> parameter to provide a full annotation
schema to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>, you
can also directly include the above flags in the configuration dicts for any
existing label field(s) you wish.</p>
<p>For example, suppose you have an existing <code class="code docutils literal notranslate"><span class="pre">ground_truth</span></code> field that contains
objects of various types and you would like to add new <code class="code docutils literal notranslate"><span class="pre">sex</span></code> and <code class="code docutils literal notranslate"><span class="pre">age</span></code>
attributes to all people in this field while also strictly enforcing that no
objects can be added, deleted, or have their labels or bounding boxes modified.
You can configure an annotation run for this as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;male&quot;</span><span class="p">,</span> <span class="s2">&quot;female&quot;</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
    <span class="n">allow_additions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_deletions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_label_edits</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_spatial_edits</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can also include a <code class="code docutils literal notranslate"><span class="pre">read_only=True</span></code> parameter when uploading existing
label attributes to specify that the attribute’s value should be uploaded to
the annotation backend for informational purposes, but any edits to the
attribute’s value should not be imported back into FiftyOne.</p>
<p>For example, if you have vehicles with their <code class="code docutils literal notranslate"><span class="pre">make</span></code> attribute populated and you
want to populate a new <code class="code docutils literal notranslate"><span class="pre">model</span></code> attribute based on this information without
allowing changes to the vehicle’s <code class="code docutils literal notranslate"><span class="pre">make</span></code>, you can configure an annotation run
for this as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;make&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;vehicle&quot;</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that, if you use CVAT projects to organize your annotation tasks, the
above restrictions must be manually re-specified in your call to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> for
each annotation task that you add to an existing project, since CVAT does not
provide support for these settings natively.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The CVAT backend does not support restrictions to additions, deletions,
spatial edits, and read-only attributes in its editing interface.</p>
<p>However, any restrictions that you specify via the above parameters will
still be enforced when you call
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
to merge the annotations back into FiftyOne.</p>
<p><strong>IMPORTANT</strong>: When uploading existing labels to CVAT, the <code class="code docutils literal notranslate"><span class="pre">id</span></code> of the
labels in FiftyOne are stored in a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute of the CVAT shapes.
If a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> is modified in CVAT, then FiftyOne may not be able to merge
the annotation with its existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instance; it must instead delete
the existing label and create a new <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> with the shape’s contents. In
such cases, if <code class="code docutils literal notranslate"><span class="pre">allow_additions</span></code> and/or <code class="code docutils literal notranslate"><span class="pre">allow_deletions</span></code> were set to
<code class="code docutils literal notranslate"><span class="pre">False</span></code> on the annotation schema, this can result in CVAT edits being
rejected. See <a class="reference internal" href="#cvat-limitations"><span class="std std-ref">this section</span></a> for details.</p>
</div>
</div>
<div class="section" id="labeling-videos">
<span id="cvat-labeling-videos"></span><h3>Labeling videos<a class="headerlink" href="#labeling-videos" title="Permalink to this headline">¶</a></h3>
<p>When annotating spatiotemporal objects in videos, you have a few additional
options at your fingertips.</p>
<p>First, each object attribute specification can include a <code class="code docutils literal notranslate"><span class="pre">mutable</span></code> property
that controls whether the attribute’s value can change between frames for each
object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sedan&quot;</span><span class="p">,</span> <span class="s2">&quot;suv&quot;</span><span class="p">,</span> <span class="s2">&quot;truck&quot;</span><span class="p">],</span>
        <span class="s2">&quot;mutable&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;visible_license_plate&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;mutable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;frames.new_field&quot;</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="s2">&quot;detections&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;vehicle&quot;</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The meaning of the <code class="code docutils literal notranslate"><span class="pre">mutable</span></code> attribute is defined as follows:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> (default): the attribute is dynamic and can have a different value
for every frame in which the object track appears</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">False</span></code>: the attribute is static and is the same for every frame in which
the object track appears</p></li>
</ul>
<p>In addition, note that when you
<a class="reference internal" href="#cvat-loading-annotations"><span class="std std-ref">download annotation runs</span></a> that include track
annotations, the downloaded label corresponding to each keyframe of an object
track will have its <code class="code docutils literal notranslate"><span class="pre">keyframe=True</span></code> attribute set to denote that it was a
keyframe.</p>
<p>Similarly, when you create an annotation run on a video dataset that involves
editing existing video tracks, if at least one existing label has its
<code class="code docutils literal notranslate"><span class="pre">keyframe=True</span></code> attribute populated, then the available keyframe information
will be uploaded to CVAT.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#cvat-annotating-videos"><span class="std std-ref">this section</span></a> for video annotation
examples!</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When uploading existing labels to CVAT, the <code class="code docutils literal notranslate"><span class="pre">id</span></code> of the labels in FiftyOne
are stored in a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute of the CVAT shapes.</p>
<p><strong>IMPORTANT</strong>:  If a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> is modified in CVAT, then FiftyOne may not
be able to merge the annotation with its existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instance; in such
cases, it must instead delete the existing label and create a new <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a>
with the shape’s contents. See <a class="reference internal" href="#cvat-limitations"><span class="std std-ref">this section</span></a> for
details.</p>
</div>
</div>
<div class="section" id="cvat-limitations">
<span id="id7"></span><h3>CVAT limitations<a class="headerlink" href="#cvat-limitations" title="Permalink to this headline">¶</a></h3>
<p>When uploading existing labels to CVAT, FiftyOne uses two sources of provenance
to associate <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instances in FiftyOne with their corresponding CVAT
shapes:</p>
<ul class="simple">
<li><p>The <code class="code docutils literal notranslate"><span class="pre">id</span></code> of each <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> is stored in a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute of the CVAT
shape. When importing annotations from CVAT back into FiftyOne, if the
<code class="code docutils literal notranslate"><span class="pre">label_id</span></code> of a shape matches the ID of a label that was included in the
annotation run, the shape will be merged into the existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a></p></li>
<li><p>FiftyOne also maintains a mapping between <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> IDs and the internal
CVAT shape IDs that are created when the CVAT tasks are created. If, during
download, a CVAT shape whose <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> has been deleted or otherwise
modified and doesn’t match an existing label ID <em>but does have</em> a
recognized CVAT ID is encountered, this shape will be merged into the
existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a></p></li>
</ul>
<p>Unfortunately,
<a class="reference external" href="https://github.com/opencv/cvat/issues/893#issuecomment-578020576">CVAT does not guarantee</a>
that its internal IDs are immutable. Thus, if both the <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute and
(unknown to the user) the internal CVAT ID of a shape are both modified,
merging the shape with its source <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> is impossible.</p>
<p>CVAT automatically clears/edits all attributes of a shape, including the
<code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute, in the following cases:</p>
<ul class="simple">
<li><p>When using a label schema with
<a class="reference internal" href="#cvat-label-schema"><span class="std std-ref">per-class attributes</span></a>, all attributes of a shape
are cleared whenever the class label of the shape is changed to a class
whose attribute schema differs from the previous class. The recommended
workaround in this case is to manually copy the <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> before changing
the class and then pasting it back to ensure that the ID doesn’t change.</p></li>
<li><p>When splitting or merging video tracks, CVAT may clear or duplicate the
shape’s attributes during the process. If this results in missing or
duplicate <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> values, then, although FiftyOne will gracefully
proceed with the import, provenance has still been lost and thus existing
<a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instances whose IDs no longer exist must be deleted and replaced
with newly created <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instances.</p></li>
</ul>
<p>The primary issues that can arise due to modified/deleted <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attributes
are:</p>
<ul class="simple">
<li><p>If the original <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> in FiftyOne contained additional attributes that
weren’t included in the CVAT annotation run, then those attributes will be
lost whenever loading annotations requires deleting the existing label and
creating a new one.</p></li>
<li><p>When working with annotation schemas that specify
<a class="reference internal" href="#cvat-restricting-edits"><span class="std std-ref">edit restrictions</span></a>, CVAT edits that cause
<code class="code docutils literal notranslate"><span class="pre">label_id</span></code> changes may need to be rejected. For example, if
<code class="code docutils literal notranslate"><span class="pre">allow_additions</span></code> and <code class="code docutils literal notranslate"><span class="pre">allow_deletions</span></code> are set to <code class="code docutils literal notranslate"><span class="pre">False</span></code> and editing a
CVAT shape’s class label causes its attributes to be cleared, then this
change will be rejected by FiftyOne because it would require both deleting
an existing label and creating a new one.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Pro tip</strong>: If you are editing existing labels and only uploading a subset
of their attributes to CVAT,
<a class="reference internal" href="#cvat-restricting-edits"><span class="std std-ref">restricting label deletions</span></a> by setting
<code class="code docutils literal notranslate"><span class="pre">allow_deletions=False</span></code> provides a helpful guarantee that no labels will be
deleted if label provenance snafus occur in CVAT.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Pro tip</strong>: When working with annotation schemas that include
<a class="reference internal" href="#cvat-label-schema"><span class="std std-ref">per-class attributes</span></a>, be sure that any class
label changes that you would reasonably make all share the same attribute
schemas so that unwanted <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> changes are not caused by CVAT.</p>
<p>If a schema-altering class change must occur, remember to manually copy the
<code class="code docutils literal notranslate"><span class="pre">label_id</span></code> before making the change and then paste it back to ensure that
the ID doesn’t change.</p>
</div>
</div>
</div>
<div class="section" id="loading-annotations">
<span id="cvat-loading-annotations"></span><h2>Loading annotations<a class="headerlink" href="#loading-annotations" title="Permalink to this headline">¶</a></h2>
<p>After your annotations tasks in the annotation backend are complete, you can
use the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
method to download them and merge them back into your FiftyOne dataset.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">anno_key</span></code> parameter is the unique identifier for the annotation run that
you provided when calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>. You
can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.list_annotation_runs" title="fiftyone.core.collections.SampleCollection.list_annotation_runs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_annotation_runs()</span></code></a>
to see the available keys on a dataset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
will not delete any information for the run from the annotation backend.</p>
<p>However, you can pass <code class="code docutils literal notranslate"><span class="pre">cleanup=True</span></code> to delete all information associated
with the run from the backend after the annotations are downloaded.</p>
</div>
<p>You can use the optional <code class="code docutils literal notranslate"><span class="pre">dest_field</span></code> parameter to override the task’s
label schema and instead load annotations into different field name(s) of your
dataset. This can be useful, for example, when editing existing annotations, if
you would like to do a before/after comparison of the edits that you import. If
the annotation run involves multiple fields, <code class="code docutils literal notranslate"><span class="pre">dest_field</span></code> should be a
dictionary mapping label schema field names to destination field names.</p>
<p>Note that CVAT cannot explicitly prevent annotators from creating labels that
don’t obey the run’s label schema. However, you can pass the optional
<code class="code docutils literal notranslate"><span class="pre">unexpected</span></code> parameter to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
to configure how to deal with any such unexpected labels that are found. The
supported values are:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;prompt&quot;</span></code> (<strong>default</strong>): present an interactive prompt to direct/discard
unexpected labels</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;ignore&quot;</span></code>: automatically ignore any unexpected labels</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;keep&quot;</span></code>: automatically keep all unexpected labels in a field whose name
matches the the label type</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;return&quot;</span></code>: return a dict containing all unexpected labels, if any</p></li>
</ul>
<p>See <a class="reference internal" href="#cvat-unexpected-annotations"><span class="std std-ref">this section</span></a> for more details.</p>
</div>
<div class="section" id="managing-annotation-runs">
<span id="cvat-managing-annotation-runs"></span><h2>Managing annotation runs<a class="headerlink" href="#managing-annotation-runs" title="Permalink to this headline">¶</a></h2>
<p>FiftyOne provides a variety of methods that you can use to manage in-progress
or completed annotation runs.</p>
<p>For example, you can call
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.list_annotation_runs" title="fiftyone.core.collections.SampleCollection.list_annotation_runs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_annotation_runs()</span></code></a>
to see the available annotation keys on a dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">list_annotation_runs</span><span class="p">()</span>
</pre></div>
</div>
<p>Or, you can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.get_annotation_info" title="fiftyone.core.collections.SampleCollection.get_annotation_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_annotation_info()</span></code></a>
to retrieve information about the configuration of an annotation run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</pre></div>
</div>
<p>Use <a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotation_results" title="fiftyone.core.collections.SampleCollection.load_annotation_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotation_results()</span></code></a>
to load the <a class="reference internal" href="../api/fiftyone.utils.annotations.html#fiftyone.utils.annotations.AnnotationResults" title="fiftyone.utils.annotations.AnnotationResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnnotationResults</span></code></a>
instance for an annotation run.</p>
<p>All results objects provide a <a class="reference internal" href="../api/fiftyone.utils.annotations.html#fiftyone.utils.annotations.AnnotationResults.cleanup" title="fiftyone.utils.annotations.AnnotationResults.cleanup"><code class="xref py py-class docutils literal notranslate"><span class="pre">cleanup()</span></code></a>
method that you can use to delete all information associated with a run from
the annotation backend.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
<p>In addition, the
<a class="reference internal" href="../api/fiftyone.utils.annotations.html#fiftyone.utils.annotations.AnnotationResults" title="fiftyone.utils.annotations.AnnotationResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnnotationResults</span></code></a>
subclasses for each backend may provide additional utilities such as support
for programmatically monitoring the status of the annotation tasks in the run.</p>
<p>You can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.rename_annotation_run" title="fiftyone.core.collections.SampleCollection.rename_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_annotation_run()</span></code></a>
to rename the annotation key associated with an existing annotation run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">rename_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">new_anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, you can use
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_annotation_run" title="fiftyone.core.collections.SampleCollection.delete_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_annotation_run()</span></code></a>
to delete the record of an annotation run from your FiftyOne dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_annotation_run" title="fiftyone.core.collections.SampleCollection.delete_annotation_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_annotation_run()</span></code></a>
only deletes the <strong>record</strong> of the annotation run from your FiftyOne
dataset; it will not delete any annotations loaded onto your dataset via
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>,
nor will it delete any associated information from the annotation backend.</p>
</div>
</div>
<div class="section" id="examples">
<span id="cvat-examples"></span><h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>This section demonstrates how to perform some common annotation workflows on a
FiftyOne dataset using the CVAT backend.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All of the examples below assume you have configured your CVAT server and
credentials as described in <a class="reference internal" href="#cvat-setup"><span class="std std-ref">this section</span></a>.</p>
</div>
<div class="section" id="adding-new-label-fields">
<span id="cvat-new-label-fields"></span><h3>Adding new label fields<a class="headerlink" href="#adding-new-label-fields" title="Permalink to this headline">¶</a></h3>
<p>In order to annotate a new label field, you can provide the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code>,
<code class="code docutils literal notranslate"><span class="pre">label_type</span></code>, and <code class="code docutils literal notranslate"><span class="pre">classes</span></code> parameters to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> to
define the annotation schema for the field:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_new_field&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;new_classifications&quot;</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="s2">&quot;classifications&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Create annotations in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can use the <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> argument to define the same
labeling task:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_new_field&quot;</span>

<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;new_classifications&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;classifications&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Create annotations in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-tag" class="align-center" src="../_images/cvat_tag.png" />
</div>
<div class="section" id="editing-existing-labels">
<span id="cvat-existing-labels"></span><h3>Editing existing labels<a class="headerlink" href="#editing-existing-labels" title="Permalink to this headline">¶</a></h3>
<p>A common use case is to fix annotation mistakes that you discovered in your
datasets through FiftyOne.</p>
<p>You can easily edit the labels in an existing field of your FiftyOne dataset
by simply passing the name of the field via the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> parameter of
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_existing_field&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Modify/add/delete bounding boxes and their attributes in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-example" class="align-center" src="../_images/cvat_example.png" />
<p><br />
The above code snippet will infer the possible classes and label attributes
from your FiftyOne dataset. However, the <code class="code docutils literal notranslate"><span class="pre">classes</span></code> and <code class="code docutils literal notranslate"><span class="pre">attributes</span></code> parameters
can be used to annotate new classes and/or attributes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_existing_field&quot;</span>

<span class="c1"># The list of possible `label` values</span>
<span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;helicopter&quot;</span><span class="p">]</span>

<span class="c1"># Details for the existing `iscrowd` attribute are automatically inferred</span>
<span class="c1"># A new `attr2` attribute is also added</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;iscrowd&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;attr2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;val1&quot;</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Modify/add/delete bounding boxes and their attributes in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-new-class" class="align-center" src="../_images/cvat_new_class.png" />
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When uploading existing labels to CVAT, the <code class="code docutils literal notranslate"><span class="pre">id</span></code> of the labels in FiftyOne
are stored in a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute of the CVAT shapes.</p>
<p><strong>IMPORTANT</strong>:  If a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> is modified in CVAT, then FiftyOne may not
be able to merge the annotation with its existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instance; in such
cases, it must instead delete the existing label and create a new <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a>
with the shape’s contents. See <a class="reference internal" href="#cvat-limitations"><span class="std std-ref">this section</span></a> for
details.</p>
</div>
</div>
<div class="section" id="restricting-label-edits">
<span id="cvat-restricting-label-edits"></span><h3>Restricting label edits<a class="headerlink" href="#restricting-label-edits" title="Permalink to this headline">¶</a></h3>
<p>You can use the <code class="code docutils literal notranslate"><span class="pre">allow_additions</span></code>, <code class="code docutils literal notranslate"><span class="pre">allow_deletions</span></code>, <code class="code docutils literal notranslate"><span class="pre">allow_label_edits</span></code>,
<code class="code docutils literal notranslate"><span class="pre">allow_index_edits</span></code>, and <code class="code docutils literal notranslate"><span class="pre">allow_spatial_edits</span></code> parameters to configure whether
certain types of edits are allowed in your annotation run. See
<a class="reference internal" href="#cvat-restricting-edits"><span class="std std-ref">this section</span></a> for more information about the
available options.</p>
<p>For example, suppose you have an existing <code class="code docutils literal notranslate"><span class="pre">ground_truth</span></code> field that contains
objects of various types and you would like to add new <code class="code docutils literal notranslate"><span class="pre">sex</span></code> and <code class="code docutils literal notranslate"><span class="pre">age</span></code>
attributes to all people in this field while also strictly enforcing that no
objects can be added, deleted, or have their labels or bounding boxes modified.
You can configure an annotation run for this as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">from</span> <span class="nn">fiftyone</span> <span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>

<span class="c1"># Grab a sample that contains a person</span>
<span class="n">view</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">dataset</span>
    <span class="o">.</span><span class="n">match_labels</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_edit_restrictions&quot;</span>

<span class="c1"># The new attributes that we want to populate</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;male&quot;</span><span class="p">,</span> <span class="s2">&quot;female&quot;</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
    <span class="n">allow_additions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_deletions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_label_edits</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_spatial_edits</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Populate attributes in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly, you can include a <code class="code docutils literal notranslate"><span class="pre">read_only=True</span></code> parameter when uploading existing
label attributes to specify that the attribute’s value should be uploaded to
the annotation backend for informational purposes, but any edits to the
attribute’s value should not be imported back into FiftyOne.</p>
<p>For example, the snippet below uploads the vehicle tracks in a video dataset
along with their existing <code class="code docutils literal notranslate"><span class="pre">type</span></code> attributes and requests that a new <code class="code docutils literal notranslate"><span class="pre">make</span></code>
attribute be populated without allowing edits to the vehicle’s <code class="code docutils literal notranslate"><span class="pre">type</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_read_only_attrs&quot;</span>

<span class="c1"># Upload existing `type` attribute as read-only and add new `make` attribute</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;make&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mutable&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;frames.detections&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;vehicle&quot;</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Populate make attributes in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The CVAT backend does not support restrictions to additions, deletions,
spatial edits, and read-only attributes in its editing interface.</p>
<p>However, any restrictions that you specify via the above parameters will
still be enforced when you call
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
to merge the annotations back into FiftyOne.</p>
<p><strong>IMPORTANT</strong>: When uploading existing labels to CVAT, the <code class="code docutils literal notranslate"><span class="pre">id</span></code> of the
labels in FiftyOne are stored in a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute of the CVAT shapes.
If a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> is modified in CVAT, then FiftyOne may not be able to merge
the annotation with its existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instance; it must instead delete
the existing label and create a new <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> with the shape’s contents. In
such cases, if <code class="code docutils literal notranslate"><span class="pre">allow_additions</span></code> and/or <code class="code docutils literal notranslate"><span class="pre">allow_deletions</span></code> were set to
<code class="code docutils literal notranslate"><span class="pre">False</span></code> on the annotation schema, this can result in CVAT edits being
rejected. See <a class="reference internal" href="#cvat-limitations"><span class="std std-ref">this section</span></a> for details.</p>
</div>
</div>
<div class="section" id="annotating-multiple-fields">
<span id="cvat-multiple-fields"></span><h3>Annotating multiple fields<a class="headerlink" href="#annotating-multiple-fields" title="Permalink to this headline">¶</a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> argument allows you to define an annotation task that
involves multiple fields:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_multiple_fields&quot;</span>

<span class="c1"># The details for existing `ground_truth` field are inferred</span>
<span class="c1"># A new field `new_keypoints` is also added</span>
<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;new_keypoints&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;keypoints&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;food&quot;</span><span class="p">],</span>
        <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;is_truncated&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
                <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Add annotations in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CVAT annotation schemas do not have a notion of label fields. Therefore,
if you define an annotation schema that involves the same class label in
multiple fields, the name of the label field will be appended to the class
in CVAT in order to distinguish the class labels.</p>
</div>
<img alt="cvat-multiple-fields" class="align-center" src="../_images/cvat_multiple_fields.png" />
</div>
<div class="section" id="unexpected-annotations">
<span id="cvat-unexpected-annotations"></span><h3>Unexpected annotations<a class="headerlink" href="#unexpected-annotations" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
method allows you to define the annotation schema that should be followed in
CVAT. However, CVAT does not explicitly allow for restricting the label types
that can be created, so it is possible that your annotators may accidentally
violate a task’s intended schema.</p>
<p>You can pass the optional <code class="code docutils literal notranslate"><span class="pre">unexpected</span></code> parameter to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
to configure how to deal with any such unexpected labels that are found. The
supported values are:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;prompt&quot;</span></code> (<strong>default</strong>): present an interactive prompt to direct/discard
unexpected labels</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;keep&quot;</span></code>: automatically keep all unexpected labels in a field whose name
matches the the label type</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;ignore&quot;</span></code>: automatically ignore any unexpected labels</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;return&quot;</span></code>: return a dict containing all unexpected labels, if any</p></li>
</ul>
<p>For example, suppose you upload a <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Detections" title="fiftyone.core.labels.Detections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Detections</span></code></a> field to CVAT for editing, but
then polyline annotations are added instead. When
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>
is called, the default behavior is to present a command prompt asking you what
field(s) (if any) to store these unexpected labels in:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_unexpected&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Add some polyline annotations in CVAT (wrong type!)</span>

<span class="c1"># You will be prompted for a field in which to store the polylines</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-polyline" class="align-center" src="../_images/cvat_polyline.png" />
</div>
<div class="section" id="creating-projects">
<span id="cvat-creating-projects"></span><h3>Creating projects<a class="headerlink" href="#creating-projects" title="Permalink to this headline">¶</a></h3>
<p>You can use the optional <code class="code docutils literal notranslate"><span class="pre">project_name</span></code> parameter to specify the name of a
CVAT project to which to upload the task(s) for an annotation run. If a project
with the given name already exists, the task will be uploaded to the existing
project and will automatically inherit its annotation schema. Otherwise, a new
project with the schema you define will be created.</p>
<p>A typical use case for this parameter is video annotation, since in CVAT every
video must be annotated in a separate task. Creating a project allows all of
the tasks to be organized together in one place.</p>
<p>As with tasks, you can delete the project associated with an annotation run by
passing the <code class="code docutils literal notranslate"><span class="pre">cleanup=True</span></code> option to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_create_project&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;frames.detections&quot;</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;fiftyone_project_example&quot;</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Annotate videos in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="uploading-to-existing-projects">
<span id="cvat-existing-projects"></span><h3>Uploading to existing projects<a class="headerlink" href="#uploading-to-existing-projects" title="Permalink to this headline">¶</a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">project_name</span></code> and <code class="code docutils literal notranslate"><span class="pre">project_id</span></code> parameters can both be used to specify an
existing CVAT project to which to upload the task(s) for an annotation run.
In this case, the schema of the project is automatically applied to your
annotation tasks.</p>
<p>A typical use case for this workflow is when you use the same annotation schema
for multiple datasets, since this allows you to organize the tasks under one
CVAT project and avoid the need to re-specify the label schema in FiftyOne.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When uploading to existing projects, because the annotation schema is
inherited from the CVAT project definition, any class/attribute
specifications that you attempt to provide via arguments such as
<code class="code docutils literal notranslate"><span class="pre">label_schema</span></code>, <code class="code docutils literal notranslate"><span class="pre">classes</span></code>, and <code class="code docutils literal notranslate"><span class="pre">attributes</span></code> to
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
will be ignored.</p>
<p>You can, however, use the <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> and <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> arguments for
the limited purpose of specifying the name of existing label field(s) to
upload or the name and type of new field(s) in which you want to store the
annotations that will be created. If no label fields are provided, then you
will receive command line prompt(s) at import time to provide label
field(s) in which to store the annotations.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since the <code class="code docutils literal notranslate"><span class="pre">label_schema</span></code> and <code class="code docutils literal notranslate"><span class="pre">attribute</span></code> arguments are ignored, any occluded or
group id attributes defined there will also be ignored. In order to connect
occluded or group id attributes, use the <code class="code docutils literal notranslate"><span class="pre">occluded_attr</span></code> and
<code class="code docutils literal notranslate"><span class="pre">group_id_attr</span></code> arguments directly.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">project_name</span> <span class="o">=</span> <span class="s2">&quot;fiftyone_project_example&quot;</span>

<span class="c1">#</span>
<span class="c1"># Upload existing `ground_truth` labels to a new CVAT project</span>
<span class="c1"># The label schema is automatically inferred from the existing labels</span>
<span class="c1">#</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="s2">&quot;create_project&quot;</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># Now upload the `predictions` labels to the same CVAT project</span>
<span class="c1"># Here the label schema of the existing CVAT project is automatically used</span>
<span class="c1">#</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_existing_project&quot;</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Annotate in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># Now add a task with unspecified label fields to the same CVAT project</span>
<span class="c1"># In this case you will be prompted for field names at download time</span>
<span class="c1">#</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_new_fields&quot;</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Annotate in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="assigning-users">
<span id="cvat-assigning-users"></span><h3>Assigning users<a class="headerlink" href="#assigning-users" title="Permalink to this headline">¶</a></h3>
<p>When using the CVAT backend, you can provide the following optional parameters
to <a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> to
specify which users will be assigned to the created tasks:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">segment_size</span></code>: the maximum number of images to include in a single job</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">task_assignee</span></code>: a username to assign the generated tasks. This argument
can be a list of usernames when annotating videos as each
video is uploaded to a separate task</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">job_assignees</span></code>: a list of usernames to assign jobs</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">job_reviewers</span></code>: a list of usernames to assign job reviews. Only available
in CVAT v1 servers</p></li>
</ul>
<p>If the number of jobs exceeds the number of assignees or reviewers, the jobs
will be assigned using a round-robin strategy.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_assign_users&quot;</span>

<span class="n">task_assignee</span> <span class="o">=</span> <span class="s2">&quot;username1&quot;</span>
<span class="n">job_assignees</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;username2&quot;</span><span class="p">,</span> <span class="s2">&quot;username3&quot;</span><span class="p">]</span>

<span class="c1"># If using a CVAT v1 server</span>
<span class="c1"># job_reviewers = [&quot;username4&quot;, &quot;username5&quot;, &quot;username6&quot;, &quot;username7&quot;]</span>

<span class="c1"># Load &quot;ground_truth&quot; field into one task</span>
<span class="c1"># Create another task for &quot;keypoints&quot; field</span>
<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;keypoints&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;keypoints&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;person&quot;</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span>
    <span class="n">segment_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">task_assignee</span><span class="o">=</span><span class="n">task_assignee</span><span class="p">,</span>
    <span class="n">job_assignees</span><span class="o">=</span><span class="n">job_assignees</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Cleanup</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="large-annotation-runs">
<span id="cvat-large-runs"></span><h3>Large annotation runs<a class="headerlink" href="#large-annotation-runs" title="Permalink to this headline">¶</a></h3>
<p>The CVAT API imposes a limit on the size of all requests. By default, all
images are uploaded to a single CVAT task, which can result in errors when
uploading annotation runs for large sample collections.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The CVAT maintainers made
<a class="reference external" href="https://github.com/opencv/cvat/pull/3692">an update</a>
to resolve this issue natively, but if you still encounter issues, try
the following workflow to circumvent the issue.</p>
</div>
<p>You can use the <code class="code docutils literal notranslate"><span class="pre">task_size</span></code> parameter to break image annotation runs into
multiple CVAT tasks, each with a specified maximum number of images. Note that
we recommend providing a <code class="code docutils literal notranslate"><span class="pre">project_name</span></code> whenever you use the <code class="code docutils literal notranslate"><span class="pre">task_size</span></code>
parameter so that the created tasks will be grouped together.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">task_size</span></code> parameter can also be used in conjunction with the
<code class="code docutils literal notranslate"><span class="pre">segment_size</span></code> parameter to configure both the number of images per task as
well as the number of images per job within each task.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">,</span> <span class="n">max_samples</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;batch_upload&quot;</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">task_size</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>  <span class="c1"># 6 images per task</span>
    <span class="n">segment_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  <span class="c1"># 2 images per job</span>
    <span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;batch_example&quot;</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Annotate in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">task_size</span></code> parameter only applies to image datasets, since videos are
always uploaded one per task.</p>
</div>
</div>
<div class="section" id="scalar-labels">
<span id="cvat-scalar-labels"></span><h3>Scalar labels<a class="headerlink" href="#scalar-labels" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> fields are the preferred way to store information for common tasks
such as classification and detection in your FiftyOne datasets. However, you
can also store CVAT annotations in scalar fields of type <code class="code docutils literal notranslate"><span class="pre">float</span></code>, <code class="code docutils literal notranslate"><span class="pre">int</span></code>, <code class="code docutils literal notranslate"><span class="pre">str</span></code>,
or  <code class="code docutils literal notranslate"><span class="pre">bool</span></code> .</p>
<p>When storing annotations in scalar fields, the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> parameter is still
used to define the name of the field, but the <code class="code docutils literal notranslate"><span class="pre">classes</span></code> argument is now
optional and the <code class="code docutils literal notranslate"><span class="pre">attributes</span></code> argument is unused.</p>
<p>If <code class="code docutils literal notranslate"><span class="pre">classes</span></code> are provided, you will be able to select from these values in
CVAT; otherwise, the CVAT tag will show the <code class="code docutils literal notranslate"><span class="pre">label_field</span></code> name and you must
enter the appropriate scalar in the <code class="code docutils literal notranslate"><span class="pre">value</span></code> attribute of the tag.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_scalar_fields&quot;</span>

<span class="c1"># Create two scalar fields, one with classes and one without</span>
<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;scalar1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;scalar&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;scalar2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;scalar&quot;</span><span class="p">,</span>
        <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;class1&quot;</span><span class="p">,</span> <span class="s2">&quot;class2&quot;</span><span class="p">,</span> <span class="s2">&quot;class3&quot;</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Cleanup (without downloading results)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-scalar" class="align-center" src="../_images/cvat_scalar.png" />
</div>
<div class="section" id="uploading-alternate-media">
<span id="cvat-alternate-media"></span><h3>Uploading alternate media<a class="headerlink" href="#uploading-alternate-media" title="Permalink to this headline">¶</a></h3>
<p>In some cases, you may want to upload media files other than those stored in
the <code class="code docutils literal notranslate"><span class="pre">filepath</span></code> field of your dataset’s samples for annotation. For example,
you may have a dataset with personal information like faces or license plates
that must be anonymized before uploading for annotation.</p>
<p>The recommended approach in this case is to store the alternative media files
for each sample on disk and record these paths in a new field of your FiftyOne
dataset. You can then specify this field via the <code class="code docutils literal notranslate"><span class="pre">media_field</span></code> parameter of
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>.</p>
<p>For example, let’s upload some blurred images to CVAT for annotation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">alt_dir</span> <span class="o">=</span> <span class="s2">&quot;/tmp/blurred&quot;</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">alt_dir</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">alt_dir</span><span class="p">)</span>

<span class="c1"># Blur images</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">view</span><span class="p">:</span>
    <span class="n">filepath</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">filepath</span>
    <span class="n">alt_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">alt_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filepath</span><span class="p">))</span>

    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">alt_filepath</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">blur</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)))</span>

    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;alt_filepath&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">alt_filepath</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_alt_media&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">media_field</span><span class="o">=</span><span class="s2">&quot;alt_filepath&quot;</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Create annotations in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-alt-media" class="align-center" src="../_images/cvat_alt_media.png" />
</div>
<div class="section" id="using-cvat-s-occlusion-widget">
<span id="cvat-occlusion-widget"></span><h3>Using CVAT’s occlusion widget<a class="headerlink" href="#using-cvat-s-occlusion-widget" title="Permalink to this headline">¶</a></h3>
<p>The CVAT UI provides a variety of builtin widgets on each label you create that
control properties like occluded, hidden, locked, and pinned.</p>
<p>You can configure CVAT annotation runs so that the state of the occlusion
widget is read/written to a FiftyOne label attribute of your choice by
specifying the attribute’s type as <code class="code docutils literal notranslate"><span class="pre">occluded</span></code> in your label schema.</p>
<p>In addition, if you are editing existing labels using the <code class="code docutils literal notranslate"><span class="pre">attributes=True</span></code>
syntax (the default) to infer the label schema for an existing field, if a
boolean attribute with the name <code class="code docutils literal notranslate"><span class="pre">&quot;occluded&quot;</span></code> is found, it will automatically be
linked to the occlusion widget.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can only specify the <code class="code docutils literal notranslate"><span class="pre">occluded</span></code> type for at most one attribute of each
label field/class in your label schema, and, if you are editing existing
labels, the attribute that you choose must contain boolean values.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_occluded_widget&quot;</span>

<span class="c1"># Populate a new `occluded` attribute on the existing `ground_truth` labels</span>
<span class="c1"># using CVAT&#39;s occluded widget</span>
<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;occluded&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;occluded&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Mark occlusions in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use the <code class="code docutils literal notranslate"><span class="pre">occluded_attr</span></code> parameter to sync the state of CVAT’s
occlusion widget with a specified attribute of all spatial fields that are being
annotated that did not explicitly have an occluded attribute defined in the
label schema.</p>
<p>This parameter is especially useful when working with existing CVAT projects,
since CVAT project schemas are not able to retain information about occluded
attributes between annotation runs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_occluded_widget_project&quot;</span>
<span class="n">project_name</span> <span class="o">=</span> <span class="s2">&quot;example_occluded_widget&quot;</span>
<span class="n">label_field</span> <span class="o">=</span> <span class="s2">&quot;ground_truth&quot;</span>

<span class="c1"># Create project</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&quot;new_proj&quot;</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span> <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">)</span>

<span class="c1"># Upload to existing project</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span>
    <span class="n">occluded_attr</span><span class="o">=</span><span class="s2">&quot;is_occluded&quot;</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Mark occlusions in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-occ-widget" class="align-center" src="../_images/cvat_occ_widget.png" />
</div>
<div class="section" id="using-cvat-groups">
<span id="cvat-group-id"></span><h3>Using CVAT groups<a class="headerlink" href="#using-cvat-groups" title="Permalink to this headline">¶</a></h3>
<p>The CVAT UI provides a way to group objects together both visually and though
a group id in the API.</p>
<p>You can configure CVAT annotation runs so that the state of the group id is
read/written to a FiftyOne label attribute of your choice by
specifying the attribute’s type as <code class="code docutils literal notranslate"><span class="pre">group_id</span></code> in your label schema.</p>
<p>In addition, if you are editing existing labels using the <code class="code docutils literal notranslate"><span class="pre">attributes=True</span></code>
syntax (the default) to infer the label schema for an existing field, if a
boolean attribute with the name <code class="code docutils literal notranslate"><span class="pre">&quot;group_id&quot;</span></code> is found, it will automatically be
linked to CVAT groups.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can only specify the <code class="code docutils literal notranslate"><span class="pre">group_id</span></code> type for at most one attribute of each
label field/class in your label schema, and, if you are editing existing
labels, the attribute that you choose must contain integer values.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_group_id&quot;</span>

<span class="c1"># Populate a new `group_id` attribute on the existing `ground_truth` labels</span>
<span class="n">label_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;group_id&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;group_id&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_schema</span><span class="o">=</span><span class="n">label_schema</span><span class="p">,</span> <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Mark groups in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use the <code class="code docutils literal notranslate"><span class="pre">group_id_attr</span></code> parameter to sync the state of CVAT’s
group ids with a specified attribute of all spatial fields that are being
annotated that did not explicitly have a group id attribute defined in the
label schema.</p>
<p>This parameter is especially useful when working with existing CVAT projects,
since CVAT project schemas are not able to retain information about group id
attributes between annotation runs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_group_id_project&quot;</span>
<span class="n">project_name</span> <span class="o">=</span> <span class="s2">&quot;example_group_id&quot;</span>
<span class="n">label_field</span> <span class="o">=</span> <span class="s2">&quot;ground_truth&quot;</span>

<span class="c1"># Create project</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&quot;new_proj&quot;</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span> <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">)</span>

<span class="c1"># Upload to existing project</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span>
    <span class="n">group_id_attr</span><span class="o">=</span><span class="s2">&quot;group_id_value&quot;</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Mark groups in CVAT...</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-destination-field">
<span id="cvat-destination-field"></span><h3>Changing destination field<a class="headerlink" href="#changing-destination-field" title="Permalink to this headline">¶</a></h3>
<p>When annotating an existing label field, it can be useful to load the
annotations into a different field than the one used to upload annotations. The
<code class="code docutils literal notranslate"><span class="pre">dest_field</span></code> parameter can be used for this purpose when calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_annotations" title="fiftyone.core.collections.SampleCollection.load_annotations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_annotations()</span></code></a>.</p>
<p>If your annotation run involves a single label field, set <code class="code docutils literal notranslate"><span class="pre">dest_field</span></code>
to the name of the (new or existing) field you wish to load annotations into.</p>
<p>If your annotation run involves multiple fields, <code class="code docutils literal notranslate"><span class="pre">dest_field</span></code> should be
a dictionary mapping existing field names in your run’s label schema to updated
destination fields.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;dest_field&quot;</span>
<span class="n">label_field</span> <span class="o">=</span> <span class="s2">&quot;ground_truth&quot;</span>

<span class="c1"># Upload from `ground_truth` field</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Load into `test_field`</span>
<span class="n">dest_field</span> <span class="o">=</span> <span class="s2">&quot;test_field&quot;</span>

<span class="c1"># If your run involves multiple fields, use this syntax instead</span>
<span class="c1"># dest_field = {&quot;ground_truth&quot;: &quot;test_field&quot;, ...}</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">dest_field</span><span class="o">=</span><span class="n">dest_field</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-frame-start-stop-step">
<span id="cvat-frame-args"></span><h3>Using frame start, stop, step<a class="headerlink" href="#using-frame-start-stop-step" title="Permalink to this headline">¶</a></h3>
<p>When annotating videos, you can use the arguments <code class="code docutils literal notranslate"><span class="pre">frame_start</span></code>, <code class="code docutils literal notranslate"><span class="pre">frame_stop</span></code>,
and <code class="code docutils literal notranslate"><span class="pre">frame_step</span></code> to annotate subsampled clips of your videos rather than
loading every frame into CVAT. These arguments are only supported for video
tasks and accept either integer values to use for each video task that is
created, a list of values that will be applied to video tasks in a round-robin
strategy, or a dictionary of values mapping the video filepath to the
corresponding integer value.</p>
<p>Note: Uploading existing annotation tracks while using the <code class="code docutils literal notranslate"><span class="pre">frame_step</span></code>
argument is not currently supported.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">,</span> <span class="n">max_samples</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">sample_fps</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">)</span>

<span class="c1"># Start video 1 at frame 10 and video 2 at frame 5</span>
<span class="n">frame_start</span> <span class="o">=</span> <span class="p">{</span><span class="n">sample_fps</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">sample_fps</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="mi">5</span><span class="p">}</span>

<span class="c1"># For video 1, load every frame after the start</span>
<span class="c1"># For video 2, load every 10th frame</span>
<span class="n">frame_step</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="c1"># Stop all videos at frame 100</span>
<span class="n">frame_stop</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;frame_args&quot;</span>
<span class="n">label_field</span> <span class="o">=</span> <span class="s2">&quot;frames.new_detections&quot;</span>
<span class="n">label_type</span> <span class="o">=</span> <span class="s2">&quot;detections&quot;</span>
<span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="s2">&quot;vehicle&quot;</span><span class="p">]</span>

<span class="c1"># Annotate a new detections field</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="n">label_type</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">,</span>
    <span class="n">frame_start</span><span class="o">=</span><span class="n">frame_start</span><span class="p">,</span>
    <span class="n">frame_stop</span><span class="o">=</span><span class="n">frame_stop</span><span class="p">,</span>
    <span class="n">frame_step</span><span class="o">=</span><span class="n">frame_step</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Annotate in CVAT</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="annotating-videos">
<span id="cvat-annotating-videos"></span><h2>Annotating videos<a class="headerlink" href="#annotating-videos" title="Permalink to this headline">¶</a></h2>
<p>You can add or edit annotations for video datasets using the CVAT backend
through the
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
method.</p>
<p>All CVAT label types except <code class="code docutils literal notranslate"><span class="pre">tags</span></code> provide an option to annotate <strong>tracks</strong> in
videos, which captures the identity of a single object as it moves through the
video. When you import video tracks into FiftyOne, the <code class="code docutils literal notranslate"><span class="pre">index</span></code> attribute of
each label will contain the integer number of its track, and any labels that
are keyframes will have their <code class="code docutils literal notranslate"><span class="pre">keyframe=True</span></code> attribute set.</p>
<p>Note that CVAT does not provide a straightforward way to annotate sample-level
classification labels for videos. Instead, we recommend that you use
frame-level fields to record classifications for your video datasets.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CVAT only allows one video per task, so calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>
on a video dataset will result multiple tasks per label field.</p>
</div>
<div class="section" id="adding-new-frame-labels">
<h3>Adding new frame labels<a class="headerlink" href="#adding-new-frame-labels" title="Permalink to this headline">¶</a></h3>
<p>The example below demonstrates how to configure a video annotation task that
populates a new frame-level field of a video dataset with vehicle detection
tracks with an immutable <code class="code docutils literal notranslate"><span class="pre">type</span></code> attribute that denotes the type of each
vehicle:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prepend <code class="code docutils literal notranslate"><span class="pre">&quot;frames.&quot;</span></code> to reference frame-level fields when calling
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a>.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_frame_field</span><span class="p">(</span><span class="s2">&quot;detections&quot;</span><span class="p">)</span>  <span class="c1"># delete existing labels</span>

<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span>

<span class="c1"># Create annotation task</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;frames.detections&quot;</span><span class="p">,</span>
    <span class="n">label_type</span><span class="o">=</span><span class="s2">&quot;detections&quot;</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;vehicle&quot;</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
            <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sedan&quot;</span><span class="p">,</span> <span class="s2">&quot;suv&quot;</span><span class="p">,</span> <span class="s2">&quot;truck&quot;</span><span class="p">,</span> <span class="s2">&quot;other&quot;</span><span class="p">],</span>
            <span class="s2">&quot;mutable&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Add annotations in CVAT...</span>

<span class="c1"># Download annotations</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>

<span class="c1"># Load the view that was annotated in the App</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_view</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

<span class="c1"># Cleanup</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<img alt="cvat-video" class="align-center" src="../_images/cvat_video.png" />
</div>
<div class="section" id="editing-frame-level-label-tracks">
<h3>Editing frame-level label tracks<a class="headerlink" href="#editing-frame-level-label-tracks" title="Permalink to this headline">¶</a></h3>
<p>You can also edit existing frame-level labels of video datasets in CVAT.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If at least one existing label has its <code class="code docutils literal notranslate"><span class="pre">keyframe=True</span></code> attribute set, only
the keyframe labels will be uploaded to CVAT, which provides a better
editing experience when performing spatial or time-varying attribute edits.</p>
<p>If no keyframe information is available, every existing label must be
marked as a keyframe in CVAT.</p>
</div>
<p>The example below edits the existing detections of a video dataset. Note that,
since the dataset’s labels do not have keyframe markings, we artificially tag
every 10th frame as a keyframe to provide a better editing experience in CVAT:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart-video&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Mark some keyframes</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">num_frames</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">frames</span><span class="p">)</span>
<span class="n">keyframes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_frames</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span><span class="o">.</span><span class="n">union</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_frames</span><span class="p">})</span>
<span class="k">for</span> <span class="n">frame_number</span> <span class="ow">in</span> <span class="n">keyframes</span><span class="p">:</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">frame_number</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">det</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">detections</span><span class="o">.</span><span class="n">detections</span><span class="p">:</span>
        <span class="n">det</span><span class="o">.</span><span class="n">keyframe</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_video&quot;</span>

<span class="c1"># Send frame-level detections to CVAT</span>
<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;frames.detections&quot;</span><span class="p">,</span>
    <span class="n">launch_editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_annotation_info</span><span class="p">(</span><span class="n">anno_key</span><span class="p">))</span>

<span class="c1"># Edit annotations in CVAT...</span>

<span class="c1"># Merge edits back in</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">load_annotations</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>

<span class="c1"># Load the view that was annotated in the App</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_view</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

<span class="c1"># Cleanup</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When uploading existing labels to CVAT, the <code class="code docutils literal notranslate"><span class="pre">id</span></code> of the labels in FiftyOne
are stored in a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> attribute of the CVAT shapes.</p>
<p><strong>IMPORTANT</strong>:  If a <code class="code docutils literal notranslate"><span class="pre">label_id</span></code> is modified in CVAT, then FiftyOne may not
be able to merge the annotation with its existing <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> instance; in such
cases, it must instead delete the existing label and create a new <a class="reference internal" href="../api/fiftyone.core.labels.html#fiftyone.core.labels.Label" title="fiftyone.core.labels.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a>
with the shape’s contents. See <a class="reference internal" href="#cvat-limitations"><span class="std std-ref">this section</span></a> for
details.</p>
</div>
</div>
</div>
<div class="section" id="importing-existing-tasks">
<span id="cvat-existing-tasks"></span><h2>Importing existing tasks<a class="headerlink" href="#importing-existing-tasks" title="Permalink to this headline">¶</a></h2>
<p>FiftyOne’s CVAT integration is designed to manage the full annotation workflow,
from task creation to annotation import.</p>
<p>However, if you have created CVAT tasks outside of FiftyOne, you can use the
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.import_annotations" title="fiftyone.utils.cvat.import_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">import_annotations()</span></code></a> utility
to import individual task(s) or an entire project into a FiftyOne dataset.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.utils.cvat</span> <span class="k">as</span> <span class="nn">fouc</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">,</span> <span class="n">max_samples</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="c1"># Create a pre-existing CVAT project</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="s2">&quot;example_import&quot;</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;example_import&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># In the simplest case, you can download both the annotations and the media</span>
<span class="c1"># from CVAT</span>
<span class="c1">#</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">fouc</span><span class="o">.</span><span class="n">import_annotations</span><span class="p">(</span>
    <span class="n">dataset</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">,</span>
    <span class="n">data_path</span><span class="o">=</span><span class="s2">&quot;/tmp/cvat_import&quot;</span><span class="p">,</span>
    <span class="n">download_media</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># If you already have the media stored locally, you can instead provide a</span>
<span class="c1"># mapping between filenames in the pre-existing CVAT project and the</span>
<span class="c1"># locations of the media locally on disk for the FiftyOne dataset</span>
<span class="c1">#</span>
<span class="c1"># Since we&#39;re using a CVAT task uploaded via FiftyOne, the mapping is a bit</span>
<span class="c1"># weird</span>
<span class="c1">#</span>

<span class="n">data_map</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;</span><span class="si">%06d</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span> <span class="n">p</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">))</span>
<span class="p">}</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">fouc</span><span class="o">.</span><span class="n">import_annotations</span><span class="p">(</span>
    <span class="n">dataset</span><span class="p">,</span>
    <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">,</span>
    <span class="n">data_path</span><span class="o">=</span><span class="n">data_map</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Another strategy for importing existing CVAT annotations into FiftyOne is
to simply export the annotations from the CVAT UI and then import them via
the <a class="reference internal" href="../user_guide/dataset_creation/datasets.html#cvatimagedataset-import"><span class="std std-ref">CVATImageDataset</span></a> or
<a class="reference internal" href="../user_guide/dataset_creation/datasets.html#cvatvideodataset-import"><span class="std std-ref">CVATVideoDataset</span></a> types.</p>
</div>
</div>
<div class="section" id="additional-utilities">
<span id="cvat-utils"></span><h2>Additional utilities<a class="headerlink" href="#additional-utilities" title="Permalink to this headline">¶</a></h2>
<p>You can perform additional CVAT-specific operations to monitor the progress
of an annotation task initiated by
<a class="reference internal" href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.annotate" title="fiftyone.core.collections.SampleCollection.annotate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">annotate()</span></code></a> via
the returned
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATAnnotationResults" title="fiftyone.utils.cvat.CVATAnnotationResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">CVATAnnotationResults</span></code></a>
instance.</p>
<p>The sections below highlight some common actions that you may want to perform.</p>
<div class="section" id="using-the-cvat-api">
<h3>Using the CVAT API<a class="headerlink" href="#using-the-cvat-api" title="Permalink to this headline">¶</a></h3>
<p>You can use the
<a class="reference internal" href="../api/fiftyone.utils.annotations.html#fiftyone.utils.annotations.connect_to_api" title="fiftyone.utils.annotations.connect_to_api"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect_to_api()</span></code></a>
to retrieve a
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATAnnotationAPI" title="fiftyone.utils.cvat.CVATAnnotationAPI"><code class="xref py py-class docutils literal notranslate"><span class="pre">CVATAnnotationAPI</span></code></a> instance,
which is a wrapper around the
<a class="reference external" href="https://opencv.github.io/cvat/docs/administration/basics/rest_api_guide/">CVAT REST API</a>
that provides convenient methods for performing common actions on your CVAT
tasks:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>
<span class="kn">import</span> <span class="nn">fiftyone.utils.annotations</span> <span class="k">as</span> <span class="nn">foua</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_api&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">foua</span><span class="o">.</span><span class="n">connect_to_api</span><span class="p">()</span>

<span class="c1"># The context manager is optional and simply ensures that TCP connections</span>
<span class="c1"># are always closed</span>
<span class="k">with</span> <span class="n">api</span><span class="p">:</span>
    <span class="c1"># Launch CVAT in your browser</span>
    <span class="n">api</span><span class="o">.</span><span class="n">launch_editor</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">base_url</span><span class="p">)</span>

    <span class="c1"># Get info about all tasks currently on the CVAT server</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">tasks_url</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="viewing-task-statuses">
<h3>Viewing task statuses<a class="headerlink" href="#viewing-task-statuses" title="Permalink to this headline">¶</a></h3>
<p>You can use the
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATAnnotationResults.get_status" title="fiftyone.utils.cvat.CVATAnnotationResults.get_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_status()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATAnnotationResults.print_status" title="fiftyone.utils.cvat.CVATAnnotationResults.print_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">print_status()</span></code></a>
methods to get information about the current status of the task(s) and job(s)
for that annotation run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_status&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">anno_key</span><span class="p">,</span>
    <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
    <span class="n">segment_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">task_assignee</span><span class="o">=</span><span class="s2">&quot;user1&quot;</span><span class="p">,</span>
    <span class="n">job_assignees</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user1&quot;</span><span class="p">],</span>
    <span class="n">job_reviewers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user2&quot;</span><span class="p">,</span> <span class="s2">&quot;user3&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">print_status</span><span class="p">()</span>

<span class="n">results</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">delete_annotation_run</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Status for label field &#39;ground_truth&#39;:

    Task 331 (FiftyOne_quickstart_ground_truth):
        Status: annotation
        Assignee: user1
        Last updated: 2021-08-11T15:09:02.680181Z
        URL: http://localhost:8080/tasks/331

        Job 369:
            Status: annotation
            Assignee: user1
            Reviewer: user2

        Job 370:
            Status: annotation
            Assignee: user1
            Reviewer: user3
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Pro tip</strong>: If you are iterating over many annotation runs, you can use
<a class="reference internal" href="../api/fiftyone.utils.annotations.html#fiftyone.utils.annotations.connect_to_api" title="fiftyone.utils.annotations.connect_to_api"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect_to_api()</span></code></a> and
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATAnnotationResults.use_api" title="fiftyone.utils.cvat.CVATAnnotationResults.use_api"><code class="xref py py-meth docutils literal notranslate"><span class="pre">use_api()</span></code></a> as
shown below to reuse a single
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATAnnotationAPI" title="fiftyone.utils.cvat.CVATAnnotationAPI"><code class="xref py py-class docutils literal notranslate"><span class="pre">CVATAnnotationAPI</span></code></a> instance
and avoid reauthenticating with CVAT for each run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone.utils.annotations</span> <span class="k">as</span> <span class="nn">foua</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">foua</span><span class="o">.</span><span class="n">connect_to_api</span><span class="p">()</span>

<span class="k">for</span> <span class="n">anno_key</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">list_annotation_runs</span><span class="p">():</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
    <span class="n">results</span><span class="o">.</span><span class="n">use_api</span><span class="p">(</span><span class="n">api</span><span class="p">)</span>
    <span class="n">results</span><span class="o">.</span><span class="n">print_status</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="deleting-tasks">
<h3>Deleting tasks<a class="headerlink" href="#deleting-tasks" title="Permalink to this headline">¶</a></h3>
<p>You can use the
<a class="reference internal" href="../api/fiftyone.utils.cvat.html#fiftyone.utils.cvat.CVATAnnotationAPI.delete_task" title="fiftyone.utils.cvat.CVATAnnotationAPI.delete_task"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_task()</span></code></a>
method to delete specific CVAT tasks associated with an annotation run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiftyone</span> <span class="k">as</span> <span class="nn">fo</span>
<span class="kn">import</span> <span class="nn">fiftyone.zoo</span> <span class="k">as</span> <span class="nn">foz</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">anno_key</span> <span class="o">=</span> <span class="s2">&quot;cvat_delete_tasks&quot;</span>

<span class="n">view</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">anno_key</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_annotation_results</span><span class="p">(</span><span class="n">anno_key</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">connect_to_api</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">task_ids</span><span class="p">)</span>
<span class="c1"># [372]</span>

<span class="n">api</span><span class="o">.</span><span class="n">delete_task</span><span class="p">(</span><span class="mi">372</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="labelstudio.html" class="btn btn-neutral float-right" title="Label Studio Integration" accesskey="n" rel="next">Next <img src="../_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="activitynet.html" class="btn btn-neutral" title="ActivityNet Integration" accesskey="p" rel="prev"><img src="../_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  
</footer>
          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">CVAT Integration</a><ul>
<li><a class="reference internal" href="#basic-recipe">Basic recipe</a></li>
<li><a class="reference internal" href="#setup">Setup</a><ul>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#cvat-self-hosted-server">Self-hosted servers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#requesting-annotations">Requesting annotations</a><ul>
<li><a class="reference internal" href="#label-schema">Label schema</a></li>
<li><a class="reference internal" href="#label-attributes">Label attributes</a></li>
<li><a class="reference internal" href="#restricting-additions-deletions-and-edits">Restricting additions, deletions, and edits</a></li>
<li><a class="reference internal" href="#labeling-videos">Labeling videos</a></li>
<li><a class="reference internal" href="#cvat-limitations">CVAT limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loading-annotations">Loading annotations</a></li>
<li><a class="reference internal" href="#managing-annotation-runs">Managing annotation runs</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#adding-new-label-fields">Adding new label fields</a></li>
<li><a class="reference internal" href="#editing-existing-labels">Editing existing labels</a></li>
<li><a class="reference internal" href="#restricting-label-edits">Restricting label edits</a></li>
<li><a class="reference internal" href="#annotating-multiple-fields">Annotating multiple fields</a></li>
<li><a class="reference internal" href="#unexpected-annotations">Unexpected annotations</a></li>
<li><a class="reference internal" href="#creating-projects">Creating projects</a></li>
<li><a class="reference internal" href="#uploading-to-existing-projects">Uploading to existing projects</a></li>
<li><a class="reference internal" href="#assigning-users">Assigning users</a></li>
<li><a class="reference internal" href="#large-annotation-runs">Large annotation runs</a></li>
<li><a class="reference internal" href="#scalar-labels">Scalar labels</a></li>
<li><a class="reference internal" href="#uploading-alternate-media">Uploading alternate media</a></li>
<li><a class="reference internal" href="#using-cvat-s-occlusion-widget">Using CVAT’s occlusion widget</a></li>
<li><a class="reference internal" href="#using-cvat-groups">Using CVAT groups</a></li>
<li><a class="reference internal" href="#changing-destination-field">Changing destination field</a></li>
<li><a class="reference internal" href="#using-frame-start-stop-step">Using frame start, stop, step</a></li>
</ul>
</li>
<li><a class="reference internal" href="#annotating-videos">Annotating videos</a><ul>
<li><a class="reference internal" href="#adding-new-frame-labels">Adding new frame labels</a></li>
<li><a class="reference internal" href="#editing-frame-level-label-tracks">Editing frame-level label tracks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#importing-existing-tasks">Importing existing tasks</a></li>
<li><a class="reference internal" href="#additional-utilities">Additional utilities</a><ul>
<li><a class="reference internal" href="#using-the-cvat-api">Using the CVAT API</a></li>
<li><a class="reference internal" href="#viewing-task-statuses">Viewing task statuses</a></li>
<li><a class="reference internal" href="#deleting-tasks">Deleting tasks</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
         <script src="../_static/jquery.js"></script>
         <script src="../_static/underscore.js"></script>
         <script src="../_static/doctools.js"></script>
         <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
         <script src="../_static/js/voxel51-website.js"></script>
         <script src="../_static/js/custom.js"></script>
     

  

  <script type="text/javascript" src="../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->


  <div class="container-fluid docs-tutorials-resources" id="docs-tutorials-resources">
    <div class="container">
      <div class="row">
        <div class="col-md-4 text-center">
          <h2>Docs</h2>
          <p>Access comprehensive developer documentation for PyTorch</p>
          <a class="with-right-arrow" href="https://pytorch.org/docs/stable/index.html">View Docs</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Tutorials</h2>
          <p>Get in-depth tutorials for beginners and advanced developers</p>
          <a class="with-right-arrow" href="https://pytorch.org/tutorials">View Tutorials</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Resources</h2>
          <p>Find development resources and get your questions answered</p>
          <a class="with-right-arrow" href="https://pytorch.org/resources">View Resources</a>
        </div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="https://pytorch.org/" class="footer-logo"></a>
      </div>

      <div class="footer-links-wrapper">
        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/">PyTorch</a></li>
            <li><a href="https://pytorch.org/get-started">Get Started</a></li>
            <li><a href="https://pytorch.org/features">Features</a></li>
            <li><a href="https://pytorch.org/ecosystem">Ecosystem</a></li>
            <li><a href="https://pytorch.org/blog/">Blog</a></li>
            <li><a href="https://github.com/pytorch/pytorch/blob/master/CONTRIBUTING.md">Contributing</a></li>
          </ul>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/resources">Resources</a></li>
            <li><a href="https://pytorch.org/tutorials">Tutorials</a></li>
            <li><a href="https://pytorch.org/docs/stable/index.html">Docs</a></li>
            <li><a href="https://discuss.pytorch.org" target="_blank">Discuss</a></li>
            <li><a href="https://github.com/pytorch/pytorch/issues" target="_blank">Github Issues</a></li>
            <li><a href="https://pytorch.org/assets/brand-guidelines/PyTorch-Brand-Guidelines.pdf" target="_blank">Brand Guidelines</a></li>
          </ul>
        </div>

        <div class="footer-links-col follow-us-col">
          <ul>
            <li class="list-title">Stay Connected</li>
            <li>
              <div id="mc_embed_signup">
                <form
                  action="https://twitter.us14.list-manage.com/subscribe/post?u=75419c71fe0a935e53dfa4a3f&id=91d0dccd39"
                  method="post"
                  id="mc-embedded-subscribe-form"
                  name="mc-embedded-subscribe-form"
                  class="email-subscribe-form validate"
                  target="_blank"
                  novalidate>
                  <div id="mc_embed_signup_scroll" class="email-subscribe-form-fields-wrapper">
                    <div class="mc-field-group">
                      <label for="mce-EMAIL" style="display:none;">Email Address</label>
                      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address">
                    </div>

                    <div id="mce-responses" class="clear">
                      <div class="response" id="mce-error-response" style="display:none"></div>
                      <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->

                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_75419c71fe0a935e53dfa4a3f_91d0dccd39" tabindex="-1" value=""></div>

                    <div class="clear">
                      <input type="submit" value="" name="subscribe" id="mc-embedded-subscribe" class="button email-subscribe-button">
                    </div>
                  </div>
                </form>
              </div>

            </li>
          </ul>

          <div class="footer-social-icons">
            <a href="https://www.facebook.com/pytorch" target="_blank" class="facebook"></a>
            <a href="https://twitter.com/pytorch" target="_blank" class="twitter"></a>
            <a href="https://www.youtube.com/pytorch" target="_blank" class="youtube"></a>
          </div>
        </div>
      </div>
    </div>
  </footer>


  

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->


  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://pytorch.org/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <a href="https://pytorch.org/features">Features</a>
          </li>

          <li>
            <a href="https://pytorch.org/ecosystem">Ecosystem</a>
          </li>

          <li>
            <a href="https://pytorch.org/mobile">Mobile</a>
          </li>

          <li>
            <a href="https://pytorch.org/hub">PyTorch Hub</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li class="active">
            <a href="https://pytorch.org/docs/stable/index.html">Docs</a>
          </li>

          <li>
            <a href="https://pytorch.org/resources">Resources</a>
          </li>

          <li>
            <a href="https://github.com/pytorch/pytorch">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>


  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>